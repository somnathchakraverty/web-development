function accountActivationController(e,t,a,o,r,i,n,s,l,d,c,u,m,p){e.verified=!1,e.urlParam=m,e.verifyAccount=function(){doPost(r,p.serverUrl+"commonservice/activateUserAccount",{user_id:e.urlParam.id,verification_number:e.urlParam.key},"",function(t){1==t.status&&(e.verified=!0)})},e.verifyAccount()}function bookOrderController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b,h,y,k){e.popularPackageList=!1,e.loginModal=!1,e.forgotPwdModal=!1,e.signupModal=!1,e.changePwdModal=!1,e.mobileModal=!1,e.firstPageList=[],e.orderList=!1,e.userId=null,e.selection=[],e.addToCartModal=!1,e.btnshow=!1,e.rel=!1,e.addNewAddress=!1,e.newlocation=!1,e.hideSuggestedLocation=!1,e.relative=!1,e.guestUser=!1,e.alertDiv=!1,e.samepkg=!1,e.addhide=!1,e.loggedin=!1,e.searchFlag=!1,e.addfield=!0,e.loc_id="",e.customSearchVal="",e.suggestPackageList=[],e.localityList=[],e.customerDetails=[],e.filters={},e.filters.suggested_test=[],e.searchValue=[],t.selectData=[],t.total=0,e.cityList=[],e.temp=[],e.member=[],e.noTimeSlot=!1,e.amount=0,e.subtotal=0,e.displayData={},e.habitListCheckbox={},e.displayList=!1,t.count=0,e.flag=!1,e.flagSelf=!1,e.notificationPeak=!1,e.collectiontimeflag=!1,e.notification=!1,e.customerIndex=void 0,e.loading=!0,e.previewDiv=99,e.disableName=!1,e.disableRelation=!1,e.disablePhone=!1,e.disableGender=!1,e.viewPkgbox=!1,e.includeList=[],e.pkglimit=2,e.healthian_package=[],e.customincludeList=[],e.customincludeList1=[],e.accordionList=[],e.tempUser=[],e.previewList=[],e.RelationShip=[],e.RelationShipwithoutSelf=[],e.pkgNew=[],e.addNewPatient=!1,e.addNewPatientSocial=!1,e.patientAddErrorDiv=!1,e.errorMsg="",localStorage.removeItem("booking_id");var v={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()}},S=JSON.parse(localStorage.getItem("cityID"));if(null===S&&localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),null!==localStorage.getItem("time_slot")&&""!==localStorage.getItem("time_slot")){var w={slot_id:JSON.parse(localStorage.getItem("time_slot")).slot_id};a.getSlotEmptyById(w,function(e){localStorage.removeItem("time_slot")})}e.packageTestList=[],e.showPkgtests=function(t){e.packageTestList=[],doPostWithOutToken(o,b.serverUrl+"commonservice/getTestDetailByGroupId",{group_id:t.testId},"",function(a){if(a.data){e.packageTestList=a.data,e.display_name=t.display_name,e.test_include=0,console.log(e.packageTestList);var o=[],r=[],i=(e.packageTestList.length,"product");if(e.packageTestList.forEach(function(t,a){o.push(t.deal.deal_type+"_"+t.deal.deal_type_id),r.push({id:t.deal.deal_type+"_"+t.deal.deal_type_id,quantity:1,item_price:t.deal.price}),t.tests.forEach(function(t,a){"profile"==t.ptype?e.test_include+=t.tests.length:"parameter"==t.ptype&&(e.test_include+=1)})}),"undefined"!=typeof p.fbq){var n=[];n.content_ids=o,n.contents=r,n.content_type=i,n.content_category="Orderbook > View Details",p.fbq("track","ViewContent",n)}}}),e.viewPkgbox=!e.viewPkgbox},e.findCityDetail=function(t){e.cityObj=[],e.cityObj.push(t),localStorage.setItem("cityID",JSON.stringify(e.cityObj))},"true"==localStorage.getItem("isLogin")&&(e.loggedin=!0),e.frontPageSearchInt=function(){e.tags=r.getSearchPackages(),e.tags.length>0?(e.tags.forEach(function(t,a){e.habitListCheckbox[t.id]=!0,e.searchValue.push({text:t.text,id:t.id})}),e.createSearchRequest()):(e.includeList=[],e.customincludeList=[],e.customincludeList1=[],e.loading=!1)},t.addTags=function(t){var a={text:t.text,id:t.id};e.findIndex("searchValue",t.text,"text",function(t){t==-1&&e.searchValue.push(a)})},e.createSearchRequest=function(){0!=e.tags.length&&(e.searchFlag=!0);var t=e.tags||[],a={filters:{suggested_test:[],cities:{city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id}},searchValue:t};doPostWithOutToken(o,b.serverUrl+"search",a,"",function(t){if(e.radiology=t.data.radiology||[],e.pathology=t.data.pathology||[],0===e.pathology)e.firstPageList=[],e.accordionList=[],e.includeList=[],e.customincludeList=[],e.customincludeList1=[],e.healthian_package=[];else{if(e.includeList=[],e.customincludeList=[],e.customincludeList1=[],e.loading=!1,e.firstPageList=e.pathology,void 0!==e.firstPageList.healthian_package&&e.firstPageList.healthian_package.length>0&&(e.firstPageList.custom_package=e.firstPageList.healthian_package[0],e.customincludeList=e.firstPageList.custom_package.include_tests,e.customincludeList1=e.firstPageList.custom_package.also_include_tests),void 0!==e.firstPageList.non_healthian_package&&e.firstPageList.non_healthian_package.length>0&&e.firstPageList.non_healthian_package.forEach(function(t,a){e.accordionList[a]=t,e.accordionList[a].tests=e.testAlreadyInList(t.tests)}),void 0!==e.firstPageList.healthian_package){e.healthian_package=e.firstPageList.healthian_package;for(var a=1;a<e.pkglimit;a++)e.includeList.push(e.healthian_package[a])}e.dataforcheckout=e.pathology}})},e.viewMore=function(){e.includeList=[],e.pkglimit+=5;for(var t=1;t<e.pkglimit;t++)t<e.healthian_package.length&&e.includeList.push(e.healthian_package[t])},e.checkSelection=function(t){var a=$(t.target).find("a").text()||$(t.target).text(),o=$(t.target).find("a").attr("id")||$(t.target).attr("id"),r=$(t.target).closest("li").hasClass("selectedtest"),i=$(t.target).closest("li").hasClass("suggestpackage");if(r)e.findIndex("tags",a,"text",function(o){o!==-1&&(e.tags.splice(o,1),$(t.target).closest("li").removeClass("selectedtest"),e.findIndex("searchValue",a,"text",function(t){t!==-1&&e.searchValue.splice(t,1)}))});else if(i){var n={text:a,id:o};e.findIndex("tags",a,"text",function(t){t==-1&&(e.tags.push(n),e.searchValue.push(n),$('li:contains("'+a+'")').addClass("selectedtest"))})}else{var n={text:a,id:o};e.findIndex("tags",a,"text",function(a){a==-1&&(e.tags.push(n),e.searchValue.push(n),$(t.target).closest("li").addClass("selectedtest"))})}},e.showHomeHealthkarma=function(){v.any()&&(e.hide_healthkarma_popup=!1)},e.loadTags=function(t){return v.any()&&(e.hide_healthkarma_popup=!0),o({method:"GET",url:b.couponUrl+"webv1/web_api/packageSuggestion",params:{keyword:t,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(a){null==a.data&&(v.any()&&(e.hide_healthkarma_popup=!0),h.eventTrack("Received Zero Suggestions from Auto-suggestor",{category:"Search",label:t}))})},e.toggleList=function(){e.tags.forEach(function(e,t){$('.Navpopulartests li:contains("'+e.text+'")').addClass("selectedtest")}),$("tags-input .tags .tag-item").css({background:"#1b75bc",color:"white"}),e.popularPackageList=!e.popularPackageList,v.any()&&(e.hide_healthkarma_popup=!0)},e.addToCart=function(a){e.cartclicked=!0;var o=angular.copy(a);k.setTempPackage(o),"true"==localStorage.getItem("isLogin")?(e.member=JSON.parse(localStorage.getItem("user")).relatives,0===e.member.length||0!==t.count&&"undefined"!=typeof t.count?e.tempUser=JSON.parse(localStorage.getItem("tempUser")):(e.tempUser=e.member,localStorage.setItem("tempUser",JSON.stringify(e.tempUser))),e.addToCartModal=!0,h.eventTrack("Book to cart",{category:"My Cart",label:o.display_name,value:o.healthian_price}),y.go("user_selection_cart")):(e.$$childHead.loginModal=!e.$$childHead.loginModal,e.$$childHead.signupModal=!1,e.$$childHead.loginTab=!1,e.$$childHead.signupText="Continue to Cart"),e.temp=a},e.$on("showPatientDialog",function(a,o){if("true"==localStorage.getItem("isLogin")){t.loggedin=!0;var r=JSON.parse(localStorage.getItem("user")).name,i=r.split(" ");t.user=i[0].charAt(0).toUpperCase().concat(i[0].substr(1)),e.userLoginDetails=JSON.parse(localStorage.getItem("user")),"true"==localStorage.getItem("isSocialLogin")&&(""===e.userLoginDetails.mobile?e.mobileModal=!0:e.mobileModal=!1);var n=k.getTempPackage();e.addToCart(n)}}),e.customSearch=function(){doPostWithOutToken(o,b.serverUrl+"commonservice/packageSuggestion",{keyword:e.customSearchVal},"",function(t){e.suggestPackageList=t.data})},e.customLocalitySearch=function(t){e.getcustomerForm.sampledate="",e.getcustomerForm.collectiondate.$dirty=!1,void 0!==e.getcustomerForm.location&&""!==e.getcustomerForm.location||(e.getcustomerForm.location="");var o={city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id,locality:e.getcustomerForm.location};a.getLocalityByCity(o,function(t){"success"==t.status?(e.localityList=t.data,e.hideSuggestedLocation=!0,e.addNewAddress=!1,e.newlocation=!1):"error"==t.status?"Record not found"==t.message?(e.addNewAddress=!0,e.hideSuggestedLocation=!1):e.hideSuggestedLocation=!1:e.addNewAddress=!1})},e.checkSelection1=function(t){localStorage.setItem("locality",JSON.stringify(t)),e.getcustomerForm.location=t.location_name,e.loc_id=t.loc_id,e.addNewAddress=!1,e.hideSuggestedLocation=!1},e.testAlreadyInList=function(t){var a=[];return void 0!==t&&t.forEach(function(t,o){var r=-1;e.tags.forEach(function(e,a){var o=e.text.toString().toUpperCase(),i=t.tcategory_name.toString().toUpperCase();i==o&&(r=a)}),r==-1&&a.push(t)}),a},e.findIndex=function(t,a,o,r){var i=-1;e[t].forEach(function(e,t){(a||"").replace(/\s/g,"")===(e[o]||"").replace(/\s/g,"")&&(i=t)}),r(i)},e.updateSearch=function(){p.scrollTo(0,angular.element(document.getElementById("topdiv")).offsetTop),e.pkglimit=2,0!=e.searchValue.length&&(e.searchFlag=!0),e.loading=!0,e.filters.suggested_test=t.selectData||[];e.searchValue||[];e.filters.cities={city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id};var a={filters:e.filters,searchValue:e.searchValue};"undefined"!=typeof p.fbq&&p.fbq("track","Search",a),h.eventTrack("Search From Orderbook Page",{category:"Search",label:a}),doPostWithOutToken(o,b.serverUrl+"search",a,"",function(t){if(e.popularPackageList=!1,e.includeList=[],e.loading=!1,e.customincludeList=[],e.customincludeList1=[],t.data&&(_.isEmpty(t.data.pathology)?e.firstPageList=[]:e.firstPageList=t.data.pathology,void 0!==e.firstPageList.healthian_package&&e.firstPageList.healthian_package.length>0&&(e.firstPageList.custom_package=e.firstPageList.healthian_package[0],e.customincludeList=e.firstPageList.custom_package.include_tests,e.customincludeList1=e.firstPageList.custom_package.also_include_tests),void 0!==e.firstPageList.non_healthian_package&&e.firstPageList.non_healthian_package.length>0&&e.firstPageList.non_healthian_package.forEach(function(t,a){e.accordionList[a]=t,e.accordionList[a].tests=e.testAlreadyInList(t.tests)}),void 0!==e.firstPageList.healthian_package)){e.healthian_package=e.firstPageList.healthian_package;for(var a=1;a<e.pkglimit;a++)e.includeList.push(e.healthian_package[a])}})},e.riskstatus={},e.habitstatus={},e.getAllHabits=function(){a.getAllHabitsDetails(function(t){t.status===!0&&(e.habitList=t.data,e.habitList.forEach(function(t,a){e.habitstatus[t.id]=!1}))})},e.habitToggleOpen=function(t){_.map(e.habitstatus,function(a,o){o===t?e.habitstatus[t]=!e.habitstatus[t]:e.habitstatus[o]=!1})},f(function(){angular.element("div.box-content").addClass("removed"),angular.element("div.box-content").hide(0),angular.element(".coupon-handle span").toggleClass("glyphicon-chevron-down glyphicon-chevron-up")},3e3),e.getAllRiskDetails=function(){a.getAllRiskDetails(function(t){t.status===!0&&(e.riskgroups=t.data,e.riskgroups.forEach(function(t,a){e.riskstatus[t.id]=!1}))})},e.riskToggleOpen=function(t){_.map(e.riskstatus,function(a,o){o===t?e.riskstatus[t]=!e.riskstatus[t]:e.riskstatus[o]=!1})},e.toggleSelection=function(a){e.findIndex("selection",a.test_name,"test_name",function(o){o==-1?(e.selection.push(a),e.addTest()):(e.selection.splice(o,1),e.habitListCheckbox[a.test_id]?e.addTest():(t.removeTag({text:a.test_name,id:a.test_id}),t.selectData.forEach(function(e,o){a.test_name==e.text&&t.selectData.splice(o,1)}),e.findIndex("tags",a.test_name,"text",function(t){t!==-1&&(e.tags.splice(t,1),e.findIndex("searchValue",a.test_name,"text",function(t){t!==-1&&e.searchValue.splice(t,1)}))})))})},e.addTest=function(){$(".added-parameter").slideToggle("fast"),e.selection.forEach(function(a,o){var r=-1;t.selectData.forEach(function(e,t){a.test_name==e.text&&(r=1)}),e.tags.forEach(function(e,t){a.test_name==e.text&&(r=1)}),e.searchValue.forEach(function(e,t){a.test_name==e.text&&(r=1)}),1!=r&&(t.selectData.push({text:a.test_name,id:a.test_id}),e.tags.push({text:a.test_name,id:a.test_id}))}),e.updateSearch()},e.suggestedListActions=function(){e.hideSuggestedTest=!0,$(".added-parameter1").slideToggle("fast"),$("#suggestTestMsg").delay(1e3).fadeOut(1e3)},t.removeTag=function(a){e.findIndex("searchValue",a.text,"text",function(t){t!=-1&&e.searchValue.splice(t,1)}),e.habitListCheckbox[a.id]=!1,e.findIndex("selection",a.text,"test_name",function(a){a!=-1&&(e.selection.splice(a,1),t.selectData.splice(a,1))}),t.selectData.forEach(function(e,o){a.text==e.text&&t.selectData.splice(o,1)}),f(function(){e.updateSearch()},1e3)},e.getSubTotal=function(t,a){return e.subtotal=0,t.forEach(function(t,a){e.subtotal+=parseInt(t.healthian_price)}),e.subtotal},e.getTestIncluedCount=function(e,t){var a=e.include_tests.length,o=e.also_include_tests.length;return a+o},e.getTestInclued=function(e,t){var a="",o="";return e.include_tests.forEach(function(e,t){o=e.tcategory_name+",",a+=o}),e.also_include_tests.forEach(function(e,t){o=e.tcategory_name+",",a+=o}),a},e.getPkgCount=function(t,a){return e.testCount=0,t.newpkg.forEach(function(t,a){e.testCount++}),e.testCount},e.clearSearch=function(){e.searchValue=[],e.habitListCheckbox={},e.selection=[],t.selectData=[],e.tags=[],$(".populartests li").removeClass("selectedtest"),e.updateSearch()},e.getPopularPackageTest=function(){o({method:"GET",url:b.couponUrl+"webv1/web_api/getPopularPackages",params:{city:JSON.parse(localStorage.getItem("cityID"))[0].city_name}}).success(function(t){t.data?e.popularPackages1=t.data:e.popularPackages1=[]}),o({method:"GET",url:b.couponUrl+"webv1/web_api/getPopulerTests",params:{city:JSON.parse(localStorage.getItem("cityID"))[0].city_name}}).success(function(t){t.data?e.popularTest1=t.data:e.popularTest1=[]})},e.getPopularPackageTest(),e.getAllRiskDetails(),e.getAllHabits(),e.frontPageSearchInt(),e.coupondata={},localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),e.$on("changeCityDropown",function(t,a){e.updateSearch(),e.getPopularPackageTest()}),e.closeMobileCallToBookPopup=function(){h.eventTrack("Mobile - Call To Book Pop up - Close",{category:"Mobile Call To Book Pop up"}),e.mobileCallToBookPopupDiv=!1},angular.element("#mobileCallToBook_bg").click(function(){e.closeMobileCallToBookPopup()}),e.closeCallToBookPopup=function(){angular.element("#callToBook_bg").fadeOut(0),angular.element("#callToBookPopup").slideUp(0),h.eventTrack("Call To Book Pop up - Close",{category:"Call To Book Pop up"})},angular.element("#callToBook_bg").click(function(){e.closeCallToBookPopup()}),angular.element("#closeCallToBookmodal").click(function(){e.closeCallToBookPopup()}),e.exitCallToBookError=!1,e.mobileCallToBookPopupDiv=!1,e.callToBookMobileError=!1,e.callToBook=function(t){if(e.clickedPackage=t,"true"==localStorage.getItem("isLogin")){var a=JSON.parse(localStorage.getItem("user")).user_id,o={data:{utm_id:"web-call-to-book",user_id:a,originator:"orderbook",source:"web"}};o.data.message="Customer search for : "+e.clickedPackage,v.any()?(o.data.utm_id="mob-call-to-book",o.data.source="mobile",e.sendDirectDetailsMobile(o)):e.sendDirectDetailsDesktop(o)}else v.any()?e.mobileCallToBookPopupDiv=!0:(angular.element("#callToBookPopup").css("left",p.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",p.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus())},e.changeCallToBookDetailsPopupButtonColor=function(){e.customerctbNo&&(10!==e.customerctbNo.length||isNaN(e.customerctbNo)||void 0===e.customerctbNo||""===e.customerctbNo?(angular.element("#callToBooksubmitbtn").css("background","#b7b7b7"),angular.element("#callToBooksubmitbtn").css("border","1px solid #cecece"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#callToBooksubmitbtn").css("background","#e1530d"),angular.element("#callToBooksubmitbtn").css("border","1px solid #eaeaea"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendCallToBookDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerctbNo||""===e.customerctbNo)return e.addCallToBookLeadForm.customerno123.$dirty=!0,e.addCallToBookLeadForm.customerno123.$invalid=!0,h.eventTrack("Validation Fail",{category:"Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.customerctbNo))return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Enter valid Mobile number",h.eventTrack("Validation Fail",{category:"Call To Book Pop up",label:"Validation Fail : Not a number"}),f(function(){e.mobile_valid_error=!1},2e3),!1;if(10!==e.customerctbNo.length)return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Mobile number should be of 10 digits",h.eventTrack("Validation Fail",{category:"Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),f(function(){e.mobile_valid_error=!1},2e3),!1;var t={data:{utm_id:"web-call-to-book",name:e.customerctbName,mobile:e.customerctbNo,source:"web",originator:"orderbook"}};localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid")),t.data.message="Customer search for : "+e.clickedPackage;var a=b.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(o,a,t,"",function(a){a.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",h.eventTrack("Lead Captured",{category:"Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof p.fbq&&p.fbq("track","Lead",t)),e.customerctbName="",e.customerctbNo="",e.Message="",e.addCallToBookLeadForm.name123.$dirty=!1,e.addCallToBookLeadForm.customerno123.$dirty=!1,e.ctb_mob_valid_error=!1,f(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(a.message)})},e.sendDirectDetailsDesktop=function(t){var a=b.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(o,a,t,"",function(a){a.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",h.eventTrack("Lead Captured",{category:"Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof p.fbq&&p.fbq("track","Lead",t)),e.Message="",angular.element("#callToBookPopup").css("left",p.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",p.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus(),f(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(a.message)})},e.changeMobileCallToBookPopupButtonColor=function(){e.ctbcustomerNo&&(10!==e.ctbcustomerNo.length||isNaN(e.ctbcustomerNo)||void 0===e.ctbcustomerNo||""===e.ctbcustomerNo?(angular.element("#ctbmobilepopupsubmitbtn").css("background","#b7b7b7"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #cecece"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#ctbmobilepopupsubmitbtn").css("background","#e1530d"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #eaeaea"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendDirectDetailsMobile=function(t){var a=b.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(o,a,t,"",function(a){a.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",h.eventTrack("Lead Captured",{category:"Mobile Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof p.fbq&&p.fbq("track","Lead",t)),e.Message="",e.mobileCallToBookPopupDiv=!0,f(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(a.message)})},e.sendMobileCTBPopupDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.ctbcustomerNo||""===e.ctbcustomerNo)return e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!0,e.addMobileCTBPopupLeadForm.ctbcustomerno.$invalid=!0,h.eventTrack("Validation Fail",{category:"Mobile Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.ctbcustomerNo))return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Enter valid Mobile number",h.eventTrack("Validation Fail",{category:"Mobile Call To Book Pop up",label:"Validation Fail : Not a number"}),f(function(){e.ctb_mob_valid_error=!1},2e3),!1;if(10!==e.ctbcustomerNo.length)return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Mobile number should be of 10 digits",h.eventTrack("Validation Fail",{category:"Mobile Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),f(function(){e.ctb_mob_valid_error=!1},2e3),!1;var t={data:{utm_id:"mob-call-to-book",name:e.ctbcustomerName,mobile:e.ctbcustomerNo,originator:"orderbook",source:"mobile"}};t.data.message="Customer search for : "+e.clickedPackage,localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=b.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(o,a,t,"",function(a){a.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",h.eventTrack("Lead Captured",{category:"Mobile Call To Book Pop up",label:e.ctbcustomerNo}),"undefined"!=typeof p.fbq&&p.fbq("track","Lead",t)),e.ctbcustomerName="",e.ctbcustomerNo="",e.addMobileCTBPopupLeadForm.ctbname.$dirty=!1,e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!1,f(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(a.message)})}}function careerController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f){e.addAddressForm={},e.noticPeriodList=[{name:"15 Days"},{name:"30 Days"},{name:"45 Days"},{name:"2 Months"},{name:"3 Months"}],e.notice=e.noticPeriodList[0],e.postList=[{name:"Executive Customer Service"},{name:"Executive Outbound - Sales"},{name:"Phlebotomist"},{name:"Senior Manager Sales"}],e.post=e.postList[0],e.carrerAnchor=function(){g("careerAnchore")},e.oneAtATime=!0,e.status={first:!1,second:!1,third:!1,fourth:!1,fifth:!1,six:!1,seven:!1,eight:!1,nine:!1},e.toggleOpen=function(t){_.map(e.status,function(a,o){o===t?e.status[t]=!e.status[t]:e.status[o]=!1})},e.verifyAddress=function(){if(e.addAddressFormSubmitted=!1,void 0===e.addAddressForm.Name||""===e.addAddressForm.Name)return e.addAddressForm.name.$dirty=!0,e.addAddressForm.name.$invalid=!0,e.addAddressForm.name.$error.required=!0,!1;if(void 0===e.addAddressForm.customerEmail||""===e.addAddressForm.customerEmail)return e.addAddressForm.customeremail.$dirty=!0,e.addAddressForm.customeremail.$invalid=!0,e.addAddressForm.customeremail.$error.required=!0,!1;if(void 0===e.addAddressForm.No||""===e.addAddressForm.No)return e.addAddressForm.customerno.$dirty=!0,e.addAddressForm.customerno.$invalid=!0,e.addAddressForm.customerno.$error.required=!0,!1;if(void 0===e.addAddressForm.Exp||""===e.addAddressForm.Exp)return e.addAddressForm.customerexp.$dirty=!0,e.addAddressForm.customerexp.$invalid=!0,e.addAddressForm.customerexp.$error.required=!0,!1;if(void 0===e.addAddressForm.currentOrg||""===e.addAddressForm.currentOrg)return e.addAddressForm.currentorg.$dirty=!0,e.addAddressForm.currentorg.$invalid=!0,e.addAddressForm.currentorg.$error.required=!0,!1;if(void 0===e.addAddressForm.currentDes||""===e.addAddressForm.currentDes)return e.addAddressForm.currentdes.$dirty=!0,e.addAddressForm.currentdes.$invalid=!0,e.addAddressForm.currentdes.$error.required=!0,!1;var t=grecaptcha.getResponse(widgetIdCareer);if(0==t.length)return f.alert("Please check Captcha Checkbox"),!1;var a={full_name:e.addAddressForm.Name,email_id:e.addAddressForm.customerEmail,mobile:e.addAddressForm.No,post_applied:e.post.name,experience:e.addAddressForm.Exp,current_organization:e.addAddressForm.currentOrg,current_designation:e.addAddressForm.currentDes,notice_period:e.notice.name,address:e.addAddressForm.Address,file_name:"",file:"",g_recaptcha_response:t};"undefined"!=typeof e.opts&&(a.file_name=e.opts.name,a.file=e.opts.doc),doPostImage(l,p.serverUrl+"commonservice/workWithUs",a,"",function(t){1==t.status?(alert(t.message),e.addAddressForm.Name="",e.addAddressForm.customerEmail="",e.addAddressForm.No="",e.post.name="",e.addAddressForm.Exp="",e.addAddressForm.currentOrg="",e.addAddressForm.currentDes="",e.notice.name="",e.addAddressForm.Address="",e.addAddressForm.name.$dirty=!1,e.addAddressForm.customeremail.$dirty=!1,e.addAddressForm.customerno.$dirty=!1,e.addAddressForm.customerexp.$dirty=!1,e.addAddressForm.currentorg.$dirty=!1,e.addAddressForm.currentdes.$dirty=!1):alert(t.message),grecaptcha.reset(widgetIdCareer)})}}function cartController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,_,f,b){var h={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return h.Android()||h.BlackBerry()||h.iOS()||h.Opera()||h.Windows()}};h.any()?e.device="mobile":e.device="web";var y=localStorage.getItem("token");e.fetchCart=function(){var t=f.couponUrl+"customer/account/fetch_cart_v2",a={data:{user_id:e.userId,city_id:e.city_id,source:"web"}};e.healthiansamount=0,doPost(l,t,a,y,function(t){t.status?"error"===t.status?"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired"):(e.cartData=t.data,e.total_member=e.cartData.customer_detail.length,e.total_cart_amount=e.cartData.total_price,e.cartData.customer_detail.length>0&&(n.totalCartTest=0,e.cartData.customer_detail.forEach(function(t,a){n.totalCartTest+=t.deals.length,t.deals.forEach(function(t,a){e.healthiansamount+=parseInt(t.actual_price)})}))):(n.totalCartTest=0,e.total_member=0,e.total_cart_amount=0,e.cartData={})})},"true"==localStorage.getItem("isLogin")?(e.userId=JSON.parse(localStorage.getItem("user")).user_id,e.city_id=JSON.parse(localStorage.getItem("cityID"))[0].city_id,e.userId&&e.city_id&&e.fetchCart()):u.go("orderbook"),e.deletePkg={},e.package_delete_confirmation=function(t,a,o,r){e.deletePkg={customer_id:t,pkg_id:a,pkg_name:o,pkg_price:r},e.package_delete_visible=!0},e.removeItemFromCart=function(t){var a=e.getPackgeCountOfCustomer(t);if(a-1<=0)var o=!0;else var o=!1;var r=f.couponUrl+"customer/account/delete_item_from_cart",i={data:{customer_id:t.customer_id,group_id:t.pkg_id,isCustomerDelete:o,user_id:e.userId,source:e.device}};g.eventTrack("Remove Item from cart",{category:"My Cart",label:t.pkg_name,value:t.pkg_price}),doPost(l,r,i,y,function(t){t.status?"error"===t.status?"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired"):e.fetchCart():alert(t.message)})},e.getPackgeCountOfCustomer=function(t){var a=0;return e.cartData.customer_detail.length>0&&e.cartData.customer_detail.forEach(function(e,o){e.customer_id==t.customer_id&&(a=e.deals.length)}),a},e.checkout=function(){e.cartData.allow_to_proceed?n.totalCartTest>0?u.go("final_checkout"):u.go("orderbook"):(_.alert(e.cartData.allow_to_proceed_message),u.go("user_selection_cart"))},angular.element(".modal-backdrop").remove(),angular.element("body").css("padding-right","0px")}function compaignController(e,t,a,o,r,i,n,s,l,d,c,u){a.meta_robots="noindex, nofollow";var m={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return m.Android()||m.BlackBerry()||m.iOS()||m.Opera()||m.Windows()}};if("dengue"===u.current.name?e.ga_category="Dengue":"web-campaign"===u.current.name?e.ga_category="Landing":"health-se-milegi-wealth-ki-chaabi-lucky-draw"===u.current.name?e.ga_category="Diwali-Campaign-2017":"web-campaign-health-checkup"===u.current.name||"web-campaign-health-checkup-book-now"===u.current.name||"web-campaign-health-checkup-free-call"===u.current.name?(e.ga_category="New Landing Yuvraaj",e.display_order_price="2700/",e.display_healthians_price="999/-",e.display_saving="63%",e.display_package="(Kidney, Liver, Thyroid, Sugar, Lipid/Cholesterol, Blood, Urine)",e.display_doc="DOCTOR CONSULTATION",e.display_doc_text="Professional consultation.",e.display_parameter_count="74"):"web-campaign-health-checkup-599"===u.current.name?(e.ga_category="Health Checkup - 599",e.display_order_price="2430/",e.display_healthians_price="599/-",e.display_saving="75%",e.display_package="(Kidney, Liver, Sugar, Lipid/Cholesterol, CBC)",e.display_doc="FREE HEALTH COUNSELLING",e.display_doc_text="Professional Health Counselling.",e.display_parameter_count="57"):"web-campaign-family"===u.current.name?e.ga_category="New Landing Family":"web-campaign-one-plus-one-full-body-checkup"===u.current.name?(e.ga_category="One Plus One Landing",e.display_order_price="2550/",e.display_healthians_price="1299/-",e.display_saving="49%",e.display_package="(Kidney, Liver, Thyroid, Lipid/Cholesterol, Complete Hemogram, Glucose)",e.display_doc="FREE HEALTH COUNSELLING",e.display_doc_text="Professional Health Counselling.",e.display_package_name="One Plus One Full Body Checkup",e.display_parameter_count="60"):"web-campaign-healthians-summer-special-package"===u.current.name?(e.ga_category="Summer Special Package Landing",e.display_order_price="5350/",e.display_healthians_price="1999/-",e.display_saving="63%",e.display_package="(Kidney, Liver, Thyroid, Lipid/Cholesterol, Complete Hemogram, Glucose, Vitamin B12, Vitamin D, Urine Routine)",e.display_doc="FREE HEALTH COUNSELLING",e.display_doc_text="Professional Health Counselling.",e.display_package_name="Healthians Summer Special Package",e.display_parameter_count="76"):"web-campaign-adwords"===u.current.name?e.ga_category="Adword Campaign":"web-campaign-facebook-leads"===u.current.name?e.ga_category="Facebook Lead Campaign":"web-campaign-health-checkup-1099"===u.current.name?(e.ga_category="Health Checkup - 1099",e.display_order_price="2700/",e.display_healthians_price="1099/-",e.display_saving="59%",e.display_package="(Kidney, Liver, Thyroid, Sugar, Lipid/Cholesterol, Blood, Urine)",e.display_doc="FREE DOCTOR CONSULTATION",e.display_doc_text="Professional consultation.",e.display_parameter_count="74"):"web-campaign-health-checkup-999"===u.current.name?(e.ga_category="Health Checkup - 999",e.display_order_price="2700/",e.display_healthians_price="999/-",e.display_saving="63%",e.display_package="(Kidney, Thyroid, Sugar, Lipid/Cholesterol, Blood, Urine)",e.display_doc="FREE DOCTOR CONSULTATION",e.display_doc_text="Professional consultation.",e.display_parameter_count="62"):"lead-campaign-health-checkup"===u.current.name&&(e.ga_category="Lead Campaign Health Checkup",e.City="1610"),e.sendDirectLeadDetails=function(){if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&("web-campaign-health-checkup"===u.current.name||"web-campaign-health-checkup-book-now"===u.current.name||"web-campaign-health-checkup-free-call"===u.current.name?e.utmid="web-campaign-health-checkup":"web-campaign-one-plus-one-full-body-checkup"===u.current.name?e.utmid="web-campaign-one-plus-one-full-body-checkup":"web-campaign-healthians-summer-special-package"===u.current.name?e.utmid="web-campaign-healthians-summer-special-package":"web-campaign-adwords"===u.current.name?e.utmid="web-campaign-adwords":"web-campaign-facebook-leads"===u.current.name?e.utmid="web-campaign-facebook-leads":"web-campaign-health-checkup-599"===u.current.name&&(e.utmid="web-campaign-health-checkup-599")),
""!==e.utmid&&"undefined"!=typeof e.customerNo)){var a={data:{utm_id:e.utmid,mobile:e.customerNo,source:"web"}};"undefined"!=typeof e.customerName&&(a.data.name=e.customerName),"undefined"!=typeof e.City&&(a.data.city=e.City),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;if(e.customerName="",e.customerNo="",e.Message="",e.compaignmsg=!0,e.showLeadMobileForm=!1,"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var s=n.serverUrl+"commonservice/getVendorPixel",c={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,s,c,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},1e4)}else alert(o.message)})}},e.stateParms=i,e.timeTickerFlag=!1,e.stateParms){if(e.utmid=e.stateParms.utmid,"undefined"!=typeof e.stateParms.email&&(e.customerEmail=e.stateParms.email),"undefined"!=typeof e.stateParms.name&&(e.customerName=e.stateParms.name),"undefined"!=typeof e.stateParms.mobile&&(e.customerNo=e.stateParms.mobile),"undefined"!=typeof e.stateParms.comment&&(e.Message=e.stateParms.comment),"ucb"==e.utmid){var p=document.createElement("script");p.type="text/javascript",p.id="ucb_id",document.getElementsByTagName("head")[0].append(p),angular.element("#ucb_id").append('(function(w, d, t, s, q, m, n) { if (w.utq) return; q = w.utq = function() { q.process ? q.process(arguments) : q.queue.push(arguments); }; q.queue = []; m = d.getElementsByTagName(t)[0]; n = d.createElement(t); n.src = s; n.async = true; m.parentNode.insertBefore(n, m); })(window, document, "script", "https://pixel-insight.ucweb.com/ucads/utracking.js");utq("init", "43282752605257935");utq("set", "trackurl", "pixel-insight.ucweb.com/intl_utrace");utq("track", "PageView");')}if("quora"==e.utmid){var p=document.createElement("script");p.type="text/javascript",p.id="quora_id",document.getElementsByTagName("head")[0].append(p);var g=document.createElement("noscript");g.type="text/javascript",g.id="noscript_quora_id",document.getElementsByTagName("head")[0].append(g),angular.element("#quora_id").append('!function(q,e,v,n,t,s){if(q.qp) return; n=q.qp=function(){n.qp?n.qp.apply(n,arguments):n.queue.push(arguments);}; n.queue=[];t=document.createElement(e);t.async=!0;t.src=v; s=document.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);}(window, "script", "https://a.quora.com/qevents.js");qp("init", "bb9ba203758241a094941b86a559f3fe");qp("track", "ViewContent");'),angular.element("#noscript_quora_id").append('<img height="1" width="1" style="display:none" src="https://q.quora.com/_/ad/bb9ba203758241a094941b86a559f3fe/pixel?tag=ViewContent&noscript=1"/>')}}e.package_info="",e.booknow=!1,e.compaignmsg=!1,e.setPackageInfo=function(t){e.package_info=t,"lead-campaign-health-checkup"===u.current.name?angular.element("#customerno").focus():angular.element("#name").focus(),l.scrollTo(0,0)},e.getCityList=function(){s.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data,"lead-campaign-health-checkup"===u.current.name&&(e.ga_category="Lead Campaign Health Checkup",e.City="1610"))})},e.getCityList(),e.sendDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.customerEmail||""===e.customerEmail)return e.addLeadForm.customeremail.$dirty=!0,e.addLeadForm.customeremail.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Email not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadForm.city.$dirty=!0,e.addLeadForm.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,"health-se-milegi-wealth-ki-chaabi-lucky-draw"===u.current.name&&(e.utmid="diwali-campaign-2017"),""===e.utmid&&("web-campaign-family"===u.current.name&&(e.utmid="web-campaign-family"),"web-campaign-health-checkup"===u.current.name||"web-campaign-health-checkup-book-now"===u.current.name||"web-campaign-health-checkup-free-call"===u.current.name?e.utmid="web-campaign-health-checkup":"web-campaign-health-checkup-599"===u.current.name?e.utmid="web-campaign-health-checkup-599":"web-campaign-one-plus-one-full-body-checkup"===u.current.name?e.utmid="web-campaign-one-plus-one-full-body-checkup":"web-campaign-healthians-summer-special-package"===u.current.name?e.utmid="web-campaign-healthians-summer-special-package":"web-campaign-adwords"===u.current.name?e.utmid="web-campaign-adwords":"web-campaign-facebook-leads"===u.current.name?e.utmid="web-campaign-facebook-leads":e.utmid=1),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,email:e.customerEmail,mobile:e.customerNo,city:e.City,message:e.Message,source:"web"}};"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),e.addLeadForm.customerLastName&&(a.data.last_name=e.addLeadForm.customerLastName),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;e.customerName="",e.customerEmail="",e.customerNo="",e.Message="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.addLeadForm.customeremail.$dirty=!1,e.compaignmsg=!0;var s=new Date,c=new Date(s.getTime()+864e5);if(m.any()?(document.cookie="ExitPopupMobileCookie=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)):(document.cookie="ExpirationCookieTest=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)),"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var u=n.serverUrl+"commonservice/getVendorPixel",p={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,u,p,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},1e4)}else alert(o.message)})}},e.getPopularPackagesList=function(t){r({method:"GET",url:n.couponUrl+"webv1/web_api/getPopularPackages?city="+t}).success(function(t){t.data&&(e.popularPackages1=t.data,e.packageList=e.popularPackages1)})},"lead-campaign-health-checkup"===u.current.name&&e.getPopularPackagesList("Gurgaon"),e.clock=function(t){document.getElementById("timeticker")&&(document.getElementById("timeticker").style.display="block");var a=c(function(){var o=(new Date).getTime(),r=parseInt(t)-o,i=Math.floor(r/864e5),n=Math.floor(r%864e5/36e5),s=Math.floor(r%36e5/6e4),l=Math.floor(r%6e4/1e3);e.timeTicker=i+"d "+n+"h "+s+"m "+l+"s ",document.getElementById("timeticker")&&(document.getElementById("timeticker").innerHTML="Offer expires in : "+e.timeTicker),r<0?(document.getElementById("timeticker")&&(document.getElementById("timeticker").style.display="none",document.getElementById("timeticker").innerHTML=""),c.cancel(a)):document.getElementById("timeticker")&&(document.getElementById("timeticker").style.display="block")},1e3)},e.startTicker=function(){if(null===localStorage.getItem("timeTicker")){var t=2,a=new Date(Date.now()+24*t*60*60*1e3).getTime();localStorage.setItem("timeTicker",a),e.clock(a)}else{var a=localStorage.getItem("timeTicker");e.clock(a)}},e.sendLandingDetails=function(){if(e.addLeadFormSubmitted=!1,"web-campaign-adwords"===u.current.name&&(void 0===e.PackageList||""===e.PackageList))return e.addLeadForm.package.$dirty=!0,e.addLeadForm.package.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Package not select by user"}),!1;if(void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if("web-campaign-facebook-leads"===u.current.name&&(void 0===e.customerName||""===e.customerName))return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if("lead-campaign-health-checkup"===u.current.name){if(void 0===e.customerName||""===e.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadForm.city.$dirty=!0,e.addLeadForm.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.addLeadForm.customeremail.$invalid)return e.addLeadForm.customeremail.$dirty=!0,e.addLeadForm.customeremail.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Email not enter"}),!1}if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&("web-campaign-health-checkup"===u.current.name||"web-campaign-health-checkup-book-now"===u.current.name||"web-campaign-health-checkup-free-call"===u.current.name?e.utmid="web-campaign-health-checkup":"web-campaign-health-checkup-599"===u.current.name?e.utmid="web-campaign-health-checkup-599":"web-campaign-one-plus-one-full-body-checkup"===u.current.name?e.utmid="web-campaign-one-plus-one-full-body-checkup":"web-campaign-healthians-summer-special-package"===u.current.name?e.utmid="web-campaign-healthians-summer-special-package":"web-campaign-adwords"===u.current.name?e.utmid="web-campaign-adwords":"web-campaign-facebook-leads"===u.current.name?e.utmid="web-campaign-facebook-leads":e.utmid="1"),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,mobile:e.customerNo,city:e.City,email:e.customerEmail,source:"web"}};"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid")),"web-campaign-adwords"===u.current.name&&(a.data.message="Customer search for : "+e.PackageList,d.eventTrack("Package Details",{category:e.ga_category,label:e.PackageList})),"lead-campaign-health-checkup"===u.current.name&&""!==e.package_info&&(a.data.message="Customer search for : "+e.package_info,d.eventTrack("Package Details",{category:e.ga_category,label:e.package_info}));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;if(e.customerName="",e.customerNo="",e.Message="",e.customerEmail&&""!==e.customerEmail&&(e.customerEmail="",e.addLeadForm.customeremail.$dirty=!1),e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.compaignmsg=!0,"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var s=n.serverUrl+"commonservice/getVendorPixel",c={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,s,c,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),"lead-campaign-health-checkup"===u.current.name?l.location.href="home":l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),"lead-campaign-health-checkup"===u.current.name?l.location.href="home":l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},1e4)}else alert(o.message)})}},e.showLeadMobileForm=!1,e.tabOnMobileLead=function(){e.showLeadMobileForm=!0},e.hideTabOnMobileLead=function(){e.showLeadMobileForm=!1,e.customerName="",e.customerNo="",e.addLeadFormMobile.name.$dirty=!1,e.addLeadFormMobile.customerno.$dirty=!1},e.sendLandingMobileDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadFormMobile.customerno.$dirty=!0,e.addLeadFormMobile.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if("web-campaign-facebook-leads"!==u.current.name){if(void 0===e.customerName||""===e.customerName)return e.addLeadFormMobile.name.$dirty=!0,e.addLeadFormMobile.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadFormMobile.city.$dirty=!0,e.addLeadFormMobile.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1}if("web-campaign-adwords"===u.current.name&&(void 0===e.PackageList||""===e.PackageList))return e.addLeadFormMobile.package.$dirty=!0,e.addLeadFormMobile.package.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Package not select by user"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&("web-campaign-health-checkup"===u.current.name||"web-campaign-health-checkup-book-now"===u.current.name||"web-campaign-health-checkup-free-call"===u.current.name?e.utmid="web-campaign-health-checkup":"web-campaign-health-checkup-599"===u.current.name?e.utmid="web-campaign-health-checkup-599":"web-campaign-one-plus-one-full-body-checkup"===u.current.name?e.utmid="web-campaign-one-plus-one-full-body-checkup":"web-campaign-healthians-summer-special-package"===u.current.name?e.utmid="web-campaign-healthians-summer-special-package":"web-campaign-adwords"===u.current.name?e.utmid="web-campaign-adwords":"web-campaign-facebook-leads"===u.current.name?e.utmid="web-campaign-facebook-leads":e.utmid="1"),"web-campaign-adwords"===u.current.name&&d.eventTrack("Package Details - Mobile",{category:e.ga_category,label:e.PackageList}),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,mobile:e.customerNo,city:e.City,email:e.customerEmail,source:"web"}};"web-campaign-adwords"===u.current.name&&(a.data.message="Customer search for : "+e.PackageList),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;if(e.customerName="",e.customerNo="",e.Message="",e.customerEmail&&""!==e.customerEmail&&(e.customerEmail="",e.addLeadFormMobile.customeremail.$dirty=!1),e.addLeadFormMobile.name.$dirty=!1,e.addLeadFormMobile.customerno.$dirty=!1,e.compaignmsg=!0,e.showLeadMobileForm=!1,"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var s=n.serverUrl+"commonservice/getVendorPixel",c={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,s,c,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},1e4)}else alert(o.message)})}},"web-campaign"===u.current.name&&e.startTicker();var _=function(){"undefined"!=typeof url&&(l.location=url)};e.gtag_report_conversion=function(e){return"function"==typeof gtag&&gtag("event","conversion",{send_to:"AW-929610874/kgHcCP-t048BEPr4orsD",event_callback:_}),!1}}function contactUsController(e,t,a,o,r,i,n,s,l,d,c,u,m,p){e.verifyAddress=function(){if(e.addAddressFormSubmitted=!1,void 0===e.addAddressForm.Name||""===e.addAddressForm.Name)return e.addAddressForm.name.$dirty=!0,e.addAddressForm.name.$invalid=!0,e.addAddressForm.name.$error.required=!0,!1;if(void 0===e.addAddressForm.customerEmail||""===e.addAddressForm.customerEmail)return e.addAddressForm.customeremail.$dirty=!0,e.addAddressForm.customeremail.$invalid=!0,e.addAddressForm.customeremail.$error.required=!0,!1;if(void 0===e.addAddressForm.No||""===e.addAddressForm.No)return e.addAddressForm.customerno.$dirty=!0,e.addAddressForm.customerno.$invalid=!0,e.addAddressForm.customerno.$error.required=!0,!1;if(void 0===e.addAddressForm.customerComp||""===e.addAddressForm.customerComp)return e.addAddressForm.customercomp.$dirty=!0,e.addAddressForm.customercomp.$invalid=!0,e.addAddressForm.customercomp.$error.required=!0,!1;var t=grecaptcha.getResponse(widgetIdContact);if(0==t.length)return $window.alert("Please check Captcha Checkbox"),!1;var a={full_name:e.addAddressForm.Name,email_id:e.addAddressForm.customerEmail,mobile:e.addAddressForm.No,company:e.addAddressForm.customerComp,message:e.message,g_recaptcha_response:t};doPost(l,p.serverUrl+"commonservice/contactUs",a,"",function(t){1==t.status?(e.addAddressForm.Name="",e.addAddressForm.name.$dirty=!1,e.addAddressForm.customerEmail="",e.addAddressForm.customeremail.$dirty=!1,e.addAddressForm.No="",e.addAddressForm.customerno.$dirty=!1,e.addAddressForm.customerComp="",e.addAddressForm.customercomp.$dirty=!1,e.message="",e.addAddressForm.message.$dirty=!1,alert(t.message)):alert(t.message),grecaptcha.reset(widgetIdContact)})}}function dashboardController(e,t,a,o,r,i,n,s,l,d,c){e.editProfile=!1,e.familyList=[],e.nodata=!1,e.selection=[],e.heghtInInches=0,e.addGlucose=!1,e.userAge=0,e.addBP=!1,e.subscribe=!1,e.loaderVar=!0,e.reorderReport=!1,e.reportSharemsgflag=!1,e.nodataReport=!1,e.slotFlag=!1,e.dayFlag=!1,e.orderDetail=!1,e.userWeight="",e.report={},e.userDetail={},e.loaderVar1=!0,e.customerDetails={},e.bookingEveryList=[{value:"01"},{value:"02"},{value:"03"},{value:"04"},{value:"05"},{value:"06"},{value:"07"},{value:"08"},{value:"09"},{value:"10"},{value:"11"},{value:"12"},{value:"13"},{value:"14"},{value:"15"},{value:"16"},{value:"17"},{value:"18"},{value:"19"},{value:"20"},{value:"21"},{value:"22"},{value:"23"},{value:"24"},{value:"25"},{value:"26"},{value:"27"},{value:"28"},{value:"29"},{value:"30"}],e.repeatDate="03",e.userBooking={repeat:"month"},e.bmr=e.bmi=e.profilecomplete=0;localStorage.getItem("token");e.heightList=[{id:"24",value:"2'0\""},{id:"25",value:"2'1\""},{id:"26",value:"2'2\""},{id:"27",value:"2'3\""},{id:"28",value:"2'4\""},{id:"29",value:"2'5\""},{id:"30",value:"2'6\""},{id:"31",value:"2'7\""},{id:"32",value:"2'8\""},{id:"33",value:"2'9\""},{id:"34",value:"2'10\""},{id:"35",value:"2'11\""},{id:"36",value:"3'0\""},{id:"37",value:"3'1\""},{id:"38",value:"3'2\""},{id:"39",value:"3'3\""},{id:"40",value:"3'4\""},{id:"41",value:"3'5\""},{id:"42",value:"3'6\""},{id:"43",value:"3'7\""},{id:"44",value:"3'8\""},{id:"45",value:"3'9\""},{id:"46",value:"3'10\""},{id:"47",value:"3'11\""},{id:"48",value:"4'0\""},{id:"49",value:"4'1\""},{id:"50",value:"4'2\""},{id:"51",value:"4'3\""},{id:"52",value:"4'4\""},{id:"53",value:"4'5\""},{id:"54",value:"4'6\""},{id:"55",value:"4'7\""},{id:"56",value:"4'8\""},{id:"57",value:"4'9\""},{id:"58",value:"4'10\""},{id:"59",value:"4'11\""},{id:"60",value:"5'0\""},{id:"61",value:"5'1\""},{id:"62",value:"5'2\""},{id:"63",value:"5'3\""},{id:"64",value:"5'4\""},{id:"65",value:"5'5\""},{id:"66",value:"5'6\""},{id:"67",value:"5'7\""},{id:"68",value:"5'8\""},{id:"69",value:"5'9\""},{id:"70",value:"5'10\""},{id:"71",value:"5'11\""},{id:"72",value:"6'0\""},{id:"73",value:"6'1\""},{id:"74",value:"6'2\""},{id:"75",value:"6'3\""},{id:"76",value:"6'4\""},{id:"77",value:"6'5\""},{id:"78",value:"6'6\""},{id:"79",value:"6'7\""},{id:"80",value:"6'8\""},{id:"81",value:"6'9\""},{id:"82",value:"6'10\""},{id:"83",value:"6'11\""},{id:"84",value:"7'0\""},{id:"85",value:"7'1\""},{id:"86",value:"7'2\""},{id:"87",value:"7'3\""},{id:"88",value:"7'4\""},{id:"89",value:"7'5\""},{id:"90",value:"7'6\""},{id:"91",value:"7'7\""},{id:"92",value:"7'8\""},{id:"93",value:"7'9\""},{id:"94",value:"7'10\""},{id:"95",value:"7'11\""}],e.userHeightFeetList=[{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"}],e.userHeightInchList=[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"},{value:"10"},{value:"11"}],e.getdashboardData=function(){if("true"==localStorage.getItem("isLogin"))var a=JSON.parse(localStorage.getItem("user")).user_id,o={user_id:a,log_user_id:a};else var o={user_id:""};r.getmyProfileData(o,function(a){a.status===!0?(e.profileData=a.data,e.userBloodType=e.profileData.user_detail.blood_group,e.userWeight=e.profileData.user_detail.weight,e.userHeight=e.profileData.user_detail.height,e.heghtInInches=e.profileData.user_detail.height,e.userCompanyName=e.profileData.user_detail.company,e.userInsuranceCompany=e.profileData.user_detail.insurance_company,e.username=e.profileData.user_detail.name,e.userage=e.profileData.user_detail.age,e.usergender=e.profileData.user_detail.gender,e.city=e.profileData.user_detail.city,e.country=e.profileData.user_detail.country_name,e.familyList=e.profileData.family_member,0!==e.profileData.user_detail.image&&(e.stepsModel=decodeURIComponent(e.profileData.user_detail.image)),e.userEmail=e.profileData.user_detail.email_address,e.userContact=e.profileData.user_detail.contact_number,e.country_code=e.profileData.user_detail.country_code,e.userWaist=e.profileData.user_detail.waist,e.loaderVar=!1,""!==e.userContact?e.userContactDisabled=!0:e.userContactDisabled=!1):"error"===a.status&&("TOKEN_EXPIRED"!=a.code&&"INVALID_TOKEN"!=a.code&&"AUTH_FAILED"!=a.code||t.$broadcast("tokenExpired"))})},e.getdashboardData(),e.profileEdit=function(){e.editProfile=!0;var t=parseInt(parseInt(e.userHeight)/12),a=parseInt(e.userHeight)%12;e.userHeightFeet=t.toString(),e.userHeightInch=a.toString()},e.cancelEdit=function(){e.editProfile=!1,e.getdashboardData()},e.getHeight=function(){e.heghtInInches=12*parseInt(e.userHeightFeet)+parseInt(e.userHeightInch)},e.updateData=[],e.updateProfile=function(t){if(t){e.bmiCalculator(),e.bmrCalculator(),e.editProfile=!1;var a=JSON.parse(localStorage.getItem("user")).user_id,o={log_user_id:a,userId:a,bloodtype:e.userBloodType,weight:e.userWeight?e.userWeight:"",age:e.userage,gender:e.usergender,height:e.heghtInInches,waist:e.userWaist?e.userWaist:"",companyname:e.userCompanyName?e.userCompanyName:"",insurancecompany:e.userInsuranceCompany?e.userInsuranceCompany:"",email:e.userEmail,mobile:e.userContact};r.updateProfile(o,function(t){if(t.status===!0){e.updateData=t.data,e.userBloodType=e.updateData.blood_group,e.userWeight=e.updateData.weight,e.userHeight=e.updateData.height,e.heghtInInches=e.updateData.height,e.userCompanyName=e.updateData.company,e.usergender=e.updateData.gender,e.userage=e.updateData.age,e.userInsuranceCompany=e.updateData.insurance_company,e.userEmail=e.updateData.email_address,e.userContact=e.updateData.contact_number,e.userWaist=e.updateData.waist,e.bmiCalculator(),e.profileComplete(),e.profileData.user_detail.gender=e.updateData.gender,e.profileData.user_detail.age=e.updateData.age,""!==e.userContact?e.userContactDisabled=!0:e.userContactDisabled=!1;var a=JSON.parse(localStorage.getItem("user"));a.relatives.forEach(function(t,a){t.name===e.username&&(t.gender=e.usergender,t.age=e.userage)}),localStorage.setItem("user",JSON.stringify(a)),e.cartData=l.getCartDetails(),e.cartData.length>0&&(e.cartData.forEach(function(t,a){t.name==e.username&&(e.cartData[a].gender=e.updateData.gender,e.cartData[a].age=e.updateData.age)}),l.setCartDetails(e.cartData))}})}},e.stepsModel="",e.imageUpload=function(t){var a=new FileReader;a.onload=e.imageIsLoaded,a.readAsDataURL(t.files[0])},e.imageIsLoaded=function(t){var a=document.getElementById("uploadDoc").value,o=JSON.parse(localStorage.getItem("user")).user_id,i={name:a.split(/(\\|\/)/g).pop(),image:t,user_id:o,log_user_id:o};r.uploadImage(i,function(t){t.status===!0?(e.stepsModel=t.data.image,e.profileComplete()):s.alert(t.message)})},e.coverImage="",e.imageUploadcover=function(t){var a=new FileReader;a.onload=e.imageIsLoadedcover,a.readAsDataURL(t.files[0])},e.imageIsLoadedcover=function(t){e.$apply(function(){var a=JSON.parse(localStorage.getItem("user")).user_id,o=document.getElementById("uploadcover").value,i={name:o.split(/(\\|\/)/g).pop(),image:t.target.result,user_id:a,log_user_id:a};r.uploadCoverImage(i,function(t){t.status===!0&&(e.coverImage=t.data.image)})})},e.bmiCalculator=function(){if(""!==e.userWeight&&""!==e.heghtInInches){var t=.025*e.heghtInInches*(.025*e.heghtInInches),a=e.userWeight/t;e.bmi=Math.round(100*a)/100}else e.bmi=0},e.bmrCalculator=function(){var t;""!==e.userWeight&&""!==e.heghtInInches?(t="F"==e.usergender?10*e.userWeight+6.25*(2.54*e.heghtInInches)-5*e.userage-161:10*e.userWeight+6.25*(2.54*e.heghtInInches)-5*e.userage+5,e.bmr=Math.round(100*t)/100):e.bmr=0},n(function(){e.bmiCalculator(),e.bmrCalculator(),e.profileComplete()},3e3),e.profileComplete=function(){e.profilecomplete=0,""!==e.userBloodType&&(e.profilecomplete+=10),""!==e.userWeight&&(e.profilecomplete+=10),""!==e.userHeight&&(e.profilecomplete+=10),""!==e.userCompanyName&&(e.profilecomplete+=10),""!==e.userInsuranceCompany&&(e.profilecomplete+=10),e.stepsModel&&(e.profilecomplete+=10),""!==e.userEmail&&(e.profilecomplete+=5),""!==e.userContact&&(e.profilecomplete+=10),0!==e.bmi&&(e.profilecomplete+=5),e.userWaist&&(e.profilecomplete+=10),e.usergender&&(e.profilecomplete+=5),"0"!==e.userage&&(e.profilecomplete+=5)},t.$on("update_mobile",function(){e.userContact=JSON.parse(localStorage.getItem("user")).mobile,""!==e.userContact?e.userContactDisabled=!0:e.userContactDisabled=!1})}function downloadFileController(e,t,a,o,r,i,n,s,l,d,c,u,m,p){e.sendOtp=!0,e.sendDetail=!1,e.displayDetail=!1,e.errorMsgFlag=!1,e.noreport=!1,e.sendOtpNo="",e.sendOtpFunction=function(){return void 0==e.sendOtpNo||""==e.sendOtpNo?(e.sendOtpError=!0,!1):(e.sendOtpError=!1,doPost(l,p.serverUrl+"commonservice/send_mobile_otp",{mobile_number:e.sendOtpNo},"",function(t){t.status===!1?(e.errorMsgFlag=!0,e.errorMsg=t.message):(e.sendOtp=!1,e.sendDetail=!0)}),""!==e.sendOtpNo&&(e.sendDetailNo=e.sendOtpNo),void i(function(){e.errorMsgFlag=!1},4e3))},e.sendDetailFunction=function(){return void 0==e.sendDetailNo||""==e.sendDetailNo?(e.sendDetailError=!0,!1):void doPost(l,p.serverUrl+"commonservice/generate_report_from_mobile",{mobile_number:e.sendDetailNo,otp:e.sendDetailOtp},"",function(t){t.status===!0?(e.reportData=t.data,e.displayDetail=!0,e.sendDetail=!1):"Invalid OTP"==t.message?e.sendDetailError=!0:"Report not found"==t.message&&(e.sendDetail=!1,e.displayDetail=!0,e.noreport=!0)})},e.reportPdf=function(e,t,a,o){var r=p.couponUrl+"webv1/web_api/getReportContent";l({method:"GET",url:r,params:{booking_id:t,report_id:e,customer_id:a},responseType:"blob"}).success(function(e){if(0!==e.size){var t=o,a=document.createElement("a");document.body.appendChild(a),a.style="display: none";var r=new Blob([e],{type:"application/pdf"}),i=window.URL.createObjectURL(r);a.href=i,a.download=t,a.click()}else $window.alert("No report available.")})}}function phelboFeedbackController(e,t,a,o,r,i,n,s,l){var d={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return d.Android()||d.BlackBerry()||d.iOS()||d.Opera()||d.Windows()}};a.meta_robots="noindex, nofollow",e.totalQuestion=5,e.quest={};for(var c=1;c<=e.totalQuestion;c++)1===c?(e.quest["q"+c]=!0,e.current=1):e.quest["q"+c]=!1,e.quest["q"+c+"_select"]="";e.datasuccess=!1,e.stateParms=i,o.search().booking_id&&o.search().mobile?("undefined"!==e.stateParms.mobile&&(e.mobile=e.stateParms.mobile),"undefined"!==e.stateParms.booking_id&&(e.booking_id=e.stateParms.booking_id),"undefined"!==e.stateParms.click_source?e.click_source=e.stateParms.click_source:e.click_source=""):l.location.href="/",e.submit_feedback=function(){if(void 0===e.on_time_blood_collection||""===e.on_time_blood_collection)return e.phelboForm.blood_collection.$dirty=!0,e.phelboForm.blood_collection.$invalid=!0,!1;if(void 0===e.add_on_status||""===e.add_on_status)return e.phelboForm.add_on.$dirty=!0,e.phelboForm.add_on.$invalid=!0,!1;if(void 0===e.sample_collection_experience||""===e.sample_collection_experience)return e.phelboForm.sample_satisfied.$dirty=!0,e.phelboForm.sample_satisfied.$invalid=!0,!1;if(void 0===e.future_discount_status||""===e.future_discount_status)return e.phelboForm.discount_booking.$dirty=!0,e.phelboForm.discount_booking.$invalid=!0,!1;if(void 0===e.rating_info||""===e.rating_info)return e.phelboForm.rating.$dirty=!0,
e.phelboForm.rating.$invalid=!0,!1;var a=e.rating_info;if(d.any())var o="mobile";else var o="web";var i={data:{booking_id:e.booking_id,mobile:e.mobile,source:o,on_time_blood_collection:e.on_time_blood_collection,properly_dressed:e.add_on_status,informed_sealed_kit:e.sample_collection_experience,show_tech_process_video:e.future_discount_status,rating:e.rating_info,click_source:e.click_source}},s=n.couponUrl+"webv1/web_api/phelboFeedback";doPostWithOutToken(r,s,i,"",function(o){o.status?(e.datasuccess=!0,e.on_time_blood_collection="",e.add_on_status="",e.sample_collection_experience="",e.future_discount_status="",e.tollfree_contact_info="",e.rating_info="",t(function(){parseInt(a)<=4?l.location.href="feedback":l.location.href="https://www.google.co.in/search?q=healthians&rlz=1C1CHZL_enIN755IN755&oq=healthians&aqs=chrome..69i57j69i60l5.2969j0j1&sourceid=chrome&ie=UTF-8#lrd=0x390d181ccee9abed:0x52c074ac3118ef36,3"},3e3)):alert(o.message)})},e.clickRadio=function(a,o){e.current=a,5===a?(e.quest["q"+a+"_select"]=o,e.submit_feedback()):(e.quest["q"+a+"_select"]=o,angular.element("#q"+a+"_div").fadeOut(),t(function(){e.quest["q"+a]=!1;var t=parseInt(a)+1;angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t,angular.element("#next_q"+a).css("display","block")},500))},e.showPrevious=function(){var t=parseInt(e.current)-1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t},e.showNext=function(){var t=parseInt(e.current)+1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t}}function generalFeedbackController(e,t,a,o,r,i,n,s,l){a.meta_robots="noindex, nofollow",e.datasuccess=!1,e.stateParms=i,o.search().booking_id&&o.search().mobile&&o.search().click_source?("undefined"!==e.stateParms.mobile&&(e.mobile=e.stateParms.mobile),"undefined"!==e.stateParms.booking_id&&(e.booking_id=e.stateParms.booking_id),"undefined"!==e.stateParms.click_source&&(e.click_source=e.stateParms.click_source)):l.location.href="/",e.totalCategory=4,e.answers=[],e.options={},e.quest={category:!1,rating:!0,bad_feedback:!1,good_feedback:!1};for(var d=1;d<=e.totalCategory;d++)e.quest["good_cat"+d]=!1,e.quest["bad_cat"+d]=!1;e.showRating=function(){e.quest.rating=!0,e.quest.category=!1},e.clickRating=function(){l.scrollTo(0,0),e.quest.rating=!1,e.quest.category=!0,e.rating_info<4?e.rating="bad":e.rating="good"},e.clickRadio=function(t,a){if(e.options[a]){var o=_.indexOf(e.answers,t);o<0&&e.answers.push(t)}else{var o=_.indexOf(e.answers,t);o>-1&&e.answers.splice(o,1)}},e.clickCategoryDiv=function(t){"Order Booking Process"===t?e.category="Order Booking Process":"Sample Collection"===t?e.category="Sample Collection":"Test Reports"===t?e.category="Test Reports":e.category="Doctor Consultation",e.clickCategory()},e.clickCategory=function(){l.scrollTo(0,0),t(function(){e.quest.category=!1},400),"Order Booking Process"===e.category?e.cat="cat1":"Sample Collection"===e.category?e.cat="cat2":"Test Reports"===e.category?e.cat="cat3":e.cat="cat4",$.each(e.options,function(t,a){e.options[t]=!1}),t(function(){angular.element("#"+e.rating+"_"+e.cat).fadeIn(),e.quest[e.rating+"_"+e.cat]=!0},500)},e.clickSubmit=function(){l.scrollTo(0,0),angular.element("#"+e.rating+"_"+e.cat).fadeOut(),t(function(){e.quest[e.rating+"_"+e.cat]=!1,angular.element("#next_"+e.rating+"_"+e.cat).css("display","block"),"bad"===e.rating?(angular.element("#bad_feedback").fadeIn(),e.quest.bad_feedback=!0):(angular.element("#good_feedback").fadeIn(),e.quest.good_feedback=!0)},500)},e.showCategory=function(){e.answers=[],angular.element("#"+e.rating+"_"+e.cat).fadeOut(),t(function(){e.quest[e.rating+"_"+e.cat]=!1,e.quest.category=!0},500)},e.showPrevious=function(){"bad"===e.rating?(angular.element("#bad_feedback").fadeOut(),t(function(){e.quest.bad_feedback=!1,e.quest[e.rating+"_"+e.cat]=!0,angular.element("#"+e.rating+"_"+e.cat).fadeIn()},500)):(angular.element("#good_feedback").fadeOut(),t(function(){e.quest.good_feedback=!1,e.quest[e.rating+"_"+e.cat]=!0,angular.element("#"+e.rating+"_"+e.cat).fadeIn()},500))},e.submit_feedback=function(){var a={data:{booking_id:e.booking_id,mobile:e.mobile,source:"web",click_source:e.click_source,rating:e.rating_info,category:e.category,feedback_answers:e.answers.join()}};"bad"===e.rating?(a.data.message=e.improvement_msg,e.quest.bad_feedback=!1):(a.data.message=e.feedback_msg,e.quest.good_feedback=!1);var o=n.couponUrl+"webv1/web_api/generalFeedback";doPostWithOutToken(r,o,a,"",function(a){l.scrollTo(0,0),a.status?(e.datasuccess=!0,"bad"===e.rating?e.thankyou_improved=!0:(e.thankyou_good=!0,t(function(){5==e.rating_info&&(l.location.href="https://www.google.co.in/search?q=healthians&rlz=1C1CHZL_enIN755IN755&oq=healthians&aqs=chrome..69i57j69i60l5.2969j0j1&sourceid=chrome&ie=UTF-8#lrd=0x390d181ccee9abed:0x52c074ac3118ef36,3")},3e3))):alert(a.message)})}}function csatFeedbackController(e,t,a,o,r,i,n,s,l){var d={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return d.Android()||d.BlackBerry()||d.iOS()||d.Opera()||d.Windows()}};a.meta_robots="noindex, nofollow",e.stateParms=i,"undefined"!==e.stateParms.csid?e.csid=e.stateParms.csid:l.location.href="/",e.feedback_success=!1,e.clickRating=function(){e.rating_info<4?e.rating="bad":e.rating="good"},e.getReasons=function(){var t=n.couponUrl+"webv1/web_api/getCSATReasons";doGet(r,t,function(t){t.status&&(e.reasons_list=t.data)})},e.getReasons(),e.save_survey=function(){if(void 0===e.rating_info||""===e.rating_info)return e.addCSATForm.rating.$dirty=!0,e.addCSATForm.rating.$invalid=!0,!1;if(void 0===e.reason||""===e.reason)return e.addCSATForm.reason.$dirty=!0,e.addCSATForm.reason.$invalid=!0,!1;e.feedback_success=!0;e.rating_info;if(d.any())var a="mobile";else var a="web";var o={data:{ucid:e.csid,source:a,cs_reason:e.reason,remarks:e.remarks,rating:e.rating_info}},i=n.couponUrl+"webv1/web_api/saveCSAT";doPostWithOutToken(r,i,o,"",function(a){a.status?(e.feedback_success=!0,e.remarks="",e.reason="",e.rating_info="",e.addCSATForm.rating.$dirty=!1,e.addCSATForm.reason.$dirty=!1,e.addCSATForm.remarks.$dirty=!1,t(function(){e.feedback_success=!1},5e3)):(e.feedback_success=!1,alert(a.message))})}}function finalCheckoutController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b,h){function y(e,t){var a,o,r=e;void 0!=n.counterVal&&clearInterval(n.counterVal),n.counterVal=setInterval(function(){a=parseInt(r/60,10),o=parseInt(r%60,10),0===a&&0===o?(clearInterval(n.counterVal),localStorage.setItem("time_slot",""),t.hide(),window.location.href="/pick-time"):(a=a<10?"0"+a:a,o=o<10?"0"+o:o,t.text(a+":"+o)),--r<0&&(r=e)},1e3)}var k={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return k.Android()||k.BlackBerry()||k.iOS()||k.Opera()||k.Windows()}};e.$on("$destroy",function(){h.cancel(F)}),k.any()?e.device="mobile":e.device="web",e.pickTabActive=!0,e.paymentTabActive=!1,e.bookingTimeTickerExpire=!1,e.sublocalityDropDownSelected=!1,e.collectiontimeflag=!1,e.chosenPlace="",e.locality_id="",e.hardcopyPrice=0,e.hardCopy=!1,n.hard_copyFlag=!1,e.invalidCoupon=!1,e.coupondata={},e.coupondata.applied=!1,e.coupondata.hard_copy=!1,e.couponShow=!1,e.couponApplied=!1,n.couponCode="",n.couponAmount="",e.allow_with_wallet=!1,e.discountamount=0,e.onlineDiscountApplicable=!1,e.onlineDiscountActive=!1,e.onlineDiscountApplied=!1,e.onlineDiscount=0,e.payradio="paytm";var v=u.paymentUrl;e.payuAction=p.trustAsResourceUrl(v+"payupayment"),e.mobikwikAction=p.trustAsResourceUrl(v+"mobikwikpayment"),e.payzappAction=p.trustAsResourceUrl(v+"payzapppayment"),e.paytmAction=p.trustAsResourceUrl(v+"paytmpayment"),e.useAddressPresent=!0,e.existingaddress="",e.modifyAddressFlag={},e.defaultExistingAddressObject={};var S=localStorage.getItem("token");if(e.showBookingLoader=!1,e.loaderVarAddress=!0,e.popularPackageList=!1,e.firstPageList=[],e.orderList=!1,e.userId=null,e.selection=[],e.addToCartModal=!1,e.btnshow=!1,e.rel=!0,e.addNewAddress=!1,e.newlocation=!1,e.hideSuggestedLocation=!1,e.relative=!1,e.guestUser=!1,e.alertDiv=!1,e.samepkg=!1,e.loggedin=!1,e.addfield=!0,e.loc_id="",e.customSearchVal="",e.suggestPackageList=[],e.localityList=[],e.filters={},e.filters.suggested_test=[],e.searchValue=[],n.selectData=[],e.cityList=[],e.temp=[],e.member=[],e.noTimeSlot=!1,e.subtotal=0,e.displayData={},e.habitListCheckbox={},e.displayList=!1,n.count=0,e.customerIndex=void 0,e.loading=!0,e.arrayList=[],e.accordionList=[],e.userDetail={},e.booking_id="",e.userDetail.address={},e.tempUser=[],e.addNewPatient=!1,e.hideContinue=!0,e.postal_code="",e.detailCustomer=!0,e.ignoreGeoCodeLocality=!1,e.distanceError=!1,e.tempsublocality="",e.refresh_slider=!1,e.isHardCopyDisabled=!1,e.isCouponDisabled=!1,e.isCouponRemoveDisabled=!1,e.ecashcheck=!1,e.ecash_amount="",e.eCashApplied=!1,e.disabledHcash=!1,e.getAddressesByUserId=function(t){var a=JSON.parse(localStorage.getItem("cityID"))[0].city_name,o=u.serverUrl+"commonservice/getAddressesByUserId",r={user_id:t,log_user_id:t,city_name:a};doPost(l,o,r,S,function(t){t.data?(e.noOfAdd=t.data.length,e.addressList=[],e.noOfAdd>0?(e.useAddressPresent=!0,e.loaderVarAddress=!1,e.addressList=t.data,e.addressList.forEach(function(t,a){1===parseInt(t.default_status)&&(e.existingaddress=parseInt(t.address_id),e.defaultExistingAddressObject=t,e.selectListedAdd(t))}),_.isEmpty(e.defaultExistingAddressObject)&&(e.defaultExistingAddressObject=e.addressList[0],e.addressList[0].default_status=1,e.selectListedAdd(e.defaultExistingAddressObject))):(e.useAddressPresent=!1,e.loaderVarAddress=!1,e.addressList=[])):"error"===t.status&&("TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired"))})},e.donation=!0,e.coupon_notice_div=!1,e.donationFees=0,e.getDonationInfo=function(){var t=u.couponUrl+"webv1/web_api/getDonationInfo";doGet(l,t,function(t){"success"===t.status&&(e.donation_details=t.data,"yes"==e.donation_details.apply_donation_amount?(e.donationcheck=!0,e.donationFees=e.donation_details.donation_amount,e.donationInfo=e.donation_details.donation_info):(e.donationcheck=!1,e.donationFees=0),e.online_discount_config=e.donation_details.online_discount,"on"==e.online_discount_config.active&&e.online_discount_config.source.includes("web")?(e.onlineDiscountActive=!0,e.online_discount_amount=parseInt(e.online_discount_config.amount),e.online_discount_mimimum_amount=e.online_discount_config.minimum_booking_amount):e.onlineDiscountActive=!1,e.coupon_notice=JSON.parse(e.donation_details.coupon_discount_addon_config),"off"!==e.coupon_notice.status&&(e.coupon_notice_msg=e.coupon_notice.msg,e.coupon_notice_div=!0))})},e.getDonationInfo(),e.checkInactivePackage=function(t){var a=e.userDetail.user_id;if(t.length>0){var o=u.serverUrl+"commonservice/checkInactiveProduct",r={source:"web",data_value:t,log_user_id:a};doPost(l,o,r,S,function(e){e.status?"error"===e.status&&("TOKEN_EXPIRED"!=e.code&&"INVALID_TOKEN"!=e.code&&"AUTH_FAILED"!=e.code||n.$broadcast("tokenExpired")):(alert(e.message),g.go("cart"))})}},e.fetchCart=function(t){var a=[];e.healthiansamount=0;var o=u.couponUrl+"customer/account/fetch_cart_v2",r={data:{user_id:t,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id,source:"web"}};doPost(l,o,r,S,function(t){t.status?"error"===t.status?"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired"):(e.cartData=t.data,e.cartData.allow_to_proceed||(b.alert(e.cartData.allow_to_proceed_message),g.go("user_selection_cart")),e.cartTotalAmount=isNaN(e.cartData.total_price)?0:parseInt(e.cartData.total_price),e.discountamount=e.cartTotalAmount,n.totalCartTest=0,e.cartData.customer_detail.length>0&&e.cartData.customer_detail.forEach(function(t,o){n.totalCartTest+=t.deals.length,t.deals.forEach(function(t,o){e.healthiansamount+=parseInt(t.actual_price),_.contains(a,t.id)||a.push(t.id)})})):g.go("orderbook")})},"true"==localStorage.getItem("isLogin")){var w=JSON.parse(localStorage.getItem("user"));if(e.userDetail.user_id=w.user_id,e.userDetail.name=w.name,e.userDetail.email=w.email,e.userDetail.mobile=w.mobile,e.loggedin=!0,null!==localStorage.getItem("coupondata")){var P=JSON.parse(localStorage.getItem("coupondata")).hard_copy;P&&(e.hardCopy=P,e.coupondata={},e.coupondata.hard_copy=!0,localStorage.setItem("coupondata",JSON.stringify(e.coupondata)))}else e.coupondata={},e.coupondata.applied=!1,e.coupondata.hard_copy=!1,e.couponApplied=!1,localStorage.setItem("coupondata",JSON.stringify(e.coupondata));e.getAddressesByUserId(w.user_id),e.fetchCart(w.user_id)}e.frontPageSearchInt=function(){e.tags=searchDetail.getSearchPackages(),e.tags.forEach(function(t,a){e.searchValue.push({text:t.text,id:t.id})}),e.createSearchRequest()},e.addNewLocation=function(t){var a={locality_name:t,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id};c.addNewLocality(a,function(t){"SUGGESTED_LOCALITY_ADDED"==t.message&&(e.newlocation=!0)})},e.gettimer=function(e){var t,a=d.defer();return c.getFreezDateBySlotId(e,function(e){t=e.data[0],a.resolve(t)}),a.promise},e.counter=function(t){e.gettimer(t),e.gettimer(t).then(function(e){var t=moment(e.expiryDate,"YYYY-MM-DD HH:mm:ss").diff(moment(e.nowDate,"YYYY-MM-DD HH:mm:ss"));if(t>0){var a=moment.utc(t),o=a.format("mm"),r=a.format("ss"),i=60*o+parseInt(r);display=$("#counter"),y(i,display)}})},e.freezeSlot=function(t){var a=d.defer(),o=e.generateUserId(t);return a.resolve(o),a.promise},e.setSlotCalender=function(e){var t=new Date;t.getHours(),t.getMinutes();$("#collectiondate").datepicker({startDate:"+d",endDate:"+"+parseInt(e)+"d",showTodayButton:!1,showClear:!1})};var C=u.couponUrl+"webv1/web_api/getSlotDays";doGet(l,C,function(t){t&&(t.data&&t.data.name>0?e.setSlotCalender(t.data.name):e.setSlotCalender(3))}),e.getTimeSlots=function(t){if(""===e.locality_id)return b.alert("Please select address"),e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1),!1;e.showLoader=!0;var a=d.defer(),o=JSON.parse(localStorage.getItem("user")).user_id;return c.getTimeSlots(e.locality_id,t,JSON.parse(localStorage.getItem("amountfinal")),o,function(t){"success"==t.status?(null==t.data?(m.eventTrack('Got "No Time Slot Avaliable" message',{category:"Timeslot Selection"}),e.noTimeSlot=!0):(e.noTimeSlot=!1,e.slots=t.data),e.showLoader=!1,a.resolve(e.slots)):("error"===t.status&&("TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired")),e.showLoader=!1)}),a.promise},e.selectListedAdd=function(t){e.slots=[],e.locality_id="",e.sampledate=void 0,e.sampletime=void 0,e.addAddressForm&&(void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1)),e.existingaddress=parseInt(t.address_id);var a=t.address.split(",");e.userDetail.address.address_id=t.address_id,e.userDetail.address.address=t.address,e.userDetail.address.lat=t.lat,e.userDetail.address.long=t.long,e.userDetail.address.state_id=t.state_id,e.userDetail.address.state_name=t.state_name,e.userDetail.address.city=t.city,e.userDetail.address.locality_id=t.locality_id,e.userDetail.address.pincode=t.pincode,e.locality_id=t.locality_id,localStorage.setItem("userDetail",JSON.stringify(e.userDetail)),localStorage.setItem("houseno",a[0]),localStorage.setItem("landmark",a[1]),localStorage.setItem("postal_code",t.pincode),localStorage.setItem("address",t.address)},e.modifyExistingAddress=function(t){e.modifyAddressFlag[t]=!e.modifyAddressFlag[t]},e.addNewAddress=function(){e.userDetail.address={},e.useAddressPresent=!1,e.loaderVarAddress=!1,e.slots=[],e.locality_id="",e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1),e.resetSubLocality()},e.viewExistingAddress=function(){e.useAddressPresent=!0,e.loaderVarAddress=!1,e.slots=[],e.locality_id="",e.chosenPlace="",e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1),e.addressList.forEach(function(t,a){1==t.default_status&&(e.existingaddress=parseInt(t.address_id),e.defaultExistingAddressObject=t,e.selectListedAdd(t))}),_.isEmpty(e.defaultExistingAddressObject)?(e.defaultExistingAddressObject=e.addressList[0],e.addressList[0].default_status=1,e.selectListedAdd(e.defaultExistingAddressObject)):e.selectListedAdd(e.defaultExistingAddressObject)},e.setDefaultAddress=function(t){e.useAddressPresent=!1,e.loaderVarAddress=!0;var a=parseInt(t.address_id),o=JSON.parse(localStorage.getItem("user")),r=o.user_id,i=u.serverUrl+"commonservice/markAddressToDefault",n={user_id:r,address_id:a,log_user_id:r};angular.element(".slider").slick("destroy"),angular.element(".slick-slide").remove(),doPost(l,i,n,S,function(a){a.status?(e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message='"'+t.address+'" marked as your default address.'):(e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message=a.message)})},e.address_delete_confirmation=function(t){e.deleteaddress=t,e.address_delete_visible=!0},e.deleteUserAddress=function(t){e.useAddressPresent=!1,e.loaderVarAddress=!0;var a=parseInt(t.address_id),o=JSON.parse(localStorage.getItem("user")),r=o.user_id,i=u.serverUrl+"commonservice/deleteUserAddress",n={user_id:r,address_id:a,log_user_id:r};angular.element(".slider").slick("destroy"),angular.element(".slick-slide").remove(),doPost(l,i,n,S,function(t){t.status?(e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message="Address deleted successfully."):(e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message=t.message)})};var F="";if(e.clock=function(t){e.bookingTimeTickerDisplay=!0,F=h(function(){var a=(new Date).getTime(),o=parseInt(t)-a,r=(Math.floor(o/864e5),Math.floor(o%864e5/36e5),Math.floor(o%36e5/6e4)),i=Math.floor(o%6e4/1e3);e.timeTicker=r+"m "+i+"s ",document.getElementById("bookingtimeticker")&&(document.getElementById("bookingtimeticker").innerHTML=e.timeTicker),o<0?(e.timeTicker="0m 0s",document.getElementById("bookingtimeticker")&&(document.getElementById("bookingtimeticker").innerHTML=e.timeTicker),e.bookingTimeTickerExpire=!0,h.cancel(F)):e.bookingTimeTickerDisplay=!0},1e3)},e.stopClock=function(){h.cancel(F)},e.bookSlot=function(){e.ecashcheck=!1,e.ecash_amount="",e.isCouponDisabled=!1,e.isHardCopyDisabled=!1,e.isCouponRemoveDisabled=!1,e.showEcashdiv=!1,e.eCashApplied=!1,e.isECashDisabled=!1,e.onConfirmECash=!1,e.ecashAmount="",e.disabledHcash=!1,document.getElementById("bookingtimeticker").innerHTML="",e.stopClock(),e.slotFreezeError=!1;var t=JSON.parse(localStorage.getItem("user")).user_id;if(e.addAddressFormSubmitted=!1,e.loaderVar=!0,e.distanceError=!1,e.useAddressPresent){if(void 0===e.existingaddress)return e.addAddressForm.useraddress.$dirty=!0,e.addAddressForm.useraddress.$invalid=!0,e.addAddressForm.useraddress.$error.required=!0,e.loaderVar=!1,!1}else{if(void 0===e.chosenPlace||""===e.chosenPlace)return e.addAddressForm.pacinput.$dirty=!0,e.addAddressForm.pacinput.$invalid=!0,e.addAddressForm.pacinput.$error.required=!0,e.loaderVar=!1,focus("pacinput"),!1;if(void 0===e.houseno||""===e.houseno)return e.addAddressForm.houseno.$dirty=!0,e.addAddressForm.houseno.$invalid=!0,e.addAddressForm.houseno.$error.required=!0,e.loaderVar=!1,m.eventTrack("Validation Faliure on Address Form Submit",{category:"Confirm Address",label:"Customer House No."}),focus("houseno"),!1;if(void 0===e.landmark||""===e.landmark)return e.addAddressForm.landmark.$dirty=!0,e.addAddressForm.landmark.$invalid=!0,e.addAddressForm.landmark.$error.required=!0,e.loaderVar=!1,m.eventTrack("Validation Faliure on Address Form Submit",{category:"Confirm Address",label:"Customer Landmark"}),focus("landmark"),!1;if(!(void 0!==e.postal_code&&""!==e.postal_code||void 0!==e.postal_code_new&&""!==e.postal_code_new))return e.addAddressForm.postal_code.$dirty=!0,e.addAddressForm.postal_code.$invalid=!0,e.addAddressForm.postal_code.$error.required=!0,e.loaderVar=!1,m.eventTrack("Validation Faliure on Address Form Submit",{category:"Confirm Address",label:"Customer Pincode"}),focus("pincode"),!1}if(void 0===e.sampledate||""===e.sampledate)return e.addAddressForm.collectiondate.$dirty=!0,e.addAddressForm.collectiondate.$invalid=!0,e.addAddressForm.collectiondate.$error.required=!0,e.loaderVar=!1,m.eventTrack("Validation Faliure on Address Form Submit",{category:"Confirm Address",label:"Sample Collection Date"}),focus("sampledate"),!1;if(void 0===e.sampletime||""===e.sampletime)return e.addAddressForm.collectiontime.$dirty=!0,e.addAddressForm.collectiontime.$invalid=!0,e.addAddressForm.collectiontime.$error.required=!0,e.loaderVar=!1,m.eventTrack("Validation Faliure on Address Form Submit",{category:"Confirm Address",label:"Sample Collection Time"}),focus("sampletime"),!1;if(!e.useAddressPresent){e.userDetail.address.lat=e.sub_lat,e.userDetail.address.long=e.sub_long,void 0===e.postal_code||""===e.postal_code?void 0===e.postal_code_new&&""===e.postal_code_new||(e.userDetail.address.pincode=e.postal_code_new,localStorage.setItem("postal_code",e.postal_code_new)):(e.userDetail.address.pincode=e.postal_code,localStorage.setItem("postal_code",e.postal_code)),void 0!==e.defaultaddress&&(e.userDetail.address.defaultaddress=e.defaultaddress),0===e.noOfAdd&&(e.userDetail.address.defaultaddress=!0),e.userDetail.address.houseno=e.houseno,e.userDetail.address.landmark=e.landmark,e.userDetail.address.locality_id=e.locality_id,e.city=JSON.parse(localStorage.getItem("cityID"))[0];var a=JSON.parse(localStorage.getItem("user")),o=a.user_id,r=u.serverUrl+"commonservice/getStateByCityId";doPost(l,r,{city_id:e.city.city_id,log_user_id:o},S,function(t){e.userDetail.address.state_id=t.data[0].state_id,e.userDetail.address.state_name=t.data[0].state_name,e.userDetail.address.country_id=t.data[0].country_id,e.userDetail.address.country_name=t.data[0].country_name,e.userDetail.address.city=e.city.city_name,e.userDetail.address.city_id=e.city.city_id,e.userDetail.address.address_id=-1,localStorage.setItem("userDetail",JSON.stringify(e.userDetail))}),localStorage.setItem("houseno",e.houseno),localStorage.setItem("landmark",e.landmark),localStorage.setItem("address",e.chosenPlace)}e.hideContinue=!1,"undefined"!=typeof b.fbq&&b.fbq("track","Continue to checkout from checkout page",{slot_id:e.sampletime.slot_id});var s=u.serverUrl+"commonservice/freezeSlotBySlotId";doPost(l,s,{slot_id:e.sampletime.slot_id,log_user_id:t,source:"web"},S,function(t){if(1==t.status){localStorage.setItem("time_slot",JSON.stringify(e.sampletime)),e.time_slot=JSON.parse(localStorage.getItem("time_slot")),localStorage.setItem("sample_date",e.sampledate);var a=15;if(e.bookingTimeTickerDisplay=!0,e.bookingTimeTickerExpire=!1,document.getElementById("slotExpireMsg")){document.getElementById("slotExpireMsg").innerHTML="";var o=e.sampletime.start_time+" - "+e.sampletime.end_time;document.getElementById("slotExpireMsg").innerHTML="Your selected time slot <b>"+o+"</b> will expire in 15 minutes.<br>"}var r=new Date(Date.now()+60*a*1e3).getTime();e.clock(r),e.calculateCovenienceFees(),e.loaderVar=!1,e.pickTabActive=!1,e.paymentTabActive=!0,e.cartData.restrict_coupon&&(e.isCouponDisabled=!0,e.isCouponRemoveDisabled=!0),e.cartData.restrict_hcash&&(e.disabledHcash=!0,e.restrict_hcash_message=e.cartData.restrict_hcash_message),e.checkPaymentMode()}else"error"===t.status&&("TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired")),"Slot already freezed."==t.message&&(e.slotFreezeError=!0,e.slotFreezeErrorMsg=t.message,e.getTimeSlots(e.sampledate),i(function(){e.slotFreezeError=!1},5e3))})},e.resetSubLocality=function(){e.sublocalityDropDownSelected=!1,e.chosenPlace="",e.locality_id="",e.slots=[],e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1),focus("pacinput")},e.clearSubLocality=function(){e.chosenPlace="",angular.element("#pacinput").val(""),e.slots=[],e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1),e.addAddressForm.pacinput.$dirty=!1},e.editPickTab=function(){e.pickTabActive=!0,i(function(){angular.element("#collapse1").addClass("panel-collapse collapse in")},100),angular.element("#collapse1").addClass("panel-collapse collapse in"),e.paymentTabActive=!1,angular.element(".slider").slick("refresh"),e.totalAmount()},e.getHardcopyPrice=function(){c.getHardcopyPrice(function(t){1==t.status&&(e.hardcopyPrice=t.data.price)})},e.getHardcopyPrice(),e.hardCopyFunc=function(t){e.getTotalPackageWithCouponAmount();e.coupondata.hard_copy=e.hardCopy,1==e.hardCopy?(m.eventTrack("Checked Hard Copy",{category:"Order Summary"}),n.hard_copyFlag=!0,e.calculateCovenienceFees()):(n.hard_copyFlag=!1,e.calculateCovenienceFees()),localStorage.setItem("coupondata",JSON.stringify(e.coupondata))},e.verifyCoupon=function(t){if(e.invalidCoupon=!1,e.isDisabled=!0,void 0!==t&&""!==t){var a=[],o=[],r=[];e.cartData.customer_detail.length>0&&e.cartData.customer_detail.forEach(function(e,t){e.deals.forEach(function(e,t){"package"==e.ptype&&(_.contains(a,e.id)||a.push(e.deal_type_id)),"profile"==e.ptype&&(_.contains(o,e.id)||o.push(e.deal_type_id)),"parameter"==e.ptype&&(_.contains(r,e.id)||r.push(e.deal_type_id))})});var i={};a.length>0&&(i.package=a.join(",")),o.length>0&&(i.profile=o.join(",")),r.length>0&&(i.parameter=r.join(","));var s=JSON.parse(localStorage.getItem("cityList")),d="";s.forEach(function(t,a){t.city_name===e.userDetail.address.city&&(d=t.city_id)});var c=e.getTotalPackageAmount(),p=JSON.parse(localStorage.getItem("user")).user_id,g={data:{coupon_code:t,customer_id:e.userDetail.user_id,city_id:d,source:"web",platform:"web",billing_amount:c,no_of_customer:e.cartData.customer_detail.length,package:i.package?i.package:"",profile:i.profile?i.profile:"",parameter:i.parameter?i.parameter:"",is_online:"cash"==e.payradio?0:1,payment_gateway:e.payradio,customer_mobile:e.userDetail.mobile,customer_email:e.userDetail.email,apply_discount:0,sample_date:e.sampledate,user_id:p}};l({method:"POST",url:u.couponUrl+"Coupon_engine_api/CouponApply",data:g,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(a){a.status&&a.data.hasOwnProperty("discount")?(n.couponCode=t,n.couponAmount=a.data.discount,e.invalidCoupon=!1,e.onConfirm=!0,e.couponAmount=a.data.discount,e.coupondata.percentage=e.couponAmount/c*100,e.coupondata.coupon=t,e.coupondata.discount=a.data.discount,e.coupondata.applied=!0,e.couponApplied=!0,1==a.data.allow_with_wallet?e.allow_with_wallet=!0:e.allow_with_wallet=!1,localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),m.eventTrack("Successfully Applied Coupon",{category:"Make Payment",label:t,value:a.data.discount}),e.calculateCovenienceFees()):(e.couponApplied=!1,e.coupondata.applied=!1,e.invalidCoupon=!0,e.couponErrorMsg=a.message,e.coupon="",e.isDisabled=!1,m.eventTrack("Failed to Apply Coupon ",{category:"Make Payment",label:t}))}).error(function(){})}else e.invalidCoupon=!0,e.isDisabled=!1,e.couponErrorMsg="Please enter coupon"},e.removeCoupon=function(){e.coupondata={},e.coupondata.applied=!1,e.coupondata.hard_copy=e.hardCopy,e.couponShow=!1,e.couponApplied=!1,e.onConfirm=!1,n.couponCode="",n.couponAmount="",e.coupon="",e.isDisabled=!1,e.allow_with_wallet=!1,localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),e.calculateCovenienceFees()},e.calculateCovenienceFees=function(){var t=JSON.parse(localStorage.getItem("user")).user_id,a=u.couponUrl+"Common_api/getConvenienceFee",o=e.getTotalPackageWithHardCopyCouponAmount(),r={data:{city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id,is_b2c:"1",is_subscription:"0",slot_id:e.sampletime.slot_id,source:"web",sample_available:"0",orderAmount:o,user_id:t}};doPostWithOutToken(l,a,r,"",function(t){t.status&&(t.data.convenience_fee?(e.convenience_fee=parseInt(t.data.convenience_fee),e.convenience_fee&&e.calculatePrice()):(e.convenience_fee=0,0==e.convenience_fee&&e.calculatePrice()))})},e.makePayment=function(t){if(e.showBookingLoader=!0,localStorage.setItem("type_of_payment","cash"==e.payradio?"Cash on delivery":"Online"),m.eventTrack("Order Booked Successfully",{category:"Make Payment",label:"cash"==e.payradio?"Cash on delivery":"Online",value:t}),e.loaderVar=!0,"cash"==e.payradio){var a=u.serverUrl+"commonservice/update_payment_type",o={booking_id:e.booking_id,payment_type:"cash"==e.payradio?"Cash on delivery":"Online",term_condition:!0,user_id:e.userDetail.user_id,log_user_id:e.userDetail.user_id};doPost(l,a,o,"",function(t){e.loaderVar=!1,t.status&&g.go("payment-summary",{action:"Get",booking_id:e.booking_id,mobile:e.userDetail.mobile,user_id:e.userDetail.user_id})})}else if("payu"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#payuForm");r.find("[name=booking_id]").val(e.booking_id),r.find("[name=txnAmount]").val(t-e.onlineDiscount),r.find("[name=custName]").val(e.userDetail.name),r.find("[name=custMobile]").val(e.userDetail.mobile),r.find("[name=custEmail]").val(e.userDetail.email),r.find("[name=stm_id]").val(e.time_slot.slot_id),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer"),r.submit()}else if("paytm"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#paytmForm");r.find("[name=booking_id]").val(e.booking_id),r.find("[name=txnAmount]").val(t-e.onlineDiscount),r.find("[name=custName]").val(e.userDetail.name),r.find("[name=custMobile]").val(e.userDetail.mobile),r.find("[name=custEmail]").val(e.userDetail.email),r.find("[name=user_id]").val(e.userDetail.user_id),r.find("[name=stm_id]").val(e.time_slot.slot_id),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer"),r.submit()}else if("mobikwik"==e.payradio){
localStorage.setItem("makepayment_to_summary","true");var r=$("#mobikwikForm");r.find("[name=booking_id]").val(e.booking_id),r.find("[name=txnAmount]").val(t-e.onlineDiscount),r.find("[name=custName]").val(e.userDetail.name),r.find("[name=custMobile]").val(e.userDetail.mobile),r.find("[name=custEmail]").val(e.userDetail.email),r.find("[name=stm_id]").val(e.time_slot.slot_id),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer"),r.submit()}else if("payzapp"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#payzappForm");r.find("[name=booking_id]").val(e.booking_id),r.find("[name=txnAmount]").val(t-e.onlineDiscount),r.find("[name=custName]").val(e.userDetail.name),r.find("[name=custMobile]").val(e.userDetail.mobile),r.find("[name=custEmail]").val(e.userDetail.email),r.find("[name=stm_id]").val(e.time_slot.slot_id),r.submit()}e.hideContinue=!1},e.createOrderId=function(){e.discountamount>0&&m.eventTrack("Make Payment Clicks on Complete Order",{category:"Make Payment",label:e.payradio,value:e.discountamount}),e.showBookingLoader=!0;var t=e.userDetail.user_id,a=[];if(!e.useAddressPresent){e.userDetail.address.sublocality=localStorage.getItem("address");var o=e.houseno+","+e.landmark+","+localStorage.getItem("address");e.userDetail.address.address=o,localStorage.setItem("userDetail",JSON.stringify(e.userDetail))}var r=[],i=u.couponUrl+"customer/account/fetch_cart_v2",s={data:{user_id:t,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id,source:"web"}};doPost(l,i,s,S,function(o){if(o.status){if("error"===o.status)"TOKEN_EXPIRED"!=o.code&&"INVALID_TOKEN"!=o.code&&"AUTH_FAILED"!=o.code||n.$broadcast("tokenExpired");else if(e.cartData=o.data,e.cartData.customer_detail.length>0){if(e.cartData.customer_detail.forEach(function(e,t){var o={};o.user_id=e.customer_id,o.package=[],e.deals.forEach(function(e,t){var a=e.id.split(",");r.push.apply(r,a),o.package.push({tcategory_id:e.id,healthians_price:e.healthians_price,actaul_price:e.actual_price})}),a.push(o)}),"undefined"!=typeof b.fbq){var i={value:e.discountamount,content_ids:_.uniq(r),content_type:"product",currency:"INR",content_category:"Final Checkout"};e.discountamount>0&&(i.payment_type=e.payradio),b.fbq("track","InitiateCheckout",i)}if(1==n.hard_copyFlag)var s="yes";else var s="no";"true"==localStorage.getItem("isLogin")&&(t=JSON.parse(localStorage.getItem("user")).user_id);var d=u.serverUrl+"commonservice/bookOrder",c={billing_user_id:t,log_user_id:t,hard_copy:s,address:e.userDetail.address,deal_price:e.discountamount,order_detail:a,time_slot:e.sampletime,coupon:n.couponCode,discount:n.couponAmount,email:e.userDetail.email,webbooking_type:"normal_booking",booked_from:e.device,convenience_fees:e.convenience_fee,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id,cart_id:e.cartData.cart_id.id,payment_mode:e.payradio};e.donation?c.donation_amount=e.donationFees:c.donation_amount=0,e.eCashApplied?c.eCashAmount=e.ecashAmount:c.eCashAmount=0,e.onlineDiscountApplied&&(c.onlineDiscountApplied="yes"),localStorage.setItem("total_amount",e.discountamount),doPost(l,d,c,S,function(a){h.cancel(F),1==a.status?(e.booking_id=a.data.booking_id,"undefined"!=typeof b.fbq&&b.fbq("track","Booking : Booking created Successfully",{booking_id:e.booking_id}),localStorage.setItem("booking_id",a.data.booking_id),0==a.data.order_price&&2==a.data.delivery_status?(localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer"),e.hideContinue=!1,g.go("payment-summary",{action:"Get",booking_id:a.data.booking_id,mobile:e.userDetail.mobile,user_id:t})):e.makePayment(a.data.order_price)):("error"===a.status?"TOKEN_EXPIRED"!=a.code&&"INVALID_TOKEN"!=a.code&&"AUTH_FAILED"!=a.code||n.$broadcast("tokenExpired"):"undefined"==typeof a.slot_error?alert(a.message):(e.bookingCreationMsg=!0,e.bookingCreationErrorMessage=a.message,e.editPickTab(),e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1)),e.showBookingLoader=!1)})}}else g.go("orderbook")})},e.getLocalityUsingLatLong=function(){n.$broadcast("cityDropdownRefresh"),e.sampledate=void 0,e.sampletime=void 0,void 0!==e.addAddressForm.collectiondate&&(e.addAddressForm.collectiondate.$dirty=!1),void 0!==e.addAddressForm.collectiontime&&(e.addAddressForm.collectiontime.$dirty=!1);var t=u.serverUrl+"commonservice/getnearestlocality",a={lat:e.sub_lat,long:e.sub_long,log_user_id:JSON.parse(localStorage.getItem("user")).user_id};doPost(l,t,a,S,function(t){1==t.status?e.locality_id=t.data.locality_id:"error"===t.status?"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired"):(e.distanceError=!0,e.sublocalityDropDownSelected=!1,e.distanceErrorMsg=t.message,e.chosenPlace="",e.addAddressForm.pacinput.$dirty=!1,e.locality_id="")})},e.editbooking=function(){t.sendData(e.customerDetails)},e.myFunction=function(t){document.getElementById("pacinput").value=t,document.getElementById("pacinput").focus(),e.chosenPlace=t},e.breakpoints=[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}],e.showEcashdiv=!1,e.walletAmount=0,e.getWalletCashInfo=function(){var t=u.couponUrl+"wallet_api/getuserWebWallet",a=JSON.parse(localStorage.getItem("user")).user_id,o={data:{source:"web",user_id:a}};l({method:"POST",url:t,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(t){t.status?(t.data.walletPoint&&(e.walletAmount=parseInt(t.data.walletPoint),e.wallet_max_used_point=parseInt(t.data.max_used_point)),t.data.walletTnC&&(e.walletTC=t.data.walletTnC)):e.walletAmount=0}).error(function(){e.walletAmount=0})},e.getWalletCashInfo(),e.showECash=function(){if(e.ecashcheck){var t=JSON.parse(localStorage.getItem("coupondata"));if(null!==t&&"undefined"!=typeof t.coupon&&t.coupon&&!e.allow_with_wallet)return e.ecashcheck=!1,alert("You can not use e-Cash with this coupon."),!1;e.verifyECash()}else e.isCouponDisabled=!1,e.isHardCopyDisabled=!1,e.isCouponRemoveDisabled=!1,e.showEcashdiv=!1,e.removeECash()},e.eCashCouponCheck=!1,e.eCashApplied=!1,e.verifyECash=function(){var t=e.getTotalPackageWithHardCopyCouponConvenienceAmount();if(e.ecashAmount=parseInt(e.ecashAmount),!(e.walletAmount>0))return e.ecashcheck=!1,alert("Insufficient Balance"),!1;if(e.wallet_max_used_point>=t?t>=e.walletAmount?e.walletAmount>=e.wallet_max_used_point?e.ecashAmount=e.wallet_max_used_point:e.ecashAmount=e.walletAmount:e.ecashAmount=t:e.walletAmount>=e.wallet_max_used_point?e.ecashAmount=e.wallet_max_used_point:e.ecashAmount=e.walletAmount,""==e.ecashAmount||"undefined"==typeof e.ecashAmount)return alert("Please enter HCash Amount"),angular.element("#ecash_amount").focus(),!1;if(!Number.isInteger(parseInt(e.ecashAmount)))return alert("Please enter HCash Amount in Numeric"),e.ecashAmount="",angular.element("#ecash_amount").focus(),!1;if(parseInt(e.ecashAmount)<=0)return alert("Entered HCash Amount must be greater than 0"),e.ecashAmount="",angular.element("#ecash_amount").focus(),!1;if(parseInt(e.ecashAmount)>e.wallet_max_used_point){var a="You can use only maximum Rs."+e.wallet_max_used_point+" HCash in a booking.";return alert(a),!1}if(parseInt(e.ecashAmount)>e.walletAmount)return alert("Entered HCash Amount should not be greater than Wallet available amount."),!1;if(parseInt(e.ecashAmount)>t)return alert("Entered HCash Amount should not be greater than Sub-total Amount"),!1;var o=JSON.parse(localStorage.getItem("coupondata"));if(null!==o)if("undefined"!=typeof o.coupon)if(o.coupon){if(!e.allow_with_wallet)return e.eCashCouponCheck=!1,alert("You can not use HCash with this coupon."),!1;e.eCashCouponCheck=!0}else e.eCashCouponCheck=!0;else e.eCashCouponCheck=!0;e.eCashCouponCheck&&(e.isCouponDisabled=!0,e.isCouponRemoveDisabled=!0,e.isHardCopyDisabled=!0,e.showEcashdiv=!0,e.eCashApplied=!0,e.isECashDisabled=!0,e.onConfirmECash=!0,e.calculatePrice())},e.removeECash=function(){e.eCashApplied=!1,e.isECashDisabled=!1,e.onConfirmECash=!1,e.ecashAmount="",e.calculatePrice()},e.totalAmount=function(){e.amount=e.cartTotalAmount,e.hardCopy=!1,n.hard_copyFlag=!1,e.discountamount=e.amount,e.coupondata={},e.coupondata.applied=!1,e.couponShow=!1,e.couponApplied=!1,e.onConfirm=!1,n.couponCode="",n.couponAmount="",e.coupon="",e.isDisabled=!1,localStorage.setItem("coupondata",JSON.stringify(e.coupondata))},e.getTotalPackageAmount=function(){return e.amount=e.cartTotalAmount,e.amount},e.getTotalPackageWithCouponAmount=function(){e.amount=e.cartTotalAmount;var t=JSON.parse(localStorage.getItem("coupondata"));return null!==t&&"undefined"!=typeof t.coupon&&t.coupon&&(e.amount=e.amount-parseInt(t.discount)),e.amount},e.getTotalPackageWithHardCopyAmount=function(){return e.amount=e.cartTotalAmount,1==e.hardCopy&&(e.amount=e.amount+parseInt(e.hardcopyPrice)),e.amount},e.getTotalPackageWithHardCopyCouponAmount=function(){e.amount=e.cartTotalAmount,1==e.hardCopy&&(e.amount=e.amount+parseInt(e.hardcopyPrice));var t=JSON.parse(localStorage.getItem("coupondata"));return null!==t&&"undefined"!=typeof t.coupon&&t.coupon&&(e.amount=e.amount-parseInt(t.discount)),e.amount},null===e.discountamount,null===e.customerDetails);else{var I=localStorage.getItem("booking_id");if(null!==I&&"true"==localStorage.getItem("isLogin")){var w=JSON.parse(localStorage.getItem("user"));g.go("makepayment",{action:"Get",booking_id:I,mobile:w.mobile})}}var T=localStorage.getItem("cityList");null===T&&f.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data,localStorage.setItem("cityList",JSON.stringify(e.cityList)))}),e.$on("changeCityDropown",function(t,a){var o=JSON.parse(localStorage.getItem("user")),r=o.user_id;e.getAddressesByUserId(r)}),e.convenience_fees_visible=!1,e.showConvenienceFeesDialog=function(){e.convenience_fees_visible=!0},e.applyDonation=function(){e.donation?e.calculatePrice():e.calculatePrice()},e.calculatePrice=function(){e.amount=parseInt(e.cartTotalAmount),1==e.hardCopy&&(e.amount=e.amount+parseInt(e.hardcopyPrice));var t=JSON.parse(localStorage.getItem("coupondata"));null!==t&&"undefined"!=typeof t.coupon&&t.coupon&&(e.amount=e.amount-parseInt(t.discount)),e.amount+=parseInt(e.convenience_fee),e.subTotal=e.amount,e.eCashApplied&&(e.amount-=parseInt(e.ecashAmount)),e.onlineDiscountApplicable&&e.amount>=e.online_discount_mimimum_amount&&(e.amount-=e.online_discount_amount,e.onlineDiscountApplied=!0),e.amount<0&&(e.amount=0),e.donation&&(e.amount=e.amount+parseInt(e.donationFees)),e.discountamount=e.amount,localStorage.setItem("total_amount",e.discountamount)},e.getTotalPackageWithHardCopyCouponConvenienceAmount=function(){e.amount=e.cartTotalAmount,1==e.hardCopy&&(e.amount=e.amount+parseInt(e.hardcopyPrice));var t=JSON.parse(localStorage.getItem("coupondata"));return null!==t&&"undefined"!=typeof t.coupon&&t.coupon&&(e.amount=e.amount-parseInt(t.discount)),e.amount+=parseInt(e.convenience_fee),e.amount},e.youwecan_visible=!1,e.showYuvWeCan=function(){e.youwecan_visible=!0},e.hcash_message_visible=!1,e.showHCashTC=function(){e.hcash_message_visible=!0},e.checkPaymentMode=function(){"cash"!==e.payradio&&e.onlineDiscountActive?e.onlineDiscountApplicable=!0:(e.onlineDiscountApplicable=!1,e.onlineDiscountApplied=!1),e.calculatePrice()}}function footerController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g){e.subscriber=function(){var t;return void 0===e.addAddressForm.customerEmail||""===e.addAddressForm.customerEmail?(e.addAddressForm.customeremail.$dirty=!0,e.addAddressForm.customeremail.$invalid=!0,e.addAddressForm.customeremail.$error.required=!0,g.eventTrack("Failed Email Validation in Subscription Form",{category:"Footer"}),!1):(t=e.addAddressForm.customerEmail,e.addAddressForm.customerEmail="",e.addAddressForm.customeremail.$dirty=!1,void doPostWithOutToken(l,p.serverUrl+"commonservice/subscribeNewsLetter/",{email:t},"",function(e){1==e.status?(g.eventTrack("Subscribed Sucessfully",{category:"Footer"}),alert(e.message)):alert(e.data.email)}))},e.cpelem={c1:"copy",c2:"copy",c3:"copy",c4:"copy",c5:"copy",c6:"copy"},e.copyToClipboard=function(t,a){var o=document.createElement("textarea");o.textContent=t;var r=document.getElementsByTagName("body")[0];r.appendChild(o),o.select(),document.execCommand("copy"),r.removeChild(o),g.eventTrack("Click on copy on deal",{category:"Deals",label:t}),"undefined"!=typeof a&&""!==a&&(e.cpelem[a]="Copied",i(function(){e.cpelem[a]="copy"},2e3))}}function habitRiskDetailsController(e,t,a,o,r,i,n,s,l,d,c,u,m,p){e.stateParms=i,e.loaderVar=!0;var g={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return g.Android()||g.BlackBerry()||g.iOS()||g.Opera()||g.Windows()}};if(e.setMetaTags=function(t){a.title=t.meta_title,a.description=t.meta_desc,a.keyword=t.meta_keyword,a.meta_footer=t.meta_footer,e.descp=t.description,""!==t.canonical_url?a.meta_canonical=t.canonical_url:a.meta_canonical="https://www.healthians.com"+o.$$url;var r="";r+=1==t.robot_index?"index, ":"noindex, ",r+=1==t.robot_follow?"follow":"nofollow",a.meta_robots=r},e.habitRiskDetails=function(t){var a={data:{id:t,city:JSON.parse(localStorage.getItem("cityID"))[0].city_id,source:"web"}},o=n.couponUrl+"customer/RiskHabitManagement/getRiskHabitSearch";doPostWithOutToken(r,o,a,"",function(t){t.status&&(e.riskHabitDetailsList=t.data,e.loaderVar=!1)})},e.stateParms&&e.stateParms.search_name){var _=e.stateParms.search_name;e.title_name=e.stateParms.search_name+" Tests","risk"===u.current.name&&p.getAllRiskDetails(function(t){if(t.status===!0){var a=t.data;e.riskIndividualDetail={},e.riskTests=[],a.forEach(function(t,a){t.alias.toLowerCase()===_&&(e.title_name=t.Name+" Tests",e.riskIndividualDetail=t,t.tests.forEach(function(t,a){e.riskTests.push(t.test_id)}))}),e.riskTests.length>0?(e.riskIndividualDetail.tests=e.riskTests.join(","),e.habitRiskDetails(e.riskIndividualDetail.tests),e.setMetaTags(e.riskIndividualDetail)):o.path("/")}}),"habit"===u.current.name&&p.getAllHabitsDetails(function(t){if(t.status===!0){var a=t.data;if(e.habitTests=[],e.habitIndividualDetail={},a.forEach(function(t,a){t.alias.toLowerCase()===_&&(e.title_name=t.Name+" Tests",e.habitIndividualDetail=t,t.tests.forEach(function(t,a){e.habitTests.push(t.test_id)}))}),e.habitTests.length>0){var r=e.habitTests.join(",");e.habitRiskDetails(r),e.setMetaTags(e.habitIndividualDetail)}else o.path("/")}})}e.addToCart=function(t){e.pkgDetail={},e.pkgDetail=angular.copy(t),e.pkgDetail.package_name=e.pkgDetail.name,e.pkgDetail.package_id=e.pkgDetail.id,e.pkgDetail.testId=e.pkgDetail.id,e.pkgDetail.display_name=e.pkgDetail.name,e.pkgDetail.test_packages=[{testId:e.pkgDetail.id,display_name:e.pkgDetail.name,healthians_price:e.pkgDetail.healthians_price,healthian_price:e.pkgDetail.healthians_price,actual_price:e.pkgDetail.actual_price,tcategory_id:e.pkgDetail.id}],e.pkgDetail.test_details=e.pkgDetail.include_tests,e.pkgDetail.include_tests=[],e.pkgDetail.also_include_tests=[],e.pkgDetail.test_details.forEach(function(t,a){t.tcategory_name=t.test_name,t.ptype=t.type,e.pkgDetail.include_tests.push(t)}),e.cartclicked=!0,e.searchedCartPackage=e.pkgDetail;var o=angular.copy(e.searchedCartPackage);m.setTempPackage(o),"true"==localStorage.getItem("isLogin")?(e.member=JSON.parse(localStorage.getItem("user")).relatives,0===e.member.length||0!==a.count&&"undefined"!=typeof a.count?e.tempUser=JSON.parse(localStorage.getItem("tempUser")):(e.tempUser=e.member,localStorage.setItem("tempUser",JSON.stringify(e.tempUser))),e.addToCartModal=!0,u.go("user_selection_cart")):(e.$$childHead.loginModal=!e.$$childHead.loginModal,e.$$childHead.signupModal=!1,e.$$childHead.loginTab=!1,e.$$childHead.signupText="Continue to Cart",e.$$childHead.showSignupForm()),e.temp=e.searchedCartPackage},e.$on("showPatientDialog",function(t,o){if(e.cartclicked?e.addToCartModal=!0:e.addToCartModal=!1,"true"==localStorage.getItem("isLogin")){a.loggedin=!0;var r=JSON.parse(localStorage.getItem("user")).name,i=r.split(" ");a.user=i[0].charAt(0).toUpperCase().concat(i[0].substr(1)),e.userLoginDetails=JSON.parse(localStorage.getItem("user")),"true"==localStorage.getItem("isSocialLogin")&&(""===e.userLoginDetails.mobile?e.mobileModal=!0:e.mobileModal=!1);var n=m.getTempPackage();e.addToCart(n),e.member=JSON.parse(localStorage.getItem("user")).relatives}}),e.closeMobileCallToBookPopup=function(){d.eventTrack("Mobile - Call To Book Pop up - Close",{category:u.current.name+" - Mobile Call To Book Pop up"}),e.mobileCallToBookPopupDiv=!1},angular.element("#mobileCallToBook_bg").click(function(){e.closeMobileCallToBookPopup()}),e.closeCallToBookPopup=function(){angular.element("#callToBook_bg").fadeOut(0),angular.element("#callToBookPopup").slideUp(0),d.eventTrack("Call To Book Pop up - Close",{category:u.current.name+" - Call To Book Pop up"})},angular.element("#callToBook_bg").click(function(){e.closeCallToBookPopup()}),angular.element("#closeCallToBookmodal").click(function(){e.closeCallToBookPopup()}),e.exitCallToBookError=!1,e.mobileCallToBookPopupDiv=!1,e.callToBookMobileError=!1,e.callToBook=function(t){if(e.clickedPackage=t,"true"==localStorage.getItem("isLogin")){var a=JSON.parse(localStorage.getItem("user")).user_id,o={data:{utm_id:u.current.name+"-web-call-to-book",user_id:a,originator:"habit_risk",source:"web"}};o.data.message="Customer search for : "+e.clickedPackage,g.any()?(o.data.utm_id=u.current.name+"-mob-call-to-book",o.data.source="mobile",e.sendDirectDetailsMobile(o)):e.sendDirectDetailsDesktop(o)}else g.any()?e.mobileCallToBookPopupDiv=!0:(angular.element("#callToBookPopup").css("left",l.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",l.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus())},e.changeCallToBookDetailsPopupButtonColor=function(){e.customerctbNo&&(10!==e.customerctbNo.length||isNaN(e.customerctbNo)||void 0===e.customerctbNo||""===e.customerctbNo?(angular.element("#callToBooksubmitbtn").css("background","#b7b7b7"),angular.element("#callToBooksubmitbtn").css("border","1px solid #cecece"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#callToBooksubmitbtn").css("background","#e1530d"),angular.element("#callToBooksubmitbtn").css("border","1px solid #eaeaea"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendCallToBookDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerctbNo||""===e.customerctbNo)return e.addCallToBookLeadForm.customerno123.$dirty=!0,e.addCallToBookLeadForm.customerno123.$invalid=!0,d.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.customerctbNo))return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Enter valid Mobile number",d.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Not a number"}),t(function(){e.mobile_valid_error=!1},2e3),!1;if(10!==e.customerctbNo.length)return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Mobile number should be of 10 digits",d.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),t(function(){e.mobile_valid_error=!1},2e3),!1;var a={data:{utm_id:u.current.name+"-web-call-to-book",name:e.customerctbName,mobile:e.customerctbNo,originator:"habit_risk",source:"web"}};a.data.message="Customer search for : "+e.clickedPackage,localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){o.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===o.message&&(e.clickedPackage="",d.eventTrack("Lead Captured",{category:u.current.name+" - Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a)),e.customerctbName="",e.customerctbNo="",e.Message="",e.addCallToBookLeadForm.name123.$dirty=!1,e.addCallToBookLeadForm.customerno123.$dirty=!1,e.ctb_mob_valid_error=!1,t(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(o.message)})},e.sendDirectDetailsDesktop=function(a){var o=n.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(r,o,a,"",function(o){o.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===o.message&&(e.clickedPackage="",d.eventTrack("Lead Captured",{category:u.current.name+" - Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a)),e.Message="",angular.element("#callToBookPopup").css("left",l.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",l.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus(),t(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(o.message)})},e.changeMobileCallToBookPopupButtonColor=function(){e.ctbcustomerNo&&(10!==e.ctbcustomerNo.length||isNaN(e.ctbcustomerNo)||void 0===e.ctbcustomerNo||""===e.ctbcustomerNo?(angular.element("#ctbmobilepopupsubmitbtn").css("background","#b7b7b7"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #cecece"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#ctbmobilepopupsubmitbtn").css("background","#e1530d"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #eaeaea"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendDirectDetailsMobile=function(a){var o=n.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(r,o,a,"",function(o){o.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===o.message&&(e.clickedPackage="",d.eventTrack("Lead Captured",{category:u.current.name+" - Mobile Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a)),e.Message="",e.mobileCallToBookPopupDiv=!0,t(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(o.message)})},e.sendMobileCTBPopupDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.ctbcustomerNo||""===e.ctbcustomerNo)return e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!0,e.addMobileCTBPopupLeadForm.ctbcustomerno.$invalid=!0,d.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.ctbcustomerNo))return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Enter valid Mobile number",d.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Not a number"}),t(function(){e.ctb_mob_valid_error=!1},2e3),!1;if(10!==e.ctbcustomerNo.length)return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Mobile number should be of 10 digits",d.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),t(function(){e.ctb_mob_valid_error=!1},2e3),!1;var a={data:{utm_id:u.current.name+"-mob-call-to-book",name:e.ctbcustomerName,mobile:e.ctbcustomerNo,originator:"habit_risk",source:"mobile"}};a.data.message="Customer search for : "+e.clickedPackage,localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){o.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===o.message&&(e.clickedPackage="",d.eventTrack("Lead Captured",{category:u.current.name+" - Mobile Call To Book Pop up",label:e.ctbcustomerNo}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a)),e.ctbcustomerName="",e.ctbcustomerNo="",e.addMobileCTBPopupLeadForm.ctbname.$dirty=!1,e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!1,t(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(o.message)})}}function headerController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f){a.forgotPwdModal=!1,a.changePwdModal=!1,a.mobileModal=!1,d.loggedin=!1,d.user="",a.signupmsg=!1,a.partialSignUpModal=!1,a.callbackMobileModal=!1,a.$emit("userLoggedInSuccess");var b={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return b.Android()||b.BlackBerry()||b.iOS()||b.Opera()||b.Windows()}};a.time_slot=localStorage.getItem("time_slot"),a.tempUser=JSON.parse(localStorage.getItem("tempUser"));var h=JSON.parse(localStorage.getItem("cityID"));if(null===h&&localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),a.loginModal=!1,a.signupText="Sign Up",a.showLoginForm=function(){a.loginModal=!0},a.hideLoginForm=function(){a.loginModal=!1},a.showSignupForm=function(){a.loginTab=!1,a.loginModal=!0,"Continue to Cart"!==a.signupText?a.signupText="Sign Up":a.signupText="Continue to Cart"},a.emailLogin=!1,a.showEmailLogin=function(){a.emailLogin=!0},a.showMobileLogin=function(){a.emailLogin=!1},a.showLoginForm=function(){a.loginModal=!0},a.showPartialSignupForm=function(){a.partialSignUpModal=!0},a.hidePartialSignupForm=function(){a.partialSignUpModal=!1},a.backToLoginPartialSignupForm=function(){a.partialSignUpModal=!1,a.showLoginForm()},a.showSignUpSuccess=function(){a.signupmsg=!0},"pick-time"!=l.current.name&&"payment-summary"!=l.current.name&&"orderbook"!=l.current.name&&"confirm-address"!=l.current.name&&"make-payment"!=l.current.name&&"order-summary"!=l.current.name&&"payment-fail"!=l.current.name||((null==a.time_slot||""==a.time_slot||void 0==a.time_slot)&&"pick-time"!=l.current.name,void 0!=a.tempUser&&null!=a.tempUser||"pick-time"!=l.current.name||(window.location.href="/orderbook")),"about-us"!=l.current.name&&"healthians-media"!=l.current.name&&"career"!=l.current.name&&"contact-us"!=l.current.name&&"healthians-investors"!=l.current.name&&"orderbook"!=l.current.name&&"pick-time"!=l.current.name&&"make-payment"!=l.current.name&&"confirm-address"!=l.current.name&&"Support-Help"!=l.current.name||t.scrollTo(0,angular.element(document.getElementById("topdiv")).offsetTop),"dashboard"==l.current.name&&"true"!==localStorage.getItem("isLogin")&&(window.location.href="/"),"download-file"==l.current.name&&"true"==localStorage.getItem("isLogin")&&(window.location.href="/"),a.getAddress=function(){var t=u.defer();return navigator.geolocation.getCurrentPosition(function(o){var r={lat:o.coords.latitude,lng:o.coords.longitude},i="https://maps.googleapis.com/maps/api/geocode/json?latlng="+r.lat+","+r.lng+"&sensor=false";doGet(e,i,function(e){if(e.results&&e.results.length>0){var o=e.results[0].address_components;o.forEach(function(e,o){"locality"==e.types[0]&&(a.googleApiCity=e.long_name,t.resolve(a.googleApiCity))})}})}),t.promise},"package"==l.current.name||"profile"==l.current.name||"parameter"==l.current.name||"unsubscribe"==l.current.name){null===h?(a.cityObj=[{city_id:"23",city_name:"Gurgaon"}],localStorage.setItem("cityID",JSON.stringify(a.cityObj)),a.searchCity="Gurgaon"):(a.cityObj=JSON.parse(localStorage.getItem("cityID")),a.searchCity=JSON.parse(localStorage.getItem("cityID"))[0].city_name);a.getAddress().then(function(t){e({method:"GET",url:m.serverUrl+"commonservice/city_detail",params:{city_name:a.googleApiCity}}).success(function(e){e.data&&(a.searchCity=e.data[0].city_name,a.cityObj.push(e.data[0]),localStorage.setItem("cityID",JSON.stringify(a.cityObj)))})})}else a.searchCity=JSON.parse(localStorage.getItem("cityID"))[0].city_name;if(a.setHeader=function(){if("true"==localStorage.getItem("isLogin")){d.loggedin=!0;var e=JSON.parse(localStorage.getItem("user")).name,t=e.split(" ");d.user=t[0].charAt(0).toUpperCase().concat(t[0].substr(1)),d.user_id=JSON.parse(localStorage.getItem("user")).user_id,a.userLoginDetails=JSON.parse(localStorage.getItem("user"));var o=a.userLoginDetails.email,r=a.userLoginDetails.age,i=a.userLoginDetails.gender,n=a.userLoginDetails.mobile;"true"==localStorage.getItem("isSocialLogin")&&(""===a.userLoginDetails.mobile?a.mobileModal=!0:a.mobileModal=!1),null===localStorage.getItem("token")&&localStorage.setItem("showLoginDialog","true"),""!==e&&null!==o&&""!==o&&""!==r&&""!==i&&""!==n&&null!==n&&"0"!==r&&null!==i||(a.showPartialSignupForm(),a.$broadcast("showPreviousUserDetailsCheck"))}},a.setHeader(),a.$on("showPreviousUserDetails",function(e,t){a.$broadcast("showPreviousUserDetailsCheck")}),a.showLoginModal=function(){a.loginModal=!0,a.forgotPwdModal=!1},a.showForgotPwdForm=function(){a.loginModal=!1,a.forgotPwdModal=!a.forgotPwdModal},a.showChangePwdForm=function(){a.changePwdModal=!a.changePwdModal},a.showForgotPwdOtpForm=function(){a.forgotPwdOtpModal=!a.forgotPwdOtpModal},a.getCityList=function(){o.getCityDetail(function(e){"success"==e.status&&(a.cityList=e.data,localStorage.setItem("cityList",JSON.stringify(a.cityList)))})},a.$on("cityDropdownRefresh",function(e,t){a.searchCity=JSON.parse(localStorage.getItem("cityID"))[0].city_name}),a.sigOut=function(){var e=JSON.parse(localStorage.getItem("user")).user_id;o.logout({source:"web",user_id:e},function(e){e.status&&(localStorage.setItem("isLogin","false"),localStorage.removeItem("token"),localStorage.removeItem("customerDetails"),localStorage.removeItem("sample_date"),localStorage.removeItem("user"),localStorage.removeItem("coupondata"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("total_amount"),localStorage.removeItem("amountfinal"),localStorage.removeItem("userDetail"),localStorage.removeItem("Detailscustomer"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("address"),localStorage.removeItem("isSocialLogin"),localStorage.removeItem("booking_id"),localStorage.removeItem("makepayment_to_summary"),localStorage.removeItem("tempUser"),localStorage.removeItem("time_slot"),localStorage.removeItem("showLoginDialog"),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("selectPatient"),n.path("/"),d.loggedin=!1,p.getLoginStatus(function(e){"connected"==e.status&&p.logout(function(e){})}))})},
a.selectCity=function(e){a.cityObj=[],a.searchCity=e;for(var t=0;t<a.cityList.length;t++)a.searchCity===a.cityList[t].city_name&&(a.cityObj.push(a.cityList[t]),localStorage.setItem("cityID",JSON.stringify(a.cityObj)),a.$emit("changeCityDropown"))},a.listCity=function(){"order-summary"!=l.current.name&&"pick-time"!=l.current.name&&"confirm-address"!=l.current.name&&"make-payment"!=l.current.name&&(a.cityListShow=!0)},a.downloadreport=function(){n.path("/download-file")},a.myBooking=function(){n.path("/dashboard"),n.hash("mybooking"),d.$broadcast("my-booking")},a.getCityList(),a.$on("tokenExpired",function(e,t){localStorage.setItem("isLogin","false"),localStorage.removeItem("token"),localStorage.removeItem("customerDetails"),localStorage.removeItem("sample_date"),localStorage.removeItem("user"),localStorage.removeItem("coupondata"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("total_amount"),localStorage.removeItem("amountfinal"),localStorage.removeItem("userDetail"),localStorage.removeItem("Detailscustomer"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("address"),localStorage.removeItem("isSocialLogin"),localStorage.removeItem("booking_id"),localStorage.removeItem("makepayment_to_summary"),localStorage.removeItem("tempUser"),localStorage.removeItem("time_slot"),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.setItem("showLoginDialog","true"),d.loggedin=!1,p.getLoginStatus(function(e){"connected"==e.status&&p.logout(function(e){})}),n.path("/")}),a.ini=function(){$(document).on("click","body",function(e){"order-summary"!=l.current.name&&"pick-time"!=l.current.name&&"confirm-address"!=l.current.name&&"make-payment"!=l.current.name&&"payment-summary"!=l.current.name&&("final_checkout"===l.current.name&&a.sublocalityDropDownSelected?$(".detect-drop-down").hide():$(e.target).closest("ul.locationHeader").length>0&&"A"==$(e.target).prop("tagName").toUpperCase()?$(".detect-drop-down").show(50):$(".detect-drop-down").hide())})},a.ini(),"true"==localStorage.getItem("isLogin")){if(a.member=JSON.parse(localStorage.getItem("user")).relatives,a.member.length>0){var y=a.member[0].user_id;y.length>15||d.$broadcast("tokenExpired")}var k=["cart","final_checkout"];_.contains(k,l.current.name)||d.totalCartTest<=0&&o.cartCount()}a.exitError=!1;var v=0;a.mobileExitPopupDiv=!1;var S=["cart","final_checkout","orderbook","package","profile","parameter","habit","risk","user_selection_cart","csat","healthkarma","healthkarma-v2","phlebo-route","paytm"];b.any()?(a.mobileview=!0,s(function(){_.contains(S,l.current.name)||document.cookie&&document.cookie.indexOf("ExitPopupMobileCookie=1")!=-1||(a.mobileExitPopupDiv=!0,localStorage.setItem("isLeadCaptured",!1))},4e4)):(a.mobileview=!1,angular.element(document).mousemove(function(e){a.exitError=!1,angular.element("#exitpopup").css("left",t.innerWidth/2-$("#exitpopup").width()/2),angular.element("#exitpopup").css("top",t.innerHeight/3-$("#exitpopup").height()/2),(e.clientY<=5||e.pageY<v)&&(document.cookie&&document.cookie.indexOf("ExpirationCookieTest=1")!=-1||_.contains(S,l.current.name)||(localStorage.setItem("isLeadCaptured",!1),angular.element("#exitpopup_bg").fadeIn(100),angular.element("#exitpopup").fadeIn(100),f.eventTrack("Exit Popup - View",{category:"Exit Pop up"}),angular.element("#customerno").focus(),v=e.pageY))})),a.closeMobileExitPopup=function(){f.eventTrack("Mobile Exit Popup - Close",{category:"Mobile Exit Pop up"}),a.mobileExitPopupDiv=!1;var e=new Date,t=new Date(e.getTime()+864e5);document.cookie="ExitPopupMobileCookie=1; expires="+t.toUTCString()},a.closeExitPopup=function(){angular.element("#exitpopup_bg").fadeOut(0),angular.element("#exitpopup").slideUp(0),f.eventTrack("Exit Popup - Close",{category:"Exit Pop up"});var e=new Date,t=new Date(e.getTime()+864e5);document.cookie="ExpirationCookieTest=1; expires="+t.toUTCString()},angular.element("#exitpopup_bg").click(function(){a.closeExitPopup()}),angular.element("#closemodal").click(function(){a.closeExitPopup()}),angular.element("#closemodal2").click(function(){a.closeExitPopup()}),a.changeExitPopupButtonColor=function(){a.customerNo&&(10!==a.customerNo.length||isNaN(a.customerNo)||void 0===a.customerNo||""===a.customerNo?(angular.element("#exitpopupsubmitbtn").css("background","#b7b7b7"),angular.element("#exitpopupsubmitbtn").css("border-bottom","1px solid #cecece"),angular.element("#exitpopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#exitpopupsubmitbtn").css("background","#e1530d"),angular.element("#exitpopupsubmitbtn").css("border-bottom","1px solid #eaeaea"),angular.element("#exitpopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},a.sendDetails=function(){if(a.addLeadFormSubmitted=!1,void 0===a.customerNo||""===a.customerNo)return a.addLeadForm.customerno.$dirty=!0,a.addLeadForm.customerno.$invalid=!0,f.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(a.customerNo))return a.mobile_valid_error=!0,a.mobile_valid_msg="Enter valid Mobile number",f.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Validation Fail : Not a number"}),s(function(){a.mobile_valid_error=!1},2e3),!1;if(10!==a.customerNo.length)return a.mobile_valid_error=!0,a.mobile_valid_msg="Mobile number should be of 10 digits",f.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Validation Fail : Not 10 digits"}),s(function(){a.mobile_valid_error=!1},2e3),!1;var o={data:{utm_id:"exitpopup",name:a.customerName,mobile:a.customerNo,originator:"home",source:"web"}};localStorage.getItem("guid")&&(o.data.guid=localStorage.getItem("guid"));var r=m.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(e,r,o,"",function(e){e.status?(a.exitError=!0,"Lead successfully inserted"===e.message&&(f.eventTrack("Lead Captured",{category:"Exit Form",label:a.customerNo}),"undefined"!=typeof t.fbq&&t.fbq("track","Lead",o)),a.customerName="",a.customerNo="",a.Message="",a.addLeadForm.name.$dirty=!1,a.addLeadForm.customerno.$dirty=!1,s(function(){a.exitError=!1,a.closeExitPopup()},4e3)):t.alert(e.message)})},a.changeMobileExitPopupButtonColor=function(){a.exmcustomerNo&&(10!==a.exmcustomerNo.length||isNaN(a.exmcustomerNo)||void 0===a.exmcustomerNo||""===a.exmcustomerNo?(angular.element("#exitmobilepopupsubmitbtn").css("background","#b7b7b7"),angular.element("#exitmobilepopupsubmitbtn").css("border-bottom","1px solid #cecece"),angular.element("#exitmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#exitmobilepopupsubmitbtn").css("background","#e1530d"),angular.element("#exitmobilepopupsubmitbtn").css("border-bottom","1px solid #eaeaea"),angular.element("#exitmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},a.exitMobileError=!1,a.sendMobileExitPopupDetails=function(){if(a.addLeadFormSubmitted=!1,void 0===a.exmcustomerNo||""===a.exmcustomerNo)return a.addMobileExitPopupLeadForm.exmcustomerno.$dirty=!0,a.addMobileExitPopupLeadForm.exmcustomerno.$invalid=!0,f.eventTrack("Mobile Exit Pop - Get a Callback Now",{category:"Mobile Exit Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(a.exmcustomerNo))return a.mobile_valid_error=!0,a.mobile_valid_msg="Enter valid Mobile number",f.eventTrack("Mobile Exit Pop - Get a Callback Now",{category:"Mobile Exit Pop up",label:"Validation Fail : Not a number"}),s(function(){a.mobile_valid_error=!1},2e3),!1;if(10!==a.exmcustomerNo.length)return a.mobile_valid_error=!0,a.mobile_valid_msg="Mobile number should be of 10 digits",f.eventTrack("Mobile Exit Pop - Get a Callback Now",{category:"Mobile Exit Pop up",label:"Validation Fail : Not 10 digits"}),s(function(){a.mobile_valid_error=!1},2e3),!1;var o={data:{utm_id:"mobileexitpopup",name:a.exmcustomerName,mobile:a.exmcustomerNo,originator:"home",source:"mobile"}};localStorage.getItem("guid")&&(o.data.guid=localStorage.getItem("guid"));var r=m.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(e,r,o,"",function(e){e.status?(a.exitMobileError=!0,"Lead successfully inserted"===e.message&&(f.eventTrack("Lead Captured",{category:"Mobile Exit Form",label:a.exmcustomerNo}),"undefined"!=typeof t.fbq&&t.fbq("track","Lead",o)),a.exmcustomerName="",a.exmcustomerNo="",a.addMobileExitPopupLeadForm.exmname.$dirty=!1,a.addMobileExitPopupLeadForm.exmcustomerno.$dirty=!1,s(function(){a.exitMobileError=!1,a.closeMobileExitPopup()},4e3)):t.alert(e.message)})}}function healthKarmaController(e,t,a,o,r,i,n,s,l,d,c,u){e.stateParms=i,e.showMobile=!1,e.showQuestion=!1,e.showResult=!1,e.lifeStyleScore=0,a.meta_robots="noindex, nofollow";var m={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return m.Android()||m.BlackBerry()||m.iOS()||m.Opera()||m.Windows()}};m.any()?e.mobileDisplay=!0:e.mobileDisplay=!1,o.search().user_id?e.user_id=e.stateParms.user_id:(e.user_id="",o.search().mobile?(e.showMobile=!1,e.huserphone=e.stateParms.mobile):e.showMobile=!0),e.answer={},e.qdatasuccess=!1,e.getQuestionList=function(){if(void 0===e.huserName||""===e.huserName)return e.healthKarmaForm.huserName.$dirty=!0,e.healthKarmaForm.huserName.$invalid=!0,e.healthKarmaForm.huserName.$error.required=!0,focus("huserName"),!1;if(void 0===e.huserAge||""===e.huserAge)return e.healthKarmaForm.huserAge.$dirty=!0,e.healthKarmaForm.huserAge.$invalid=!0,e.healthKarmaForm.huserAge.$error.required=!0,focus("huserAge"),!1;if(parseInt(e.huserAge)<5||parseInt(e.huserAge)>120||parseInt(e.huserAge)<=0)return e.healthKarmaForm.huserAge.$dirty=!0,e.healthKarmaForm.huserAge.$invalid=!0,e.healthKarmaForm.huserAge.$error.pattern=!0,focus("huserAge"),!1;if(e.showMobile&&(void 0===e.huserphone||""===e.huserphone))return e.healthKarmaForm.huserphone.$dirty=!0,e.healthKarmaForm.huserphone.$invalid=!0,e.healthKarmaForm.huserphone.$error.required=!0,focus("huserphone"),!1;if(void 0===e.husergender||""===e.husergender||null===e.husergender)return e.healthKarmaForm.husergender.$dirty=!0,e.healthKarmaForm.husergender.$invalid=!0,e.healthKarmaForm.husergender.$error.required=!0,focus("husergender"),!1;if(void 0===e.userheight||""===e.userheight)return e.healthKarmaForm.userheight.$dirty=!0,e.healthKarmaForm.userheight.$invalid=!0,e.healthKarmaForm.userheight.$error.required=!0,focus("userheight"),!1;if(void 0===e.userWeight||""===e.userWeight)return e.healthKarmaForm.userWeight.$dirty=!0,e.healthKarmaForm.userWeight.$invalid=!0,e.healthKarmaForm.userWeight.$error.required=!0,focus("userweight"),!1;var t={data:{catId:"1",age:e.huserAge,gender:e.husergender,source:"web"}},a=n.couponUrl+"customer/account/getQuestions";e.qdatasuccess=!0,doPostWithOutToken(r,a,t,"",function(t){if(e.qdatasuccess=!1,t.status){e.questionList=t.data,e.totalQuestion=t.data.length,e.questionList.forEach(function(t,a){1==t.question_type&&(e.answer[t.question_id]={},t.options.forEach(function(a,o){e.answer[t.question_id][a.option_id]=!1}))}),e.quest={};for(var a=1;a<=e.totalQuestion;a++)1===a?(e.quest["q"+a]=!0,e.current=1):e.quest["q"+a]=!1;e.showQuestion=!0,e.progress=1,l.scrollTo(0,0)}else alert(t.message)})},e.datasuccess=!1,e.submit_feedback=function(){if(e.check_last_question=!1,"undefined"!=typeof e.answer[22]&&_.isObject(e.answer[22])&&_.each(e.answer[22],function(t,a){t&&(e.check_last_question=t)}),!e.check_last_question)return l.alert("Please select atleast one checkbox."),!1;if(void 0===e.healthKarmaEmail||""===e.healthKarmaEmail)return e.questionForm.healthkarma_email.$dirty=!0,e.questionForm.healthkarma_email.$invalid=!0,e.questionForm.healthkarma_email.$error.required=!0,focus("healthkarma_email"),!1;var i="web",s={data:{age:e.huserAge,options:[],height:e.userheight,name:e.huserName,gender:e.husergender,weight:e.userWeight,cityId:JSON.parse(localStorage.getItem("cityID"))[0].city_id,source:i,email:e.healthKarmaEmail}};""!==e.user_id?s.data.userId=e.user_id:"true"==localStorage.getItem("isLogin")&&(s.data.userId=JSON.parse(localStorage.getItem("user")).user_id),e.showMobile&&(s.data.contact_number=e.huserphone),o.search().lead_id&&(s.data.lead_id=e.stateParms.lead_id),o.search().mobile&&(s.data.contact_number=e.stateParms.mobile),e.option_final=[],_.each(e.answer,function(t,a){if(_.isObject(t)){var o=[];_.each(t,function(e,t){e&&o.push(t)});var r={question_id:a,option_id:o.join(",")};e.option_final.push(r)}else{var r={question_id:a,option_id:t};e.option_final.push(r)}}),s.data.options=JSON.stringify(e.option_final),e.datasuccess=!0;var d=n.couponUrl+"customer/account/getHealthAssessment";doPostWithOutToken(r,d,s,"",function(o){e.datasuccess=!1,o.status?(e.showQuestion=!1,e.showResult=!0,e.resultData=o.data,e.sharingurl=e.resultData.webURL,a.og_image=e.sharingurl,a.og_url=e.sharingurl,t(function(){e.lifeStyleScore=e.resultData.lifeStyleScore},200),e.peerscore=e.resultData.peerscore,e.resultData.recommendedTests&&(e.recommendedTests=e.resultData.recommendedTests,e.recommendedTests.forEach(function(t,a){e.answer[t.id]=!0})),l.scrollTo(0,0)):(e.showQuestion=!0,e.showResult=!1,alert(o.message))})},e.clickRadio=function(a){e.current=a,e.progress=parseInt(e.current/e.totalQuestion*100),a===e.totalQuestion?m.any()&&l.scrollTo(0,200):(angular.element("#q"+a+"_div").fadeOut(),t(function(){e.quest["q"+a]=!1;var t=parseInt(a)+1;angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t,angular.element("#next_q"+a).css("opacity","1"),angular.element("#next_q"+a).removeAttr("disabled","disabled")},500))},e.showPrevious=function(){var t=parseInt(e.current)-1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t},e.showNext=function(){var t=parseInt(e.current)+1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t},e.callbackmsg=!1,e.callBackPhone=function(){if("true"==localStorage.getItem("isLogin")){var a=JSON.parse(localStorage.getItem("user")),o=a.mobile,i={data:{customer_mobile:o,app_version:"46",source:"web"}};r({method:"POST",url:n.couponUrl+"customer/account/clickToCallUrl",data:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(a){a.status&&(e.callbackmsg=!0,t(function(){e.callbackmsg=!1,$(".modal.in").find("button.close").click()},9e3))})}else e.callbackMobileModal=!0,e.callbackopt_error=!1,e.mobile_read_only=!1,e.callbackSuccess=!1},e.getCookie=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),o=a.split(";"),r=0;r<o.length;r++){for(var i=o[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},e.answer={};var p=[];e.bookRecommendTest=function(){var a={},o=JSON.parse(localStorage.getItem("cityID"))[0].city_name;null===o&&(o=e.getCookie("sLocation")),e.recommendedTests.forEach(function(t,o){if(1==e.answer[t.id]){var r={id:t.type+"_"+t.id,text:t.name};p.push(r),a[t.type+"_"+t.id]=t.name}});var r=Object.keys(a).map(function(e){return"f["+escape(e)+"]="+escape(a[e])}).join("&");0!==e.final_search&&(d.setSearchPackages(p),s.eventTrack("Search From Health Karma",{category:"Search",label:p}),t(function(){window.location=document.location.origin+"/"+o.toLowerCase()+"/orderbook?"+r},500))},e.sharingtext="This is my lifestyle score wanna check yours! Download Healhians app and get your lifestyle score now. https://goo.gl/deRpjb",e.shareFacebook=function(t){u.logout(function(e){}),u.ui({method:"feed",name:"Health Karma | Predictive Health Risk Assessment | Get the impact of your lifestyle | Get Recommendations",link:e.sharingurl,picture:e.sharingurl,description:e.sharingtext})},e.age_error=!1,e.weight_error=!1,e.weightSlider={value:25,options:{floor:0,ceil:150,onChange:function(){angular.element("#qq6").hasClass("active")||($(".hk_scrollForm-main").find(".individual-questions").removeClass("active"),$(".hk_scrollForm-main").find(".individual-questions input").each(function(){$(this).blur()}),angular.element("#qq6").addClass("active")),e.lastSliderUpdated=e.weightSlider.value,e.lastSliderUpdated>0&&(e.weight_error=!1)}}},e.ageSlider={value:5,options:{floor:5,ceil:120,onChange:function(){angular.element("#qq8").hasClass("active")||($(".hk_scrollForm-main").find(".individual-questions").removeClass("active"),$(".hk_scrollForm-main").find(".individual-questions input").each(function(){$(this).blur()}),angular.element("#next_form").hide(),angular.element("#continue_last").show(),angular.element("#qq8").addClass("active")),e.lastSliderUpdated=e.ageSlider.value,e.lastSliderUpdated>0&&(e.age_error=!1)}}},e.submit_feedback_new=function(){if(e.check_last_question=!1,"undefined"!=typeof e.answer[22]&&_.isObject(e.answer[22])&&_.each(e.answer[22],function(t,a){t&&(e.check_last_question=t)}),!e.check_last_question)return l.alert("Please select atleast one checkbox."),!1;var i="web",s={data:{age:e.ageSlider.value,options:[],height:e.userheight,name:e.huserName,gender:e.husergender,weight:e.weightSlider.value,cityId:JSON.parse(localStorage.getItem("cityID"))[0].city_id,source:i,email:e.healthKarmaEmail}};""!==e.user_id?s.data.userId=e.user_id:"true"==localStorage.getItem("isLogin")&&(s.data.userId=JSON.parse(localStorage.getItem("user")).user_id),e.showMobile&&(s.data.contact_number=e.huserphone),o.search().lead_id&&(s.data.lead_id=e.stateParms.lead_id),o.search().mobile&&(s.data.contact_number=e.stateParms.mobile),e.option_final=[],_.each(e.answer,function(t,a){if(_.isObject(t)){var o=[];_.each(t,function(e,t){e&&o.push(t)});var r={question_id:a,option_id:o.join(",")};e.option_final.push(r)}else{var r={question_id:a,option_id:t};e.option_final.push(r)}}),s.data.options=JSON.stringify(e.option_final),e.datasuccess=!0;var d=n.couponUrl+"customer/account/getHealthAssessment";doPostWithOutToken(r,d,s,"",function(o){e.datasuccess=!1,o.status?(e.showQuestion=!1,e.showResult=!0,e.resultData=o.data,e.sharingurl=e.resultData.webURL,a.og_image=e.sharingurl,a.og_url=e.sharingurl,t(function(){e.lifeStyleScore=e.resultData.lifeStyleScore},200),e.peerscore=e.resultData.peerscore,e.resultData.recommendedTests&&(e.answerRecomm={},e.recommendedTests=e.resultData.recommendedTests,e.recommendedTests.forEach(function(t,a){e.answerRecomm[t.id]=!0})),l.scrollTo(0,0)):(e.showQuestion=!0,e.showResult=!1,alert(o.message))})},e.getNewQuestionList=function(){if(void 0===e.huserName||""===e.huserName){e.healthKarmaForm.huserName.$dirty=!0,e.healthKarmaForm.huserName.$invalid=!0,e.healthKarmaForm.huserName.$error.required=!0;var t=document.getElementById("huserName");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}if(void 0===e.huserLastName||""===e.huserLastName){e.healthKarmaForm.huserLastName.$dirty=!0,e.healthKarmaForm.huserLastName.$invalid=!0,e.healthKarmaForm.huserLastName.$error.required=!0;var t=document.getElementById("huserLastName");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}if(void 0===e.healthKarmaEmail||""===e.healthKarmaEmail){e.healthKarmaForm.healthkarma_email.$dirty=!0,e.healthKarmaForm.healthkarma_email.$invalid=!0,e.healthKarmaForm.healthkarma_email.$error.required=!0;var t=document.getElementById("healthkarma_email");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}if(void 0===e.userheight||""===e.userheight){e.healthKarmaForm.userheight.$dirty=!0,e.healthKarmaForm.userheight.$invalid=!0,e.healthKarmaForm.userheight.$error.required=!0;var t=document.getElementById("userheight");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}if(0==e.weightSlider.value){var t=document.getElementById("userWeight");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),e.weight_error=!0,angular.element("#next_form").show(),!1}if(e.weight_error=!1,void 0===e.husergender||""===e.husergender||null===e.husergender){e.healthKarmaForm.husergender.$dirty=!0,e.healthKarmaForm.husergender.$invalid=!0,e.healthKarmaForm.husergender.$error.required=!0;var t=document.getElementById("qq6");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}if(0==e.ageSlider.value){var t=document.getElementById("userAge");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),e.age_error=!0,angular.element("#next_form").show(),!1}if(e.age_error=!1,parseInt(e.ageSlider.value)<5||parseInt(e.ageSlider.value)>120||parseInt(e.ageSlider.value)<=0){var t=document.getElementById("userAge");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),e.age_error=!0,angular.element("#next_form").show(),t.click(),!1}if(e.showMobile&&(void 0===e.huserphone||""===e.huserphone)){e.healthKarmaForm.huserphone.$dirty=!0,e.healthKarmaForm.huserphone.$invalid=!0,e.healthKarmaForm.huserphone.$error.required=!0;var t=document.getElementById("huserphone");return t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t.click(),t.focus(),angular.element("#next_form").show(),!1}var a={data:{catId:"1",age:e.ageSlider.value,gender:e.husergender,source:"web"}},o=n.couponUrl+"customer/account/getQuestions";e.qdatasuccess=!0,doPostWithOutToken(r,o,a,"",function(t){if(e.qdatasuccess=!1,t.status){e.questionList=t.data,e.totalQuestion=t.data.length,e.questionList.forEach(function(t,a){1==t.question_type&&(e.answer[t.question_id]={},t.options.forEach(function(a,o){e.answer[t.question_id][a.option_id]=!1}))}),e.quest={};for(var a=1;a<=e.totalQuestion;a++)1===a?(e.quest["q"+a]=!0,e.current=1):e.quest["q"+a]=!1;e.showQuestion=!0,e.progress=1,m.any()&&(l.scrollTo(0,0),$.scrollTo($(".hk_formDetailBlock"),1e3))}else alert(t.message)})},e.clickNewRadio=function(a){return a!==e.totalQuestion&&(e.current=a,void(a===e.totalQuestion-1?(angular.element("#q"+a+"_div").fadeOut(),t(function(){e.quest["q"+a]=!1;var t=parseInt(a)+1;angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t,angular.element("#next_q"+a).css("opacity","1"),angular.element("#next_q"+a).removeAttr("disabled","disabled"),angular.element("#next_q"+t).css("opacity","1"),angular.element("#next_q"+t).removeAttr("disabled","disabled")},500),m.any()&&l.scrollTo(0,200)):(angular.element("#q"+a+"_div").fadeOut(),t(function(){e.quest["q"+a]=!1;var t=parseInt(a)+1;angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t,angular.element("#next_q"+a).css("opacity","1"),angular.element("#next_q"+a).removeAttr("disabled","disabled"),m.any()&&$.scrollTo($(".hk_formDetailBlock"),1e3)},500))))},e.clickIndicator=function(a){a<e.current&&(angular.element("#q"+e.current+"_div").fadeOut(),_.each(e.quest,function(t,o){"q"+a!==o&&(e.quest[o]=!1),e.quest["q"+a]=!0}),t(function(){angular.element("#q"+a+"_div").fadeIn(),e.quest["q"+a]=!0,e.current=a,angular.element("#next_q"+a).css("opacity","1"),angular.element("#next_q"+a).removeAttr("disabled","disabled")},500))},e.showNewPrevious=function(){var t=parseInt(e.current)-1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t},e.showNewNext=function(){if(parseInt(e.current)===e.totalQuestion)s.eventTrack("Click on Final Submit",{category:"HealthKarmaV2"}),e.submit_feedback_new();else{var t=parseInt(e.current)+1,a=parseInt(e.current);angular.element("#q"+a+"_div").fadeOut(),e.quest["q"+a]=!1,angular.element("#q"+t+"_div").fadeIn(),e.quest["q"+t]=!0,e.current=t}},e.clickLastCheckbox=function(t,a){if("98"!==a)e.answer[t][98]&&(e.answer[t][98]=!1),e.answer[t][a]=!e.answer[t][a];else for(var o in e.answer[t])"98"!=o?e.answer[t][o]=!1:e.answer[t][o]=!0},e.answerRecomm={},e.bookRecommendTestNew=function(){var a=[],o={},r=JSON.parse(localStorage.getItem("cityID"))[0].city_name;null===r&&(r=e.getCookie("sLocation")),e.recommendedTests.forEach(function(t,r){if(1==e.answerRecomm[t.id]){var i={id:t.type+"_"+t.id,text:t.name};a.push(i),o[t.type+"_"+t.id]=t.name}});var i=Object.keys(o).map(function(e){return"f["+esc(e)+"]="+esc(o[e])}).join("&");0!==e.final_search&&(d.setSearchPackages(a),s.eventTrack("Search From Health Karma",{category:"Search",label:a}),t(function(){window.location=document.location.origin+"/"+r.toLowerCase()+"/orderbook?"+i},500))}}function healthcheckupController(e,t,a,o,r,i,n,s,l,d,c,u,m){var p={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()}};if(e.setMetaTags=function(t){a.title=t.meta_title,a.description=t.meta_desc,a.keyword=t.meta_keyword,a.meta_footer=t.meta_footer,e.descp=t.description,""!==t.canonical_url?a.meta_canonical=t.canonical_url:a.meta_canonical="https://www.healthians.com"+o.$$url;var r="";r+=1==t.robot_index?"index, ":"noindex, ",r+=1==t.robot_follow?"follow":"nofollow",a.meta_robots=r},e.stateParms=i,e.ga_category="web-health-checkup-campaign",e.hideDeskForm=!0,e.hideMobForm=!0,e.hideDeskCallBtn=!1,p.any()&&(e.hideDeskCallBtn=!0,e.hideDeskForm=!1),e.showDeskLeadForm=function(){e.hideDeskForm=!e.hideDeskForm,l.scrollTo(0,100)},e.showMobLeadForm=function(){e.hideMobForm=!e.hideMobForm},e.trustAsHtml=function(e){return m.trustAsHtml(e)},e.stateParms){if(e.stateParms.link_rewrite){var g={link_rewrite:e.stateParms.link_rewrite,source:"web"},_=n.serverUrl+"commonservice/lead_page_management";r({method:"GET",url:_,params:g}).success(function(t){1==t.status?(e.display_name=t.data.product_name,e.main_html=t.data.html,t.data.meta_details&&e.setMetaTags(t.data.meta_details)):(e.loading=!1,e.errorPkg=!0,e.errorPkgMsg="Something went wrong.",u.go("home"))}).error(function(){e.loading=!1,e.errorPkg=!0,e.errorPkgMsg="Something went wrong.",u.go("home")})}else u.go("home");if(e.utmid=e.stateParms.utmid,"undefined"!=typeof e.stateParms.email&&(e.customerEmail=e.stateParms.email),"undefined"!=typeof e.stateParms.name&&(e.customerName=e.stateParms.name),"undefined"!=typeof e.stateParms.mobile&&(e.customerNo=e.stateParms.mobile),"ucb"==e.utmid){var f=document.createElement("script");f.type="text/javascript",f.id="ucb_id",document.getElementsByTagName("head")[0].append(f),angular.element("#ucb_id").append('(function(w, d, t, s, q, m, n) { if (w.utq) return; q = w.utq = function() { q.process ? q.process(arguments) : q.queue.push(arguments); }; q.queue = []; m = d.getElementsByTagName(t)[0]; n = d.createElement(t); n.src = s; n.async = true; m.parentNode.insertBefore(n, m); })(window, document, "script", "https://pixel-insight.ucweb.com/ucads/utracking.js");utq("init", "43282752605257935");utq("set", "trackurl", "pixel-insight.ucweb.com/intl_utrace");utq("track", "PageView");')}if("quora"==e.utmid){var f=document.createElement("script");f.type="text/javascript",f.id="quora_id",document.getElementsByTagName("head")[0].append(f);var b=document.createElement("noscript");b.type="text/javascript",b.id="noscript_quora_id",document.getElementsByTagName("head")[0].append(b),angular.element("#quora_id").append('!function(q,e,v,n,t,s){if(q.qp) return; n=q.qp=function(){n.qp?n.qp.apply(n,arguments):n.queue.push(arguments);}; n.queue=[];t=document.createElement(e);t.async=!0;t.src=v; s=document.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);}(window, "script", "https://a.quora.com/qevents.js");qp("init", "bb9ba203758241a094941b86a559f3fe");qp("track", "ViewContent");'),angular.element("#noscript_quora_id").append('<img height="1" width="1" style="display:none" src="https://q.quora.com/_/ad/bb9ba203758241a094941b86a559f3fe/pixel?tag=ViewContent&noscript=1"/>')}}e.package_info="",e.booknow=!1,e.compaignmsg=!1,e.getCityList=function(){s.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data)})},e.getCityList(),e.sendDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadForm.city.$dirty=!0,e.addLeadForm.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.addLeadForm.customeremail.$invalid)return e.addLeadForm.customeremail.$dirty=!0,e.addLeadForm.customeremail.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Email not enter"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&(e.utmid="web-health-checkup-campaign"),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,email:e.customerEmail,mobile:e.customerNo,city:e.City,source:"web"}};"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),a.data.message="Customer search for : "+e.display_name,localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;e.customerName="",e.customerEmail="",e.customerNo="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.addLeadForm.customeremail.$dirty=!1,e.compaignmsg=!0;var s=new Date,c=new Date(s.getTime()+864e5);if(p.any()?(document.cookie="ExitPopupMobileCookie=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)):(document.cookie="ExpirationCookieTest=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)),"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var m=n.serverUrl+"commonservice/getVendorPixel",g={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,m,g,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),u.go("home")},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),u.go("home")},1e4)}else alert(o.message)})}},e.showLeadMobileForm=!1,e.tabOnMobileLead=function(){e.showLeadMobileForm=!0},e.hideTabOnMobileLead=function(){e.showLeadMobileForm=!1,e.customerName="",e.customerNo="",e.addLeadFormMobile.name.$dirty=!1,
e.addLeadFormMobile.customerno.$dirty=!1},e.sendLandingMobileDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadFormMobile.customerno.$dirty=!0,e.addLeadFormMobile.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadFormMobile.name.$dirty=!0,e.addLeadFormMobile.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadFormMobile.city.$dirty=!0,e.addLeadFormMobile.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.addLeadFormMobile.email.$invalid)return e.addLeadFormMobile.email.$dirty=!0,e.addLeadFormMobile.email.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Email not enter"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&(e.utmid="web-health-checkup-campaign"),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,mobile:e.customerNo,email:e.custEmail,city:e.City,source:"web"}};"web-campaign-adwords"===u.current.name&&(a.data.message="Customer search for : "+e.PackageList),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;if(e.customerName="",e.customerNo="",e.customerEmail="",e.addLeadFormMobile.name.$dirty=!1,e.addLeadFormMobile.customerno.$dirty=!1,e.addLeadFormMobile.email.$dirty=!1,e.compaignmsg=!0,e.showLeadMobileForm=!1,"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var s=n.serverUrl+"commonservice/getVendorPixel",c={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,s,c,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),u.go("home")},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),u.go("home")},1e4)}else alert(o.message)})}};var h=function(){"undefined"!=typeof url&&(l.location=url)};e.gtag_report_conversion=function(e){return"function"==typeof gtag&&gtag("event","conversion",{send_to:"AW-929610874/kgHcCP-t048BEPr4orsD",event_callback:h}),!1}}function healthtestController(e,t,a,o,r,i,n,s,l,d,c,u){a.meta_robots="noindex, nofollow";var m={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return m.Android()||m.BlackBerry()||m.iOS()||m.Opera()||m.Windows()}};if(e.stateParms=i,e.ga_category="web-health-test-campaign",e.stateParms){if(e.stateParms.link_rewrite?"liver-function-test"===e.stateParms.link_rewrite?(e.display_name="Liver Function Test",e.display_order_price='Price Starting <span class="fontrupee rs_class" >`</span> 250',e.display_image="assets/images/campaign/liver-function-test.jpg",e.display_data=[{headline:"Measures levels of ",data:["Protein","Liver enzymes","Bilirubin in the blood."]},{headline:"Helps to Diagnose:",data:["Viral Hepatitis(A,B,C)","Cirrhosis","Alcoholic liver disease","Effects of few medicines"]}]):"kidney-function-test"===e.stateParms.link_rewrite?(e.display_name="Kidney Function Test",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 250',e.display_image="assets/images/campaign/kidney-test.jpg",e.display_data=[{headline:"Tests required in case of:",data:["Urinary Tract Infection (UTI)","Diabetes","High blood pressure (BP)","Kidney Stones","Excessive use of pain killers","Frequent urination","Blood & pain while passing Urine","Swelling of hands and feet"]}]):"lipid-profile-test"===e.stateParms.link_rewrite?(e.display_name="Lipid Profile/Cholesterol",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 300',e.display_image="assets/images/campaign/lipid-profile.jpg",e.display_data=[{headline:"",data:["Measures abnormalities in: Cholesterol, Triglycerides","Assesses the risk of Heart Diseases","Monitors the effectiveness of the treatment"]}]):"thyroid-profile"===e.stateParms.link_rewrite?(e.display_name="Thyroid Function Test",e.display_order_price='Price Starting @  <span class="fontrupee rs_class" >`</span> 270',e.display_image="assets/images/campaign/Thyroid-test.jpg",e.display_data=[{headline:"Helps to Diagnose:",data:["Hyperthyroidism - with symptoms like: Weight Loss, Anxiety, Menstrual problems, Cardiac problems, Tremors","Hypothyroidism - with symptoms like: Weight gain, Lack of energy, Depression, Menstrual problems"]}]):"HbA1c"===e.stateParms.link_rewrite?(e.display_name="HbA1c Test",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 350',e.display_image="assets/images/campaign/HbA1c.jpg",e.display_data=[{headline:"",data:["Best test to detect Diabetes","Measures average blood glucose level for 3 months before the test","Monitors diabetes management over a period of time"]}]):"vitamin-test"===e.stateParms.link_rewrite?(e.display_name='Vitamin Test <span class="span_sub_test">(Vitamin D3, Vitamin B12)</span>',e.display_order_price='Package Startig @ <span class="fontrupee rs_class" >`</span> 999\t',e.display_image="assets/images/campaign/Vitamin-B12.jpg",e.display_data=[{headline:"Vitamin D test helps to detect:",data:["Vitamin D Deficiency","Bone Weakness","Bone malfunctions"]},{headline:"Vitamin B12 test helps to:",data:["Monitor the level of Vitamin B12 in the blood","Low levels of Vitamin B12 can cause: Nerve damage, Deterioration in brain functions, Decrease in blood cell production causing Anaemia"]}]):"senior-citizen-package"===e.stateParms.link_rewrite?(e.display_name="Senior Citizen Package",e.display_order_price='Health Check-up starting @ <span class="fontrupee rs_class" >`</span> 1299',e.display_image="assets/images/campaign/senior-citizen-package.jpg",e.display_data=[{headline:"",data:["Package especially designed for Senior Citizens.","Helps to diagnose common chronic illness like Diabetes, Cholesterol, Thyroid, Kidney & Liver problems.","Monitors effectiveness of ongoing treatment."]}]):"iron-studies"===e.stateParms.link_rewrite?(e.display_name="Iron Studies",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 390',e.display_image="assets/images/campaign/iron-studies.jpg",e.display_data=[{headline:"",data:["Measures Iron level in the body.","Deficiency of iron can cause Anaemia.","Excess iron can damage Heart, Pancreas, Liver & Skin"]}]):"complete-hemogram"===e.stateParms.link_rewrite?(e.display_name="Complete Hemogram",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 200',e.display_image="assets/images/campaign/complete-hemogram.jpg",e.display_data=[{headline:"Helps to detect & monitor treatment of:",data:["Anaemia","Infections","Inflammation","Leukaemia (Blood Cancer)"]}]):"dengue-test"===e.stateParms.link_rewrite?(e.display_name="Dengue Test",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 999',e.display_image="assets/images/campaign/Malaria.jpg",e.display_data=[{headline:"Includes 3 tests:",data:["Dengue IgG Antibody- for detection of past antibody","Dengue IgM Antibody  for detection of recent infection","Dengue NS1 Antigen - for detection on first day of fever"]}]):"cancer-test"===e.stateParms.link_rewrite?(e.display_name="Cancer Test",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 2899',e.display_image="assets/images/campaign/Cancer.jpg",e.display_data=[{headline:"",data:["PSA : To screen prostate cancer in males,<br>to monitor effectiveness of treatment","CA-125 : Tumor marker to diagnose Ovarian cancer","CA- 19.9 Serum : Tumor marker to diagnose Colon & Pancreatic Cancer","CA-15.3 : Tumor marker to diagnose Breast Cancer"]}]):"std-package"===e.stateParms.link_rewrite?(e.display_name="STD Package",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 899',e.display_image="assets/images/campaign/STD-Package.jpg",e.display_data=[{headline:"Healthians is officially recognized by NACO to conduct HIV test.<br>Includes tests to diagnose STDs like:",data:["Hepatitis B & C","Syphilis","HIV",'<span class="secret">* Complete secrecy will be maintained</span>']}]):"pancreas-pancreatitis-package"===e.stateParms.link_rewrite?(e.display_name="Pancreas | Pancreatitis Package",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 1399',e.display_image="assets/images/campaign/kidney-test.jpg",e.display_data=[{headline:"Includes tests to determine:",data:["Pancreatic disorders (damage or inflammation)","Pancreatitis"]}]):"arthritis-test"===e.stateParms.link_rewrite?(e.display_name="Arthritis Test",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 999',e.display_image="assets/images/campaign/Arthritis.jpg",e.display_data=[{headline:"Test required to:",data:["Know the root cause behind joint pains & swellings","Measure effectiveness of treatment of Rheumatoid Arthritis"]}]):"heart-checkup"===e.stateParms.link_rewrite?(e.display_name="Heart Checkup",e.display_order_price='Complete Package @ <span class="fontrupee rs_class" >`</span> 899',e.display_image="assets/images/campaign/heart.jpg",e.display_data=[{headline:"To screen the risk of Coronary Artery Diseases & Heart Attack<br>Recommended in cases of: ",data:["Obesity","Sedentary Lifestyle","Alcohol Consumption","High Homocysteine levels","Family history of heart diseases"]}]):"chikungunya-test"===e.stateParms.link_rewrite?(e.display_name="Chikungunya Test",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 600',e.display_image="assets/images/campaign/Malaria.jpg",e.display_data=[{headline:"",data:["Required for detection of Chikungunya infection"]}]):"typhoid-test"===e.stateParms.link_rewrite?(e.display_name="Typhoid Test",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 330',e.display_image="assets/images/campaign/Cancer.jpg",e.display_data=[{headline:"Recommended to diagnose typhoid fever<br> Medically advised incase of:",data:["High fever","Abdominal pain","Headaches","Rose spots"]}]):"malaria-test"===e.stateParms.link_rewrite?(e.display_name="Malaria Test",e.display_order_price='Price Starting @ <span class="fontrupee rs_class" >`</span> 350',e.display_image="assets/images/campaign/Malaria.jpg",e.display_data=[{headline:"",data:["Malarial Antigen","Vivax & Falciparum tests are a group of rapid diagnostic tests for quick diagnosis of malaria"]}]):"basic-female-hormones"===e.stateParms.link_rewrite?(e.display_name="Basic Female Hormones",e.display_order_price='Package Starting @ <span class="fontrupee rs_class" >`</span> 899',e.display_image="assets/images/campaign/Basic-Female-Hormones.jpg",e.display_data=[{headline:"This package monitors the important female hormones, levels of which are responsible for:",data:["Ovulation","Menstrual cycles","Fertilisation","Conception","Infertility cases"]}]):u.go("home"):u.go("home"),e.utmid=e.stateParms.utmid,"undefined"!=typeof e.stateParms.email&&(e.customerEmail=e.stateParms.email),"undefined"!=typeof e.stateParms.name&&(e.customerName=e.stateParms.name),"undefined"!=typeof e.stateParms.mobile&&(e.customerNo=e.stateParms.mobile),"ucb"==e.utmid){var p=document.createElement("script");p.type="text/javascript",p.id="ucb_id",document.getElementsByTagName("head")[0].append(p),angular.element("#ucb_id").append('(function(w, d, t, s, q, m, n) { if (w.utq) return; q = w.utq = function() { q.process ? q.process(arguments) : q.queue.push(arguments); }; q.queue = []; m = d.getElementsByTagName(t)[0]; n = d.createElement(t); n.src = s; n.async = true; m.parentNode.insertBefore(n, m); })(window, document, "script", "https://pixel-insight.ucweb.com/ucads/utracking.js");utq("init", "43282752605257935");utq("set", "trackurl", "pixel-insight.ucweb.com/intl_utrace");utq("track", "PageView");')}if("quora"==e.utmid){var p=document.createElement("script");p.type="text/javascript",p.id="quora_id",document.getElementsByTagName("head")[0].append(p);var g=document.createElement("noscript");g.type="text/javascript",g.id="noscript_quora_id",document.getElementsByTagName("head")[0].append(g),angular.element("#quora_id").append('!function(q,e,v,n,t,s){if(q.qp) return; n=q.qp=function(){n.qp?n.qp.apply(n,arguments):n.queue.push(arguments);}; n.queue=[];t=document.createElement(e);t.async=!0;t.src=v; s=document.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s);}(window, "script", "https://a.quora.com/qevents.js");qp("init", "bb9ba203758241a094941b86a559f3fe");qp("track", "ViewContent");'),angular.element("#noscript_quora_id").append('<img height="1" width="1" style="display:none" src="https://q.quora.com/_/ad/bb9ba203758241a094941b86a559f3fe/pixel?tag=ViewContent&noscript=1"/>')}}e.package_info="",e.booknow=!1,e.compaignmsg=!1,e.getCityList=function(){s.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data)})},e.getCityList(),e.sendDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadForm.city.$dirty=!0,e.addLeadForm.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&(e.utmid="web-health-test-campaign"),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,email:e.customerEmail,mobile:e.customerNo,city:e.City,source:"web"}};"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),a.data.message="Customer search for : "+e.display_name,localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;e.customerName="",e.customerEmail="",e.customerNo="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.addLeadForm.customeremail.$dirty=!1,e.compaignmsg=!0;var s=new Date,c=new Date(s.getTime()+864e5);if(m.any()?(document.cookie="ExitPopupMobileCookie=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)):(document.cookie="ExpirationCookieTest=1; expires="+c.toUTCString(),localStorage.setItem("isLeadCaptured",!0)),"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var u=n.serverUrl+"commonservice/getVendorPixel",p={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,u,p,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),l.location.href="package/healthians-full-body-checkup-with-thyroid-and-cbc"},1e4)}else alert(o.message)})}},e.showLeadMobileForm=!1,e.tabOnMobileLead=function(){e.showLeadMobileForm=!0},e.hideTabOnMobileLead=function(){e.showLeadMobileForm=!1,e.customerName="",e.customerNo="",e.addLeadFormMobile.name.$dirty=!1,e.addLeadFormMobile.customerno.$dirty=!1},e.sendLandingMobileDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadFormMobile.customerno.$dirty=!0,e.addLeadFormMobile.customerno.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadFormMobile.name.$dirty=!0,e.addLeadFormMobile.name.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"Name not enter"}),!1;if(void 0===e.City||""===e.City)return e.addLeadFormMobile.city.$dirty=!0,e.addLeadFormMobile.city.$invalid=!0,d.eventTrack("Validation Fail",{category:e.ga_category,label:"City not select"}),!1;if(e.stateParms&&(e.utmid=e.stateParms.utmid,""===e.utmid&&(e.utmid="web-health-test-campaign"),""!==e.utmid)){var a={data:{utm_id:e.utmid,name:e.customerName,mobile:e.customerNo,email:e.custEmail,city:e.City,source:"web"}};"web-campaign-adwords"===u.current.name&&(a.data.message="Customer search for : "+e.PackageList),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){var i=e.customerNo;if(e.customerName="",e.customerNo="",e.customerEmail="",e.addLeadFormMobile.name.$dirty=!1,e.addLeadFormMobile.customerno.$dirty=!1,e.addLeadFormMobile.email.$dirty=!1,e.compaignmsg=!0,e.showLeadMobileForm=!1,"Lead successfully inserted"===o.message){e.gtag_report_conversion(l.location.href),d.eventTrack("Lead Captured",{category:e.ga_category,label:i}),"undefined"!=typeof l.fbq&&l.fbq("track","Lead",a),"ucb"===e.utmid&&"undefined"!=typeof l.utq&&l.utq("trackCustom","GenerateLead"),"quora"===e.utmid&&"undefined"!=typeof l.qp&&l.qp("track","GenerateLead");var s=n.serverUrl+"commonservice/getVendorPixel",c={vendor_code:e.utmid,page_source:"landing",lead_id:o.lead_id};doPostWithOutToken(r,s,c,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?d.eventTrack("Vendor Publisher Pixel",{category:e.utmid,label:e.stateParms.publisher_id}):d.eventTrack("Vendor Pixel",{category:e.utmid})),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click()},15e3)})}else t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click()},1e4)}else alert(o.message)})}};var _=function(){"undefined"!=typeof url&&(l.location=url)};e.gtag_report_conversion=function(e){return"function"==typeof gtag&&gtag("event","conversion",{send_to:"AW-929610874/kgHcCP-t048BEPr4orsD",event_callback:_}),!1}}function homeController(e,t,a,o,r,i,a,n,s,l,d,c,u,m,p,g,f,b,h,y,k,v,S){e.forgotPwdModal=!1,e.signupModal=!1,e.changePwdModal=!1,e.forgotPwdOtpModal=!1,t.loggedin=!1,e.popularPackageList=!1,e.recommendedPkg=!1,e.signupmsg=!1,e.packageList=[],e.ageRange=[],e.ageRange1=[],e.cityObj=[],e.cityList=[],e.googleApiCity="",localStorage.removeItem("booking_id"),e.partialSignUpModal=!1,e.callbackMobileModal=!1,e.$emit("userLoggedInSuccess");var w={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return w.Android()||w.BlackBerry()||w.iOS()||w.Opera()||w.Windows()}};w.Android()&&y.getAppDivmobile()&&(e.appdivmobile=y.getAppDivmobile()),e.closeAppDivMobile=function(){y.setAppDivmobile(!1),e.appdivmobile=y.getAppDivmobile()},e.closeLoginModal=function(){e.loginfail=!1,e.signupError=!1,angular.element("#login_signup_modal").modal("hide")};var P=JSON.parse(localStorage.getItem("cityID"));if(null===P?(e.cityObj=[{city_id:"23",city_name:"Gurgaon"}],localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),e.searchCity="Gurgaon"):(e.cityObj=P,e.searchCity=e.cityObj[0].city_name),e.loginModal=!1,e.emailLogin=!1,e.showEmailLogin=function(){e.emailLogin=!0},e.showMobileLogin=function(){e.emailLogin=!1},e.showLoginForm=function(){e.loginModal=!0,e.emailLogin=!1,e.$broadcast("getCountryList")},e.hideLoginForm=function(){e.loginModal=!1},e.showSignupForm=function(){e.loginTab=!1,e.loginModal=!0,"Continue to Cart"!==e.signupText?e.signupText="Sign Up":e.signupText="Continue to Cart"},e.showSignUpSuccess=function(){e.signupmsg=!0},e.showPartialSignupForm=function(){e.partialSignUpModal=!0},e.hidePartialSignupForm=function(){e.partialSignUpModal=!1},e.backToLoginPartialSignupForm=function(){e.partialSignUpModal=!1,e.showLoginForm()},"true"==localStorage.getItem("isLogin")){t.loggedin=!0;var C=JSON.parse(localStorage.getItem("user")).name,F=JSON.parse(localStorage.getItem("user")).email,I=JSON.parse(localStorage.getItem("user")).age,T=JSON.parse(localStorage.getItem("user")).gender,D=JSON.parse(localStorage.getItem("user")).mobile;t.user_id=JSON.parse(localStorage.getItem("user")).user_id;var A=C.split(" ");t.user=A[0].charAt(0).toUpperCase().concat(A[0].substr(1)),null===localStorage.getItem("token")&&(localStorage.setItem("isLogin","false"),localStorage.removeItem("token"),localStorage.removeItem("customerDetails"),localStorage.removeItem("sample_date"),localStorage.removeItem("user"),localStorage.removeItem("coupondata"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("total_amount"),localStorage.removeItem("amountfinal"),localStorage.removeItem("userDetail"),localStorage.removeItem("Detailscustomer"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("address"),localStorage.removeItem("isSocialLogin"),localStorage.removeItem("booking_id"),localStorage.removeItem("makepayment_to_summary"),localStorage.removeItem("tempUser"),localStorage.removeItem("time_slot"),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("signUpCase"),t.loggedin=!1,h.getLoginStatus(function(e){"connected"==e.status&&h.logout(function(e){})})),""!==C&&null!==F&&""!==F&&""!==I&&""!==T&&""!==D&&null!==D&&"0"!==I&&null!==T||(e.showPartialSignupForm(),e.$broadcast("showPreviousUserDetailsCheck")),i.cartCount()}else null!==localStorage.getItem("showLoginDialog")&&"true"==localStorage.getItem("showLoginDialog")&&(e.showLoginForm(),localStorage.removeItem("showLoginDialog"));e.$on("showPreviousUserDetails",function(t,a){e.$broadcast("showPreviousUserDetailsCheck")}),angular.element(".modal-open").find(".modal-backdrop").remove(),"home"==o.current.name&&r.scrollTo(0,angular.element(document.getElementById("topdiv")).offsetTop),e.showForgotPwdForm=function(){e.loginModal=!1,e.forgotPwdModal=!e.forgotPwdModal},e.showChangePwdForm=function(){e.changePwdModal=!e.changePwdModal},e.showForgotPwdOtpForm=function(){e.forgotPwdOtpModal=!e.forgotPwdOtpModal},e.showHomeHealthkarma=function(){w.any()&&(e.hide_healthkarma_popup=!1)},e.pkglisting=function(){e.popularPackageList=!0,a("top-search"),w.any()&&(e.hide_healthkarma_popup=!0)},e.pkglisting1=function(){e.popularPackageList1=!0,e.popularPackageList=!1,w.any()&&(e.hide_healthkarma_popup=!0)},e.pkgPopularAnchor=function(){a("popular-pkg")},e.labHealthiansAnchor=function(){a("labs-healthians")},e.closePopularList=function(){e.popularPackageList=!1,e.hide_healthkarma_popup=!1},e.closePopularList1=function(){e.popularPackageList1=!1,e.hide_healthkarma_popup=!1},e.showLoginModal=function(){e.loginModal=!0,e.forgotPwdModal=!1},e.getAddress=function(){var t=p.defer();return navigator.geolocation.getCurrentPosition(function(a){var o={lat:a.coords.latitude,lng:a.coords.longitude},r="https://maps.googleapis.com/maps/api/geocode/json?latlng="+o.lat+","+o.lng;doGet(n,r,function(a){if(a.results&&a.results.length>0){var o=a.results[0].address_components;o.forEach(function(a,o){"locality"==a.types[0]&&(e.googleApiCity=a.long_name,b.eventTrack("Google Location of Website",{category:"Website_location",label:e.googleApiCity}),t.resolve(e.googleApiCity))})}})}),t.promise},e.getCityList=function(){i.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data)})},e.findCityDetail=function(t){e.searchCity=t,e.cityId()},e.loadchat=function(){i.chatwcp()},e.cityId=function(){e.cityObj=[];for(var t=0;t<e.cityList.length;t++)e.searchCity===e.cityList[t].city_name&&(e.cityObj.push(e.cityList[t]),localStorage.setItem("cityID",JSON.stringify(e.cityObj)),e.getPopularPackagesList(),e.getPopularTestsList())};e.getAddress().then(function(t){n({method:"GET",url:f.serverUrl+"commonservice/city_detail",params:{city_name:e.googleApiCity}}).success(function(t){t.data&&(e.cityObj=[],e.searchCity=t.data[0].city_name,b.eventTrack("Healthians Location of Website",{category:"Website_location",label:t.data}),e.cityObj.push(t.data[0]),localStorage.setItem("cityID",JSON.stringify(e.cityObj)))})});e.getCityList(),e.tags=[],e.loadTags=function(t){return n({method:"GET",url:f.couponUrl+"webv1/web_api/packageSuggestion",params:{keyword:t,city_id:JSON.parse(localStorage.getItem("cityID"))[0].city_id},headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(t){return null==t.data?(w.any()&&(e.hide_healthkarma_popup=!0),t.data):(w.any()&&(e.closePopularList(),e.hide_healthkarma_popup=!0),t.data)})},e.searchResult=function(){if(0!==e.tags.length){if(l.setSearchPackages(e.tags),"undefined"!=typeof r.fbq){var t=(e.tags.length,[]),a=[],i="product";e.tags.forEach(function(e,o){t.push(e.id),a.push(e.text)});var n=[];n.content_ids=t,n.content_type=i,n.content_name=a,n.content_category="Search > Home Page",r.fbq("track","Search",n)}b.eventTrack("Search From Home Page",{category:"Search",label:e.tags}),d(function(){o.go("orderbook")},500)}},e.findIndex=function(t,a){var o=-1;e.tags.forEach(function(e,a){e.text===t&&(o=a)}),a(o)},e.checkSelection=function(t){var a=$(t.target).find("a").text()||$(t.target).text(),o=$(t.target).find("a").attr("id")||$(t.target).attr("id"),r=$(t.target).closest("li").hasClass("selectedtest");if(r)e.findIndex(a,function(a){a!==-1&&e.tags.splice(a,1),$(t.target).closest("li").removeClass("selectedtest")});else{var i={text:a,id:o};e.tags.push(i),$(t.target).closest("li").addClass("selectedtest")}},t.addTags=function(e){},t.removeTag=function(e){},e.getPopularPackagesList=function(){n({method:"GET",url:f.couponUrl+"webv1/web_api/getPopularPackages",params:{city:JSON.parse(localStorage.getItem("cityID"))[0].city_name}}).success(function(t){t.data&&(e.popularPackages1=t.data,e.packageList=e.popularPackages1,e.ini())})},e.getPopularPackagesList(),e.getPopularTestsList=function(){n({method:"GET",url:f.couponUrl+"webv1/web_api/getPopulerTests",params:{city:JSON.parse(localStorage.getItem("cityID"))[0].city_name}}).success(function(t){t.data&&(e.popularTest1=t.data)})},e.getPopularTestsList(),e.downloadreport=function(){s.path("/download-file")},e.sigOut=function(){var e=JSON.parse(localStorage.getItem("user")).user_id;i.logout({source:"web",user_id:e},function(e){e.status&&(localStorage.setItem("isLogin","false"),localStorage.removeItem("token"),localStorage.removeItem("customerDetails"),localStorage.removeItem("sample_date"),localStorage.removeItem("user"),localStorage.removeItem("coupondata"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("total_amount"),localStorage.removeItem("amountfinal"),localStorage.removeItem("userDetail"),localStorage.removeItem("Detailscustomer"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("address"),localStorage.removeItem("isSocialLogin"),localStorage.removeItem("booking_id"),localStorage.removeItem("makepayment_to_summary"),localStorage.removeItem("tempUser"),localStorage.removeItem("time_slot"),localStorage.removeItem("showLoginDialog"),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("selectPatient"),localStorage.removeItem("signUpCase"),s.path("/"),t.loggedin=!1,t.user="",h.getLoginStatus(function(e){"connected"==e.status&&h.logout(function(e){})}))})},e.pkgSearch=function(t){e.tags[0]={id:t.package_id,text:t.package_name},l.setSearchPackages(e.tags),s.path("/orderbook")},e.myBooking=function(){s.path("/dashboard"),s.hash("mybooking")},e.ini=function(){setTimeout(function(){w.any()?$(".slider_package").slick({dots:!1,infinite:!0,autoplay:!0,arrows:!0,autoplaySpeed:3e3,speed:800,slidesToShow:1,adaptiveHeight:!1,lazyLoad:"ondemand"}):$(".slider_package").slick({dots:!1,infinite:!0,autoplay:!0,arrows:!0,autoplaySpeed:3e3,speed:800,slidesToShow:3,adaptiveHeight:!1,lazyLoad:"ondemand"})},70),setTimeout(function(){$(".slider_package").slick("refresh")},300)},e.callbackmsg=!1,e.callBackPhone=function(){if("true"==localStorage.getItem("isLogin")){var a=JSON.parse(localStorage.getItem("user")),o=a.mobile,r={data:{customer_mobile:o,app_version:"46",source:"web"}};n({method:"POST",url:f.couponUrl+"customer/account/clickToCallUrl",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(t){t.status&&(e.callbackmsg=!0,d(function(){e.callbackmsg=!1,$(".modal.in").find("button.close").click()},9e3))})}else e.callbackMobileModal=!0,t.$broadcast("open_callbackpopup"),e.callbackopt_error=!1,e.mobile_read_only=!1,e.callbackSuccess=!1},e.$on("openSignupModalCallback",function(t,a){e.showSignupForm()}),e.coupondata={},localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),e.getCartTotalTest=function(){"true"==localStorage.getItem("isLogin")&&(e.cartData=y.getCartDetails(),t.totalCartTest=0,e.cartData.forEach(function(e,a){e.hasOwnProperty("newpkg")&&(t.totalCartTest+=e.newpkg.length)}))},e.getCartTotalTest(),e.couponcopy=function(){r.alert("Coupon code copied.")},s.search().vendor_code&&localStorage.setItem("vendor_code",s.search().vendor_code),s.search().admitad_uid&&localStorage.setItem("admitad_uid",s.search().admitad_uid),e.exitError=!1;var L=0;if(e.mobileExitPopupDiv=!1,w.any()){e.mobileview=!0;var N=["cart","final_checkout","orderbook","package","profile","parameter","user_selection_cart","csat","healthkarma","healthkarma-v2","phlebo-route","paytm"];d(function(){_.contains(N,o.current.name)||document.cookie&&document.cookie.indexOf("ExitPopupMobileCookie=1")!=-1||(e.mobileExitPopupDiv=!0,
localStorage.setItem("isLeadCaptured",!1))},4e4)}else e.mobileview=!1,angular.element(document).mousemove(function(t){e.exitError=!1,angular.element("#exitpopup").css("left",r.innerWidth/2-$("#exitpopup").width()/2),angular.element("#exitpopup").css("top",r.innerHeight/3-$("#exitpopup").height()/2),(t.clientY<=5||t.pageY<L)&&(document.cookie&&document.cookie.indexOf("ExpirationCookieTest=1")!=-1||d(function(){localStorage.setItem("isLeadCaptured",!1),angular.element("#exitpopup_bg").fadeIn(100),angular.element("#exitpopup").fadeIn(100),b.eventTrack("Exit Popup - View",{category:"Exit Pop up"}),angular.element("#customerno").focus(),L=t.pageY},1e4))});e.closeMobileExitPopup=function(){b.eventTrack("Close",{category:"Mobile Exit Pop up"}),e.mobileExitPopupDiv=!1;var t=new Date,a=new Date(t.getTime()+864e5);document.cookie="ExitPopupMobileCookie=1; expires="+a.toUTCString()},e.closeExitPopup=function(){angular.element("#exitpopup_bg").fadeOut(0),angular.element("#exitpopup").slideUp(0),b.eventTrack("Close",{category:"Exit Pop up"});var e=new Date,t=new Date(e.getTime()+864e5);document.cookie="ExpirationCookieTest=1; expires="+t.toUTCString()},angular.element("#exitpopup_bg").click(function(){e.closeExitPopup()}),angular.element("#closemodal2").click(function(){e.closeExitPopup()}),e.changeExitPopupButtonColor=function(){e.customerNo&&(10!==e.customerNo.length||isNaN(e.customerNo)||void 0===e.customerNo||""===e.customerNo?(angular.element("#exitpopupsubmitbtn").css("background","#b7b7b7"),angular.element("#exitpopupsubmitbtn").css("border-bottom","1px solid #cecece"),angular.element("#exitpopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#exitpopupsubmitbtn").css("background","#e1530d"),angular.element("#exitpopupsubmitbtn").css("border-bottom","1px solid #eaeaea"),angular.element("#exitpopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,b.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Mobile no. not enter"}),!1;if(isNaN(e.customerNo))return e.mobile_valid_error=!0,e.mobile_valid_msg="Enter valid Mobile number",b.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Not a number"}),d(function(){e.mobile_valid_error=!1},4e3),!1;if(10!==e.customerNo.length)return e.mobile_valid_error=!0,e.mobile_valid_msg="Mobile number should be of 10 digits",b.eventTrack("Validation Fail",{category:"Exit Pop up",label:"Not 10 digits"}),d(function(){e.mobile_valid_error=!1},4e3),!1;var t={data:{utm_id:"exitpopup",name:e.customerName,mobile:e.customerNo,originator:"home",source:"web"}};localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=f.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(n,a,t,"",function(a){a.status?(e.exitError=!0,"Lead successfully inserted"===a.message&&(b.eventTrack("Lead Captured",{category:"Exit Form",label:e.customerNo}),"undefined"!=typeof r.fbq&&r.fbq("track","Lead",t)),e.customerName="",e.customerNo="",e.Message="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,d(function(){e.exitError=!1,e.closeExitPopup()},4e3)):r.alert(a.message)})},e.changeMobileExitPopupButtonColor=function(){e.exmcustomerNo&&(10!==e.exmcustomerNo.length||isNaN(e.exmcustomerNo)||void 0===e.exmcustomerNo||""===e.exmcustomerNo?(angular.element("#exitmobilepopupsubmitbtn").css("background","#b7b7b7"),angular.element("#exitmobilepopupsubmitbtn").css("border-bottom","1px solid #cecece"),angular.element("#exitmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#exitmobilepopupsubmitbtn").css("background","#e1530d"),angular.element("#exitmobilepopupsubmitbtn").css("border-bottom","1px solid #eaeaea"),angular.element("#exitmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.exitMobileError=!1,e.sendMobileExitPopupDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.exmcustomerNo||""===e.exmcustomerNo)return e.addMobileExitPopupLeadForm.exmcustomerno.$dirty=!0,e.addMobileExitPopupLeadForm.exmcustomerno.$invalid=!0,b.eventTrack("Validation Fail",{category:"Mobile Exit Pop up",label:"Mobile no. not enter"}),!1;if(isNaN(e.exmcustomerNo))return e.mobile_valid_error=!0,e.mobile_valid_msg="Enter valid Mobile number",b.eventTrack("Validation Fail",{category:"Mobile Exit Pop up",label:"Not a number"}),d(function(){e.mobile_valid_error=!1},4e3),!1;if(10!==e.exmcustomerNo.length)return e.mobile_valid_error=!0,e.mobile_valid_msg="Mobile number should be of 10 digits",b.eventTrack("Validation Fail",{category:"Mobile Exit Pop up",label:"Not 10 digits"}),d(function(){e.mobile_valid_error=!1},4e3),!1;var t={data:{utm_id:"mobileexitpopup",name:e.exmcustomerName,mobile:e.exmcustomerNo,originator:"home",source:"web"}};localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=f.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(n,a,t,"",function(a){a.status?(e.exitMobileError=!0,"Lead successfully inserted"===a.message&&(b.eventTrack("Lead Captured",{category:"Mobile Exit Form",label:e.exmcustomerNo}),"undefined"!=typeof r.fbq&&r.fbq("track","Lead",t)),e.exmcustomerName="",e.exmcustomerNo="",e.addMobileExitPopupLeadForm.exmname.$dirty=!1,e.addMobileExitPopupLeadForm.exmcustomerno.$dirty=!1,d(function(){e.exitMobileError=!1,e.closeMobileExitPopup()},4e3)):r.alert(a.message)})},e.habitRisk=function(){S.getAllHabitsDetails(function(t){t.status===!0&&(e.habitList=t.data,w.any()?$(".habit-list").slick({dots:!1,infinite:!0,autoplay:!0,arrows:!0,autoplaySpeed:3e3,speed:800,slidesToShow:2,adaptiveHeight:!0,lazyLoad:"ondemand"}):$(".habit-list").slick({dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:5e3,speed:500,slidesToShow:5,adaptiveHeight:!0,lazyLoad:"ondemand"}),setTimeout(function(){$(".habit-list").slick("refresh")},300))}),S.getAllRiskDetails(function(t){t.status===!0&&(e.riskgroups=t.data,w.any()?$(".riskarea-list").slick({dots:!1,infinite:!0,autoplay:!0,arrows:!0,autoplaySpeed:3e3,speed:800,slidesToShow:2,adaptiveHeight:!0,lazyLoad:"ondemand"}):$(".riskarea-list").slick({dots:!1,infinite:!0,autoplay:!0,autoplaySpeed:5e3,speed:300,slidesToShow:5,adaptiveHeight:!0,lazyLoad:"ondemand"}),setTimeout(function(){$(".riskarea-list").slick("refresh")},300))})},e.riskDetails=function(e,t,a){b.eventTrack("Click on Risk",{category:"Browse By Risk",label:t}),r.open("/risk/"+a.toLowerCase(),"_blank")},e.habitDetails=function(e,t,a){b.eventTrack("Click on Habit",{category:"Browse By Habit",label:t}),r.open("/habit/"+a.toLowerCase(),"_blank")}}function homeControllerLogin(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b,h,y,k){e.loginfail=!1,t.signupmsgnotverified=!1,e.signupError=!1,e.signupErrorMsg="",e.loginOTPButton=!1,e.social_login_info={},e.showLoginLoader=!1;var v={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()}};e.checkBasicMandatoryUserInfo=function(){var t=JSON.parse(localStorage.getItem("user")).name,a=JSON.parse(localStorage.getItem("user")).email,o=JSON.parse(localStorage.getItem("user")).age,r=JSON.parse(localStorage.getItem("user")).gender,n=JSON.parse(localStorage.getItem("user")).mobile;e.closeLoginModal(),""===t||null===a||""===a||""===o||""===r||""===n||null===n||"0"===o||null===r?(e.$parent.showPartialSignupForm(),e.$emit("showPreviousUserDetails")):"orderbook"===f.current.name||"package"===f.current.name||"parameter"===f.current.name||"profile"===f.current.name||"risk"===f.current.name||"habit"===f.current.name?e.$emit("showPatientDialog"):"feedback"===f.current.name?e.$emit("showUserInfoFeedback"):"reset_password"===f.current.name&&i.path("/")},e.selected_countryCode={countries_name:"India",countries_isd_code:"91",image_path:"https://helma.healthians.com/stationery/flags/in.png"},e.getCountryList=function(){"undefined"==typeof e.country_list&&r({method:"GET",url:g.couponUrl+"webv1/web_api/getCountryCode"}).success(function(t){t.status&&(e.country_list=t.data)})},e.setCountryCode=function(t,a){e.selected_countryCode={countries_name:"India",countries_isd_code:t,image_path:a}},e.$on("getCountryList",function(t,a){e.getCountryList()}),e.login=function(){if(e.loginFormSubmitted=!1,e.loginfail=!1,void 0===e.loginForm.userEmail||""===e.loginForm.userEmail)return e.loginForm.useremail.$dirty=!0,e.loginForm.useremail.$invalid=!0,e.loginForm.useremail.$error.required=!0,a("useremail"),!1;if(void 0===e.loginForm.userPwd||""===e.loginForm.userPwd)return e.loginForm.userpwd.$dirty=!0,e.loginForm.userpwd.$invalid=!0,e.loginForm.userpwd.$error.required=!0,a("userpwd"),!1;e.loginForm.remember?(p("useremail",e.loginForm.userEmail),p("userpwd",e.loginForm.userPwd)):(p("useremail",""),p("userpwd",""),e.loginForm.remember=!1),t.email=e.loginForm.userEmail,t.password=e.loginForm.userPwd;var r={email_or_mobile:e.loginForm.userEmail,password:e.loginForm.userPwd,source:"web"};v.any()?r.device_source="mobile":r.device_source="web";var n={data:r};e.showLoginLoader=!0,o.userLogin(n,function(a){if(e.$emit("userLoggedInSuccess"),a.status===!0){y.setUserProperties({userId:a.data.user_id}),localStorage.setItem("user",JSON.stringify(a.data)),localStorage.setItem("isLogin","true"),t.loggedin=!0,localStorage.setItem("token",a.data.token);var o=JSON.parse(localStorage.getItem("user")).name,r=o.split(" ");t.user=r[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("#login_signup_modal").modal("hide"),angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),localStorage.removeItem("showLoginDialog"),"orderbook"===f.current.name||"package"===f.current.name||"parameter"===f.current.name||"profile"===f.current.name||"risk"===f.current.name||"habit"===f.current.name?e.$emit("showPatientDialog"):"feedback"===f.current.name?e.$emit("showUserInfoFeedback"):"reset_password"===f.current.name&&i.path("/"),e.checkBasicMandatoryUserInfo()}else e.loginfail=!0,y.eventTrack("Showed Error Invalid Credentials",{category:"Login"});e.showLoginLoader=!1,s(function(){e.loginfail=!1},8e3)})},e.rememberMe=function(){null!==p("useremail")&&null!==p("userpwd")&&""!==p("useremail")&&""!==p("userpwd")&&(e.loginForm.remember=!0,e.loginForm.userEmail=p("useremail"),e.loginForm.userPwd=p("userpwd"))},e.sendVerificationLink=function(){doPostWithOutToken(r,g.serverUrl+"commonservice/accountActivationLink",{email:t.email,password:t.password},"",function(e){}),$(".modal.in").find("button.close").click()},e.sigup=function(){if(e.signupError=!1,e.signupFormSubmitted=!1,void 0===e.signupForm.userName||""===e.signupForm.userName)return e.signupForm.username.$dirty=!0,e.signupForm.username.$invalid=!0,e.signupForm.username.$error.required=!0,y.eventTrack("Showed Error for Validation Failure",{category:"Signup",label:"Name"}),a("username"),!1;if(void 0===e.signupForm.userEmail||""===e.signupForm.userEmail)return e.signupForm.useremail.$dirty=!0,e.signupForm.useremail.$invalid=!0,e.signupForm.useremail.$error.required=!0,y.eventTrack("Showed Error for Validation Failure",{category:"Signup",label:"Email"}),a("useremail"),!1;if(void 0===e.signupForm.userPhone||""===e.signupForm.userPhone)return e.signupForm.userphone.$dirty=!0,e.signupForm.userphone.$invalid=!0,e.signupForm.userphone.$error.required=!0,y.eventTrack("Showed Error for Validation Failure",{category:"Signup",label:"Phone"}),a("userphone"),!1;if(void 0===e.signupForm.userAge||""===e.signupForm.userAge)return e.signupForm.userage.$dirty=!0,e.signupForm.userage.$invalid=!0,e.signupForm.userage.$error.required=!0,y.eventTrack("Showed Error for Validation Failure",{category:"Signup",label:"Age"}),a("userage"),!1;if(void 0===e.signupForm.userGender||""===e.signupForm.userGender)return e.signupForm.usergender.$dirty=!0,e.signupForm.usergender.$invalid=!0,e.signupForm.usergender.$error.required=!0,y.eventTrack("Showed Error for Validation Failure",{category:"Signup",label:"Gender"}),a("usergender"),!1;var r={name:e.signupForm.userName,email:e.signupForm.userEmail,contact_number:e.signupForm.userPhone,age:e.signupForm.userAge,gender:e.signupForm.userGender,dob:e.signupForm.userDOB};v.any()?r.source="mobile":r.source="web",_.isEmpty(e.social_login_info)||(r=_.extend(r,e.social_login_info)),"undefined"!=typeof m.fbq&&m.fbq("track","CompleteRegistration",r),o.userSignup(r,function(a){if("success"==a.data.status){y.setUserProperties({userId:a.data.data.user_id}),localStorage.setItem("user",JSON.stringify(a.data.data)),localStorage.setItem("isLogin","true"),localStorage.setItem("token",a.data.data.token),t.loggedin=!0;var o=JSON.parse(localStorage.getItem("user")).name,r=o.split(" ");t.user=r[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),e.closeLoginModal(),"orderbook"===f.current.name||"package"===f.current.name||"parameter"===f.current.name||"profile"===f.current.name||"risk"===f.current.name||"habit"===f.current.name?(e.$parent.setHeader(),e.$emit("showPatientDialog")):(e.signupmsg=!0,e.$parent.showSignUpSuccess())}"failed"==a.data.status&&(y.eventTrack("Showed Error for Validation Failure",{category:"Signup"}),e.signupError=!0,e.signupErrorMsg=a.data.message),s(function(){e.signupError=!1,e.signupErrorMsg=""},8e3)})},e.$watch(function(){return b.isReady()},function(t){t&&(e.facebookReady=!0)}),e.social_login_error=!1,e.FBLogin=function(){p("useremail",""),p("userpwd","");var t=o.fblogin();t.then(function(t){"undefined"!=typeof t.email&&("male"===t.gender?t.gender="M":t.gender="F",e.sociallogin(t))})},e.sociallogin=function(a){e.showLoginLoader=!0;var o={data:a};o.data.source="web",v.any()?o.data.device_source="mobile":o.data.device_source="web",r({method:"POST",url:g.couponUrl+"customer/account/checkLogin",data:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(a){if(a.status){if(e.$emit("userLoggedInSuccess"),a.signUp===!1){localStorage.setItem("signUpCase","false"),y.setUserProperties({userId:a.data.user_id}),localStorage.setItem("user",JSON.stringify(a.data)),localStorage.setItem("isLogin","true"),t.loggedin=!0,localStorage.setItem("token",a.data.token);var o=JSON.parse(localStorage.getItem("user")).name,r=o.split(" ");t.user=r[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("#login_signup_modal").modal("hide"),angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),localStorage.removeItem("showLoginDialog"),e.checkBasicMandatoryUserInfo()}else{y.setUserProperties({userId:a.data.user_id}),localStorage.setItem("user",JSON.stringify(a.data)),localStorage.setItem("isLogin","true"),localStorage.setItem("signUpCase","true"),t.loggedin=!0,localStorage.setItem("token",a.data.token);var o=JSON.parse(localStorage.getItem("user")).name,r=o.split(" ");t.user=r[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("#login_signup_modal").modal("hide"),angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),localStorage.removeItem("showLoginDialog"),e.checkBasicMandatoryUserInfo()}e.showLoginLoader=!1}})},e.calculateAge=function(t){var a=moment(t,"DD/MM/YYYY").format("M"),o=(moment(t,"DD/MM/YYYY").format("D"),moment(t,"DD/MM/YYYY").format("Y")),r=moment().month()+1,i=new Date,n=new Date(t),s=i.getFullYear()-o;i.getMonth()-n.getMonth();s>0&&(r>=a?e.signupForm.userAge=s:e.signupForm.userAge=s-1),angular.element("#userage").val(e.signupForm.userAge)},e.getDOB=function(t,a){var o=moment().subtract(t,"years").format("DD/MM/YYYY");if(e.signupForm.userDOB=o,angular.element("#userdob").datepicker({endDate:"-182d"}).datepicker("update",e.signupForm.userDOB).on("changeDate",function(){e.calculateAge(e.signupForm.userDOB)}),e.type="estimated",e.loggedin===!0){var r=JSON.parse(localStorage.getItem("user"));r.relatives.forEach(function(o,r){o.name===a&&(o.age=t,o.dob=e.signupForm.userDOB)}),localStorage.setItem("user",JSON.stringify(r))}},e.closeLoginModal=function(){e.showLoginLoader=!1,e.loginfail=!1,e.signupError=!1,e.hideOTP(),angular.element("#login_signup_modal").modal("hide"),angular.element("#userdob").val("").datepicker("update"),e.loginForm.userEmail="",e.loginForm.userPwd="",e.loginForm.useremail.$dirty=!1,e.loginForm.userpwd.$dirty=!1,e.selected_countryCode={countries_name:"India",countries_isd_code:"91",image_path:"https://helma.healthians.com/stationery/flags/in.png"}},e.showOTP=!1,e.loginFormSubmitted=!1,e.hideOTP=function(){e.showOTP=!1,e.loginOTPButton=!1,e.loginMobileForm.userOTP="",e.loginMobileForm.userotp.$dirty=!1},e.resend_callback_opt=function(){if(e.callbackopt_error=!1,e.callbackopt_message="",e.callbackopt_success=!1,e.callbackopt_success_message="",void 0===e.loginMobileForm.customerNo||""===e.loginMobileForm.customerNo)return e.loginMobileForm.customerno.$dirty=!0,e.loginMobileForm.customerno.$invalid=!0,e.showOTP=!1,!1;if(e.loginMobileForm.customerNo&&e.showOTP){var t={mobile_number:e.loginMobileForm.customerNo,template:"login",countryCode:e.selected_countryCode.countries_isd_code};y.eventTrack("Resend OTP",{category:"Login",label:e.loginMobileForm.customerNo});var o=g.serverUrl+"commonservice/resend_otp_for_callback";doPostWithOutToken(r,o,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_success_message=t.message,e.loginMobileForm.userOTP="",e.loginMobileForm.userotp.$dirty=!1,a("userotp"),s(function(){e.callbackopt_error=!1,e.callbackopt_message="",e.callbackopt_success=!1,e.callbackopt_success_message=""},3e3)):(e.callbackopt_error=!0,e.callbackopt_message=t.message,s(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}},e.loginWithMobile=function(){if(void 0===e.loginMobileForm.customerNo||""===e.loginMobileForm.customerNo)return e.loginFormSubmitted=!0,e.loginMobileForm.customerno.$dirty=!0,e.loginMobileForm.customerno.$invalid=!0,e.showOTP=!1,!1;if("91"==e.selected_countryCode.countries_isd_code){if(10!=e.loginMobileForm.customerNo.length)return e.showOTP=!1,m.alert("Please enter valid mobile number"),!1;e.loginOTPButton=!1,e.showOTP=!0}else e.loginOTPButton=!1,e.showOTP=!0;var t={mobile_number:e.loginMobileForm.customerNo,template:"login",countryCode:e.selected_countryCode.countries_isd_code};y.eventTrack("Request OTP",{category:"Login",label:e.loginMobileForm.customerNo});var o=g.serverUrl+"commonservice/generate_otp_for_callback";doPostWithOutToken(r,o,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_error=!1,e.callbackopt_success_message="OTP has been sent to your above mobile number."):(e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message),a("userotp"),s(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},4e3)})},e.loginWithOTPMobile=function(){if(void 0===e.loginMobileForm.userOTP||""===e.loginMobileForm.userOTP)return e.loginMobileForm.userotp.$dirty=!0,e.loginMobileForm.userotp.$invalid=!0,!1;e.loginOTPButton=!0;var i={data:{mobileNumber:e.loginMobileForm.customerNo,source:"web",device_source:"",countryCode:e.selected_countryCode.countries_isd_code,otp:e.loginMobileForm.userOTP}};v.any()?i.data.device_source="mobile":i.data.device_source="web",r({method:"POST",url:g.couponUrl+"customer/account/checkLogin",data:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(r){if(r.status)if(e.$emit("userLoggedInSuccess"),e.loginMobileForm.customerNo="",e.loginMobileForm.customerno.$dirty=!1,e.loginMobileForm.userOTP="",e.loginMobileForm.userotp.$dirty=!1,e.showOTP=!1,r.signUp===!1){localStorage.setItem("signUpCase","false"),y.setUserProperties({userId:r.data.user_id}),"undefined"!=typeof m.clevertap&&m.clevertap.profile.push({Site:{Name:r.data.name,Identity:r.data.user_id,Email:r.data.email,Phone:"+91"+r.data.mobile,"MSG-email":!0,"MSG-push":!0}}),localStorage.setItem("user",JSON.stringify(r.data)),localStorage.setItem("isLogin","true"),t.loggedin=!0,localStorage.setItem("token",r.data.token);var i=JSON.parse(localStorage.getItem("user")).name,n=i.split(" ");t.user=n[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("#login_signup_modal").modal("hide"),angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),localStorage.removeItem("showLoginDialog"),e.loginOTPButton=!1,t.totalCartTest<=0&&o.cartCount(),e.checkBasicMandatoryUserInfo()}else{y.setUserProperties({userId:r.data.user_id}),localStorage.setItem("user",JSON.stringify(r.data)),localStorage.setItem("isLogin","true"),localStorage.setItem("signUpCase","true"),t.loggedin=!0,localStorage.setItem("token",r.data.token);var i=JSON.parse(localStorage.getItem("user")).name,n=i.split(" ");t.user=n[0],t.user_id=JSON.parse(localStorage.getItem("user")).user_id,angular.element("#login_signup_modal").modal("hide"),angular.element("body").removeClass("modal-open"),angular.element("body").css("padding-right","0px"),localStorage.removeItem("showLoginDialog"),e.loginOTPButton=!1,e.checkBasicMandatoryUserInfo()}else e.loginMobileForm.userOTP="",e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=r.message,e.loginOTPButton=!1,a("userotp"),s(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},5e3);e.showLoginLoader=!1,e.loginOTPButton=!1}).error(function(t){e.loginMobileForm.userOTP="",e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message,e.loginOTPButton=!1,a("userotp"),s(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},5e3)})}}function homeControllerForgotpwd(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g){e.forgotdata=!1,e.forgotdataInvalidEmail=!1,e.loaderVar=!1,e.hideContinue=!0,t.mobile,e.forgotPassword=function(){if(e.forgotpwdFormSubmitted=!1,e.forgotdataInvalidEmail=!1,void 0===e.forgotpwdForm.userEmail||""===e.forgotpwdForm.userEmail)return e.forgotpwdForm.useremail.$dirty=!0,e.forgotpwdForm.useremail.$invalid=!0,r("useremail"),!1;var a={email:e.forgotpwdForm.userEmail};e.hideContinue=!1,e.loaderVar=!0,t.mobile=e.forgotpwdForm.userEmail,i.userForgotPwd(a,function(t){t.status===!0?"Otp send successfully"==t.message?(e.forgotpwdForm.userEmail="",e.forgotpwdForm.useremail.$dirty=!1,e.forgotdata=!1,e.forgotdataInvalidEmail=!1,e.showForgotPwdForm(),e.showForgotPwdOtpForm()):(e.forgotdata=!0,e.msg=t.message,e.forgotdataInvalidEmail=!1,e.close()):(e.forgotdataInvalidEmail=!0,e.forgotdata=!1),e.loaderVar=!1,e.hideContinue=!0,d(function(){e.forgotdata=!1,e.forgotdataInvalidEmail=!1},3e3)})},e.close=function(){d(function(){e.forgotdata=!1,e.forgotdataInvalidEmail=!1,e.forgotpwdForm.userEmail="",e.forgotpwdForm.useremail.$dirty=!1,e.msg="",$(".modal.in").find("button.close").click(),angular.element(".modal.in").find("#closemodal").click()},6e3)},e.otpVerify=function(){return e.otpFormSubmitted=!1,void 0===e.otpForm.userOTP||""===e.otpForm.userOTP?(e.otpForm.userotp.$dirty=!0,e.otpForm.userotp.$invalid=!0,e.otpForm.userotp.$error.required=!0,r("userotp"),!1):void doPostWithOutToken(n,o.serverUrl+"commonservice/otp_validate",{mobile:t.mobile,otp:e.otpForm.userOTP},"",function(t){if(1==t.status){var a=t.data.hash;a&&(window.location.href="/reset_password/"+a)}else e.forgotdataInvalidEmail=!0,e.close()})},e.callbackopt_error=!1,e.mobile_read_only=!1,e.callbackSuccess=!1,e.callbackopt_success=!1,e.tempMobileNo="",e.$on("open_callbackpopup",function(t,a){void 0!==e.mobileCallbackForm&&(e.mobileCallbackForm.userPhone="",e.mobileCallbackForm.userphone.$dirty=!1)}),e.backToMobile=function(){e.mobile_read_only=!1,e.callbackopt_error=!1},e.submitCallback=function(){if(e.mobileCallbackFormSubmitted=!1,void 0===e.mobileCallbackForm.userPhone||""===e.mobileCallbackForm.userPhone)return e.mobileCallbackForm.userphone.$dirty=!0,e.mobileCallbackForm.userphone.$invalid=!0,e.mobileCallbackForm.userphone.$error.required=!0,r("userphone"),!1;if(e.mobileCallbackForm.userPhone){var t={mobile_number:e.mobileCallbackForm.userPhone,template:"callback"},a=o.serverUrl+"commonservice/generate_otp_for_callback";doPostWithOutToken(n,a,t,"",function(t){1==t.status?(e.mobile_read_only=!0,e.callbackopt_error=!1):(e.callbackopt_error=!0,e.callbackopt_message=t.message,d(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}},e.verify_callback_otp=function(){if(e.mobileCallbackFormSubmitted=!1,void 0===e.mobileCallbackForm.userOTP||""===e.mobileCallbackForm.userOTP)return e.mobileCallbackForm.userotp.$dirty=!0,e.mobileCallbackForm.userotp.$invalid=!0,e.mobileCallbackForm.userotp.$error.required=!0,r("userotp"),!1;if(e.mobileCallbackForm.userPhone){var t={mobile_number:e.mobileCallbackForm.userPhone,otp:e.mobileCallbackForm.userOTP},a=o.serverUrl+"commonservice/validate_otp_for_callback";doPostWithOutToken(n,a,t,"",function(a){if(1==a.status){var r={data:{customer_mobile:t.mobile_number,app_version:"46",source:"web"}};n({method:"POST",url:o.couponUrl+"customer/account/clickToCallUrl",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(a){a.status?(e.tempMobileNo=t.mobile_number,e.callbackSuccess=!0,e.callbackMobileModal=!1,e.mobile_read_only=!1,e.callbackopt_error=!1,e.mobileCallbackFormSubmitted=!1,e.mobileCallbackForm.userPhone="",e.mobileCallbackForm.userotp.$dirty=!1,e.mobileCallbackForm.userOTP="",e.mobileCallbackForm.userotp.$dirty=!1,d(function(){e.callbackSuccess=!1,$(".modal.in").find("button.close").click()},9e3)):(e.callbackopt_error=!0,e.callbackopt_message=a.message,d(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}else e.callbackopt_error=!0,e.callbackopt_message=a.message,d(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3)})}},e.resend_callback_opt=function(){if(e.mobileCallbackForm.userPhone){var t={mobile_number:e.mobileCallbackForm.userPhone,template:"callback"},a=o.serverUrl+"commonservice/resend_otp_for_callback";doPostWithOutToken(n,a,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_success_message=t.message,d(function(){e.callbackopt_error=!1,e.callbackopt_message="",e.callbackopt_success=!1,e.callbackopt_success_message=""},3e3)):(e.callbackopt_error=!0,e.callbackopt_message=t.message,d(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}}}function homeControllerChangepwd(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,_,f){e.confirmpwdmsg=!1,e.invalidmsg=!1,e.setpwdmsg=!1,e.setpwdmsgerror=!1,e.setPassword=function(){return e.changepwdFormSubmitted=!1,void 0===e.changepwdForm.userOldPwd||""===e.changepwdForm.userOldPwd?(e.changepwdForm.useroldpwd.$dirty=!0,e.changepwdForm.useroldpwd.$invalid=!0,e.changepwdForm.useroldpwd.$error.required=!0,a("useroldpwd"),!1):void 0===e.changepwdForm.userEmail||""===e.changepwdForm.userEmail?(e.changepwdForm.useremail.$dirty=!0,e.changepwdForm.useremail.$invalid=!0,e.changepwdForm.useremail.$error.required=!0,a("useremail"),!1):void 0===e.changepwdForm.userConfmEmail||""===e.changepwdForm.userConfmEmail?(e.changepwdForm.usereconfrmmail.$dirty=!0,e.changepwdForm.usereconfrmmail.$invalid=!0,e.changepwdForm.usereconfrmmail.$error.required=!0,a("usereconfrmmail"),!1):(e.changepwdForm.userEmail!==e.changepwdForm.userConfmEmail?e.confirmpwdmsg=!0:e.setnewPassword(),void s(function(){e.confirmpwdmsg=!1},5e3))},e.setnewPassword=function(){var t={email:JSON.parse(localStorage.getItem("user")).email,old_password:e.changepwdForm.userOldPwd,password:e.changepwdForm.userEmail,user_id:JSON.parse(localStorage.getItem("user")).user_id};o.userSetNewPwd(t,function(t){"success"===t.status?(t.data.status===!1&&(e.invalidmsg=!0),t.data.status===!0&&(e.setpwdmsg=!0)):e.setpwdmsgerror=!0,s(function(){e.setpwdmsg=!1,e.setpwdmsgerror=!1,e.invalidmsg=!1,e.changepwdFormSubmitted=!1,e.changepwdForm.userOldPwd="",e.changepwdForm.useroldpwd.$dirty=!1,e.changepwdForm.userEmail="",e.changepwdForm.useremail.$dirty=!1,e.changepwdForm.userConfmEmail="",e.changepwdForm.usereconfrmmail.$dirty=!1,$(".modal.in").find("button.close").click()},4e3)})}}function homeControllerUpdateUserDetails(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b,h,y,k){e.showLoginLoader=!1;var v={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()}};e.getCountryList=function(){"undefined"==typeof e.country_list&&r({method:"GET",url:f.couponUrl+"webv1/web_api/getCountryCode"}).success(function(t){t.status&&(e.country_list=t.data)})},e.setCountryCode=function(t,a){e.selected_countryCode={countries_name:"India",countries_isd_code:t,image_path:a},e.showUpdateOTP=!1},e.updateMobile=function(){if(void 0===e.mobileForm.userPhone||""===e.mobileForm.userPhone)return e.mobileForm.userphone.$dirty=!0,e.mobileForm.userphone.$invalid=!0,e.mobileForm.userphone.$error.required=!0,a("userphone"),!1;e.userLoginDetails=JSON.parse(localStorage.getItem("user"));var o={userId:e.userLoginDetails.user_id,email:e.userLoginDetails.email,mobile:e.mobileForm.userPhone,log_user_id:e.userLoginDetails.user_id};p.updateProfile(o,function(a){a.status===!0&&(e.userLoginDetails.mobile=e.mobileForm.userPhone,e.userLoginDetails.relatives[0].contact_number=e.mobileForm.userPhone,localStorage.setItem("user",JSON.stringify(e.userLoginDetails)),e.mobileModal=!1,t.$broadcast("update_mobile"),$(".modal.in").find("button.close").click())})},e.showReferCode=!1,e.checkPreviousDetails=function(){if("true"==localStorage.getItem("isLogin")&&e.$parent.partialSignUpModal){var t=JSON.parse(localStorage.getItem("user")).name,a=JSON.parse(localStorage.getItem("user")).email,o=JSON.parse(localStorage.getItem("user")).age,r=JSON.parse(localStorage.getItem("user")).gender,i=JSON.parse(localStorage.getItem("user")).mobile;if(e.checkPreviousDetailsFlag=!0,""!==t&&(e.puserName=t),null!==a&&""!==a?(e.puseremail=a,e.showEmail=!1):(e.puseremail="",e.showEmail=!0),"true"==localStorage.getItem("signUpCase")?e.showReferCode=!0:e.showReferCode=!1,""!==o&&(e.puserAge=o),""!=r&&(e.puserGender=r),null!==i)if(""!==i){e.puserPhone=i,e.showPhone=!1;var n=JSON.parse(localStorage.getItem("user")).countryCode,s=_.where(e.country_list,{countries_isd_code:n});s.length>0?e.selected_countryCode=s[0]:e.selected_countryCode={countries_name:"India",countries_isd_code:"91",image_path:"https://helma.healthians.com/stationery/flags/in.png"}}else e.showPhone=!0,e.puserPhone="",e.selected_countryCode={countries_name:"India",countries_isd_code:"91",image_path:"https://helma.healthians.com/stationery/flags/in.png"};else e.showPhone=!0,e.puserPhone="",e.selected_countryCode={countries_name:"India",countries_isd_code:"91",image_path:"https://helma.healthians.com/stationery/flags/in.png"}}},"true"==localStorage.getItem("isLogin")&&e.$parent.partialSignUpModal&&(e.getCountryList(),e.checkPreviousDetails()),e.$on("showPreviousUserDetailsCheck",function(t,a){e.getCountryList(),e.checkPreviousDetails()}),e.updateUserDetailsError=!1,e.showUpdateOTP=!1,e.hideOTP=function(){e.showUpdateOTP=!1,e.loginOTPButton=!1},e.resend_callback_opt=function(){
if(e.showPhone){if(void 0===e.puserPhone||""===e.puserPhone)return e.partialSignupForm.puserphone.$dirty=!0,e.partialSignupForm.puserphone.$invalid=!0,e.partialSignupForm.puserphone.$error.required=!0,e.showUpdateOTP=!1,a("puseremail"),!1;if(e.puserPhone&&e.showUpdateOTP){var t={mobile_number:e.puserPhone,template:"login",countryCode:e.selected_countryCode.countries_isd_code};g.eventTrack("Resend OTP",{category:"Login",label:e.puserPhone});var o=f.serverUrl+"commonservice/resend_otp_for_callback";doPostWithOutToken(r,o,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_success_message=t.message,s(function(){e.callbackopt_error=!1,e.callbackopt_message="",e.callbackopt_success=!1,e.callbackopt_success_message=""},3e3)):(e.callbackopt_error=!0,e.callbackopt_message=t.message,s(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}}},e.submitPartialUpdate=function(){if(e.signupError=!1,e.signupFormSubmitted=!0,void 0===e.puserName||""===e.puserName)return e.partialSignupForm.puserName.$dirty=!0,e.partialSignupForm.puserName.$invalid=!0,e.partialSignupForm.puserName.$error.required=!0,g.eventTrack("Showed Error for Validation Failure",{category:"Update User Popup",label:"Name"}),a("puserName"),!1;if(e.showEmail&&(void 0===e.puseremail||""===e.puseremail))return e.partialSignupForm.puseremail.$dirty=!0,e.partialSignupForm.puseremail.$invalid=!0,e.partialSignupForm.puseremail.$error.required=!0,g.eventTrack("Showed Error for Validation Failure",{category:"Update User Popup",label:"Email"}),a("puseremail"),!1;if(e.showPhone&&(void 0===e.puserPhone||""===e.puserPhone))return e.partialSignupForm.puserphone.$dirty=!0,e.partialSignupForm.puserphone.$invalid=!0,e.partialSignupForm.puserphone.$error.required=!0,g.eventTrack("Showed Error for Validation Failure",{category:"Update User Popup",label:"Phone"}),a("puseremail"),!1;if(void 0===e.puserGender||""===e.puserGender||null===e.puserGender)return e.partialSignupForm.pusergender.$dirty=!0,e.partialSignupForm.pusergender.$invalid=!0,e.partialSignupForm.pusergender.$error.required=!0,g.eventTrack("Showed Error for Validation Failure",{category:"Update User Popup",label:"Gender"}),a("pusergender"),!1;if(void 0===e.puserAge||""===e.puserAge)return e.partialSignupForm.puserage.$dirty=!0,e.partialSignupForm.puserage.$invalid=!0,e.partialSignupForm.puserage.$error.required=!0,g.eventTrack("Showed Error for Validation Failure",{category:"Update User Popup",label:"Age"}),a("puserage"),!1;if(parseInt(e.puserAge)<5||parseInt(e.puserAge)>120||parseInt(e.puserAge)<=0)return a("puserage"),e.partialSignupForm.puserage.$dirty=!0,e.partialSignupForm.puserage.$invalid=!0,e.partialSignupForm.puserage.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Update User Popup",label:"Age"}),!1;e.userLoginDetails=JSON.parse(localStorage.getItem("user"));var t={name:e.puserName,email:e.puseremail,age:e.puserAge,gender:e.puserGender,mobileNumber:e.puserPhone,userId:e.userLoginDetails.user_id,countryCode:e.selected_countryCode.countries_isd_code,source:"web"};if(v.any()?t.device_source="mobile":t.device_source="web",(e.showEmail||e.showReferCode)&&(e.referCode?t.referCode=e.referCode:"true"==localStorage.getItem("signUpCase")&&(t.referCode="")),e.request_data={data:t},e.showPhone)if("undefined"!=typeof e.puserOTP&&""!==e.puserOTP||e.showUpdateOTP){if(void 0===e.puserOTP||""===e.puserOTP)return e.partialSignupForm.puserotp.$dirty=!0,e.partialSignupForm.puserotp.$invalid=!0,a("puserotp"),!1;var t={mobile_number:e.puserPhone,otp:e.puserOTP,countryCode:e.selected_countryCode.countries_isd_code},o=f.serverUrl+"commonservice/validate_otp_for_callback";doPostWithOutToken(r,o,t,"",function(t){1==t.status?(e.puserOTP="",e.partialSignupForm.puserotp.$dirty=!1,e.showUpdateOTP=!1,e.updateInfo(e.request_data)):(e.puserOTP="",e.partialSignupForm.puserotp.$dirty=!1,e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message,s(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},8e3))})}else{e.showUpdateOTP=!0;var t={mobile_number:e.puserPhone,template:"login",countryCode:e.selected_countryCode.countries_isd_code};g.eventTrack("Request OTP",{category:"Login",label:e.puserPhone});var i=f.serverUrl+"commonservice/generate_otp_for_callback";doPostWithOutToken(r,i,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_error=!1,e.callbackopt_success_message="OTP has been sent to your above mobile number."):(e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message,e.showUpdateOTP=!1,e.puserPhone="",e.partialSignupForm.puserphone.$dirty=!1),s(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},6e3)})}else e.showLoginLoader=!0,e.updateInfo(e.request_data)},e.updateInfo=function(a){var o=localStorage.getItem("token");r({method:"POST",url:f.couponUrl+"customer/account/updateLoginInfo",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-API-TOKEN":o}}).success(function(o){if(o.status){e.userLoginDetails.email=o.data.email,e.userLoginDetails.name=o.data.name,e.userLoginDetails.age=o.data.age,e.userLoginDetails.gender=o.data.gender,e.userLoginDetails.dob=o.data.dob,e.userLoginDetails.mobile=o.data.mobile,e.userLoginDetails.relatives=o.data.relatives,e.userLoginDetails.countryCode=a.data.countryCode;var r=e.puserName.split(" ");t.user=r[0],localStorage.setItem("user",JSON.stringify(e.userLoginDetails)),localStorage.setItem("signUpCase","false"),e.showReferCode=!1,e.$parent.hidePartialSignupForm(),e.puserName="",e.partialSignupForm.puserName.$dirty=!1,e.puseremail="",e.partialSignupForm.puseremail.$dirty=!1,e.puserAge="",e.partialSignupForm.puserage.$dirty=!1,e.puserGender="",e.partialSignupForm.pusergender.$dirty=!1,e.referCode="",e.partialSignupForm.referCode.$dirty=!1,"orderbook"===b.current.name||"package"===b.current.name||"parameter"===b.current.name||"profile"===b.current.name?e.$emit("showPatientDialog"):"feedback"===b.current.name?e.$emit("showUserInfoFeedback"):"reset_password"===b.current.name&&i.path("/")}else e.updateUserDetailsError=!0,e.updateUserDetailsErrorMessage=o.message,s(function(){e.updateUserDetailsError=!1,e.updateUserDetailsErrorMessage=""},8e3);e.showLoginLoader=!1})},e.backToLogin=function(){o.logout({},function(a){a.status&&(e.loginOTPButton=!1,e.$parent.backToLoginPartialSignupForm(),localStorage.setItem("isLogin","false"),localStorage.removeItem("token"),localStorage.removeItem("customerDetails"),localStorage.removeItem("sample_date"),localStorage.removeItem("user"),localStorage.removeItem("coupondata"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("total_amount"),localStorage.removeItem("amountfinal"),localStorage.removeItem("userDetail"),localStorage.removeItem("Detailscustomer"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("address"),localStorage.removeItem("isSocialLogin"),localStorage.removeItem("booking_id"),localStorage.removeItem("makepayment_to_summary"),localStorage.removeItem("tempUser"),localStorage.removeItem("time_slot"),localStorage.removeItem("showLoginDialog"),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("selectPatient"),localStorage.removeItem("signUpCase"),i.path("/"),t.loggedin=!1,t.user="",k.getLoginStatus(function(e){"connected"==e.status&&k.logout(function(e){})}))})}}function instantbookingController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,_,f){e.packageList=[];var b=JSON.parse(localStorage.getItem("cityID"));null===b&&localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),e.contact_number="",e.email_address="",e.user_exists=!1,e.instant_booking_state="addtocart",e.getinstantForm=[],e.timeSlotForm=[],e.slot_id="",e.SlotError="",e.couponCode="",e.firstDateslots="",e.secondDateslots="",e.thirdDateslots="",e.fourthDateslots="",e.fifthDateslots="",e.hardcopy_price=0;var h={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return h.Android()||h.BlackBerry()||h.iOS()||h.Opera()||h.Windows()}};h.any()?e.device="mobile":e.device="web",e.discount="",e.payradio="paytm",e.userDetail={},e.showBookingLoader=!0;var y=localStorage.getItem("token");e.token=y;var k=g.paymentUrl;e.mobikwikAction=f.trustAsResourceUrl(k+"mobikwikpayment"),e.payzappAction=f.trustAsResourceUrl(k+"payzapppayment"),e.payuAction=f.trustAsResourceUrl(k+"payupayment"),e.paytmAction=f.trustAsResourceUrl(k+"paytmpayment"),l.search()&&(e.name=l.search().name,e.email_address=l.search().email,e.phone=l.search().phone,e.package_id=l.search().package_id);var v=l.path();"/book/full-body-checkup"===v&&(e.static_package_name="Healthians Full body checkup with Thyroid Profile",e.static_actual_price=2850,e.static_healthians_price=999,e.static_discount=65,e.package_id="206",e.pdetails=JSON.parse('{"test_details":[{"id":"1","ptype":"profile","name":"Lipid Profile","link_rewrite":"lipid-profile","package_id":"206","tests":[{"profile_id":"1","id":"625","ptype":"parameter","name":"Cholesterol-Total, Serum","link_rewrite":"cholesterol-total-serum"},{"profile_id":"1","id":"1033","ptype":"parameter","name":"HDL Cholesterol Direct","link_rewrite":"hdl-cholesterol-direct"},{"profile_id":"1","id":"1638","ptype":"parameter","name":"LDL Cholesterol -Direct","link_rewrite":"ldl-cholesterol-direct"},{"profile_id":"1","id":"2165","ptype":"parameter","name":"Triglycerides, Serum","link_rewrite":"triglycerides-serum"},{"profile_id":"1","id":"2272","ptype":"parameter","name":"Non - HDL Cholesterol, Serum","link_rewrite":"non-hdl-cholesterol-serum"},{"profile_id":"1","id":"2273","ptype":"parameter","name":"VLDL","link_rewrite":"vldl"},{"profile_id":"1","id":"2274","ptype":"parameter","name":"LDL/HDL RATIO","link_rewrite":"ldl-hdl-ratio"},{"profile_id":"1","id":"2275","ptype":"parameter","name":"CHOL/HDL RATIO","link_rewrite":"chol-hdl-ratio"},{"profile_id":"1","id":"2297","ptype":"parameter","name":"HDL / LDL Cholesterol Ratio","link_rewrite":"hdl-ldl-cholesterol-ratio"}]},{"id":"2","ptype":"profile","name":"Liver Function Test","link_rewrite":"liver-function-test","package_id":"206","tests":[{"profile_id":"2","id":"135","ptype":"parameter","name":"Albumin, Serum","link_rewrite":"albumin-serum"},{"profile_id":"2","id":"150","ptype":"parameter","name":"Alkaline Phosphatase, Serum","link_rewrite":"alkaline-phosphatase-serum"},{"profile_id":"2","id":"502","ptype":"parameter","name":"Bilirubin Direct, Serum","link_rewrite":"bilirubin-direct-serum"},{"profile_id":"2","id":"504","ptype":"parameter","name":"Bilirubin Total, Serum","link_rewrite":"bilirubin-total-serum"},{"profile_id":"2","id":"970","ptype":"parameter","name":"GGTP (Gamma GT)","link_rewrite":"ggtp-gamma-gt"},{"profile_id":"2","id":"1947","ptype":"parameter","name":"Proteins, Serum","link_rewrite":"proteins-serum"},{"profile_id":"2","id":"2024","ptype":"parameter","name":"SGOT AST","link_rewrite":"sgot-ast"},{"profile_id":"2","id":"2025","ptype":"parameter","name":"SGPT ALT","link_rewrite":"sgpt-alt"},{"profile_id":"2","id":"2269","ptype":"parameter","name":"Bilirubin- Indirect, serum","link_rewrite":"bilirubin-indirect-serum"},{"profile_id":"2","id":"2270","ptype":"parameter","name":"Globulin","link_rewrite":"globulin"},{"profile_id":"2","id":"2271","ptype":"parameter","name":"A/G Ratio","link_rewrite":"a-g-ratio"},{"profile_id":"2","id":"2302","ptype":"parameter","name":"SGOT/SGPT Ratio","link_rewrite":"sgot-sgpt-ratio"}]},{"id":"4","ptype":"profile","name":"Thyroid Profile-Total","link_rewrite":"thyroid-profile-total","package_id":"206","tests":[{"profile_id":"4","id":"2097","ptype":"parameter","name":"T3, Total Tri Iodothyronine","link_rewrite":"t3-total-tri-iodothyronine"},{"profile_id":"4","id":"2099","ptype":"parameter","name":"T4, Total Thyroxine","link_rewrite":"t4-total-thyroxine"},{"profile_id":"4","id":"2192","ptype":"parameter","name":"TSH-Ultrasensitive","link_rewrite":"tsh-ultrasensitive"}]},{"id":"6","ptype":"profile","name":"Kidney Function Test","link_rewrite":"kidney-function-test","package_id":"206","tests":[{"profile_id":"6","id":"531","ptype":"parameter","name":"BUN Urea Nitrogen, Serum","link_rewrite":"bun-urea-nitrogen-serum"},{"profile_id":"6","id":"548","ptype":"parameter","name":"Calcium Total, Serum","link_rewrite":"calcium-total-serum"},{"profile_id":"6","id":"621","ptype":"parameter","name":"Chlorides, Serum","link_rewrite":"chlorides-serum"},{"profile_id":"6","id":"696","ptype":"parameter","name":"Creatinine, Serum","link_rewrite":"creatinine-serum"},{"profile_id":"6","id":"1919","ptype":"parameter","name":"Potassium, Serum","link_rewrite":"potassium-serum"},{"profile_id":"6","id":"1947","ptype":"parameter","name":"Proteins, Serum","link_rewrite":"proteins-serum"},{"profile_id":"6","id":"2040","ptype":"parameter","name":"Sodium, Serum","link_rewrite":"sodium-serum"},{"profile_id":"6","id":"2206","ptype":"parameter","name":"Urea, Serum","link_rewrite":"urea-serum"},{"profile_id":"6","id":"2208","ptype":"parameter","name":"Uric Acid, Serum","link_rewrite":"uric-acid-serum"},{"profile_id":"6","id":"2298","ptype":"parameter","name":"BUN/Creatinine Ratio ","link_rewrite":"bun-creatinine-ratio"},{"profile_id":"6","id":"2299","ptype":"parameter","name":"Urea/Creatinine Ratio","link_rewrite":"urea-creatinine-ratio"},{"profile_id":"6","id":"2303","ptype":"parameter","name":"EGFR","link_rewrite":"egfr-5"}]},{"id":"7","ptype":"profile","name":"Urine Routine & Microscopy","link_rewrite":"urine-routine-microscopy","package_id":"206","tests":[{"profile_id":"7","id":"1886","ptype":"parameter","name":"pH Urine","link_rewrite":"ph-urine"},{"profile_id":"7","id":"2044","ptype":"parameter","name":"Specific gravity","link_rewrite":"specific-gravity"},{"profile_id":"7","id":"2211","ptype":"parameter","name":"Urobilinogen","link_rewrite":"urobilinogen"},{"profile_id":"7","id":"2276","ptype":"parameter","name":"Colour","link_rewrite":"colour"},{"profile_id":"7","id":"2277","ptype":"parameter","name":"Transparency","link_rewrite":"transparency"},{"profile_id":"7","id":"2279","ptype":"parameter","name":"Albumin","link_rewrite":"albumin"},{"profile_id":"7","id":"2280","ptype":"parameter","name":"Sugar","link_rewrite":"sugar"},{"profile_id":"7","id":"2281","ptype":"parameter","name":"Ketone","link_rewrite":"ketone"},{"profile_id":"7","id":"2283","ptype":"parameter","name":"Bile pigments, urine","link_rewrite":"bile-pigments-urine"},{"profile_id":"7","id":"2285","ptype":"parameter","name":"Red blood cells","link_rewrite":"red-blood-cells"},{"profile_id":"7","id":"2286","ptype":"parameter","name":"Pus cells (Leukocytes)","link_rewrite":"pus-cells-leukocytes"},{"profile_id":"7","id":"2287","ptype":"parameter","name":"Epithelial cells","link_rewrite":"epithelial-cells"},{"profile_id":"7","id":"2288","ptype":"parameter","name":"Crystals","link_rewrite":"crystals"},{"profile_id":"7","id":"2289","ptype":"parameter","name":"Cast","link_rewrite":"cast"},{"profile_id":"7","id":"2290","ptype":"parameter","name":"Bacteria","link_rewrite":"bacteria"},{"profile_id":"7","id":"2291","ptype":"parameter","name":"Yeast cells","link_rewrite":"yeast-cells"},{"profile_id":"7","id":"2304","ptype":"parameter","name":"Nitrate","link_rewrite":"nitrate"}]},{"id":"977","ptype":"parameter","name":"Glucose","link_rewrite":"glucose","package_id":"206"}]}'),e.test_count=54),"/book/blood-screening-with-lft"===v&&(e.static_package_name="Basic Blood Screening With LFT",e.static_actual_price=2100,e.static_healthians_price=599,e.static_discount=71,e.package_id="222",e.test_count=39,e.pdetails=JSON.parse('{"test_details":[{"id":"1","ptype":"profile","name":"Lipid Profile","link_rewrite":"lipid-profile","package_id":"222","tests":[{"profile_id":"1","id":"625","ptype":"parameter","name":"Cholesterol-Total, Serum","link_rewrite":"cholesterol-total-serum"},{"profile_id":"1","id":"1033","ptype":"parameter","name":"HDL Cholesterol Direct","link_rewrite":"hdl-cholesterol-direct"},{"profile_id":"1","id":"1638","ptype":"parameter","name":"LDL Cholesterol -Direct","link_rewrite":"ldl-cholesterol-direct"},{"profile_id":"1","id":"2165","ptype":"parameter","name":"Triglycerides, Serum","link_rewrite":"triglycerides-serum"},{"profile_id":"1","id":"2272","ptype":"parameter","name":"Non - HDL Cholesterol, Serum","link_rewrite":"non-hdl-cholesterol-serum"},{"profile_id":"1","id":"2273","ptype":"parameter","name":"VLDL","link_rewrite":"vldl"},{"profile_id":"1","id":"2274","ptype":"parameter","name":"LDL/HDL RATIO","link_rewrite":"ldl-hdl-ratio"},{"profile_id":"1","id":"2275","ptype":"parameter","name":"CHOL/HDL RATIO","link_rewrite":"chol-hdl-ratio"},{"profile_id":"1","id":"2297","ptype":"parameter","name":"HDL / LDL Cholesterol Ratio","link_rewrite":"hdl-ldl-cholesterol-ratio"}]},{"id":"2","ptype":"profile","name":"Liver Function Test","link_rewrite":"liver-function-test","package_id":"222","tests":[{"profile_id":"2","id":"135","ptype":"parameter","name":"Albumin, Serum","link_rewrite":"albumin-serum"},{"profile_id":"2","id":"150","ptype":"parameter","name":"Alkaline Phosphatase, Serum","link_rewrite":"alkaline-phosphatase-serum"},{"profile_id":"2","id":"502","ptype":"parameter","name":"Bilirubin Direct, Serum","link_rewrite":"bilirubin-direct-serum"},{"profile_id":"2","id":"504","ptype":"parameter","name":"Bilirubin Total, Serum","link_rewrite":"bilirubin-total-serum"},{"profile_id":"2","id":"970","ptype":"parameter","name":"GGTP (Gamma GT)","link_rewrite":"ggtp-gamma-gt"},{"profile_id":"2","id":"1947","ptype":"parameter","name":"Proteins, Serum","link_rewrite":"proteins-serum"},{"profile_id":"2","id":"2024","ptype":"parameter","name":"SGOT AST","link_rewrite":"sgot-ast"},{"profile_id":"2","id":"2025","ptype":"parameter","name":"SGPT ALT","link_rewrite":"sgpt-alt"},{"profile_id":"2","id":"2269","ptype":"parameter","name":"Bilirubin- Indirect, serum","link_rewrite":"bilirubin-indirect-serum"},{"profile_id":"2","id":"2270","ptype":"parameter","name":"Globulin","link_rewrite":"globulin"},{"profile_id":"2","id":"2271","ptype":"parameter","name":"A/G Ratio","link_rewrite":"a-g-ratio"},{"profile_id":"2","id":"2302","ptype":"parameter","name":"SGOT/SGPT Ratio","link_rewrite":"sgot-sgpt-ratio"}]},{"id":"7","ptype":"profile","name":"Urine Routine & Microscopy","link_rewrite":"urine-routine-microscopy","package_id":"222","tests":[{"profile_id":"7","id":"1886","ptype":"parameter","name":"pH Urine","link_rewrite":"ph-urine"},{"profile_id":"7","id":"2044","ptype":"parameter","name":"Specific gravity","link_rewrite":"specific-gravity"},{"profile_id":"7","id":"2211","ptype":"parameter","name":"Urobilinogen","link_rewrite":"urobilinogen"},{"profile_id":"7","id":"2276","ptype":"parameter","name":"Colour","link_rewrite":"colour"},{"profile_id":"7","id":"2277","ptype":"parameter","name":"Transparency","link_rewrite":"transparency"},{"profile_id":"7","id":"2279","ptype":"parameter","name":"Albumin","link_rewrite":"albumin"},{"profile_id":"7","id":"2280","ptype":"parameter","name":"Sugar","link_rewrite":"sugar"},{"profile_id":"7","id":"2281","ptype":"parameter","name":"Ketone","link_rewrite":"ketone"},{"profile_id":"7","id":"2283","ptype":"parameter","name":"Bile pigments, urine","link_rewrite":"bile-pigments-urine"},{"profile_id":"7","id":"2285","ptype":"parameter","name":"Red blood cells","link_rewrite":"red-blood-cells"},{"profile_id":"7","id":"2286","ptype":"parameter","name":"Pus cells (Leukocytes)","link_rewrite":"pus-cells-leukocytes"},{"profile_id":"7","id":"2287","ptype":"parameter","name":"Epithelial cells","link_rewrite":"epithelial-cells"},{"profile_id":"7","id":"2288","ptype":"parameter","name":"Crystals","link_rewrite":"crystals"},{"profile_id":"7","id":"2289","ptype":"parameter","name":"Cast","link_rewrite":"cast"},{"profile_id":"7","id":"2290","ptype":"parameter","name":"Bacteria","link_rewrite":"bacteria"},{"profile_id":"7","id":"2291","ptype":"parameter","name":"Yeast cells","link_rewrite":"yeast-cells"},{"profile_id":"7","id":"2304","ptype":"parameter","name":"Nitrate","link_rewrite":"nitrate"}]},{"id":"977","ptype":"parameter","name":"Glucose","link_rewrite":"glucose","package_id":"222"}] }')),"/book/blood-screening-with-kft"===v&&(e.static_package_name="Basic Blood Screening With KFT",e.static_actual_price=2100,e.static_healthians_price=599,e.static_discount=71,e.package_id="223",e.test_count=39,e.pdetails=JSON.parse('{"test_details":[{"id":"1","ptype":"profile","name":"Lipid Profile","link_rewrite":"lipid-profile","package_id":"223","tests":[{"profile_id":"1","id":"625","ptype":"parameter","name":"Cholesterol-Total, Serum","link_rewrite":"cholesterol-total-serum"},{"profile_id":"1","id":"1033","ptype":"parameter","name":"HDL Cholesterol Direct","link_rewrite":"hdl-cholesterol-direct"},{"profile_id":"1","id":"1638","ptype":"parameter","name":"LDL Cholesterol -Direct","link_rewrite":"ldl-cholesterol-direct"},{"profile_id":"1","id":"2165","ptype":"parameter","name":"Triglycerides, Serum","link_rewrite":"triglycerides-serum"},{"profile_id":"1","id":"2272","ptype":"parameter","name":"Non - HDL Cholesterol, Serum","link_rewrite":"non-hdl-cholesterol-serum"},{"profile_id":"1","id":"2273","ptype":"parameter","name":"VLDL","link_rewrite":"vldl"},{"profile_id":"1","id":"2274","ptype":"parameter","name":"LDL/HDL RATIO","link_rewrite":"ldl-hdl-ratio"},{"profile_id":"1","id":"2275","ptype":"parameter","name":"CHOL/HDL RATIO","link_rewrite":"chol-hdl-ratio"},{"profile_id":"1","id":"2297","ptype":"parameter","name":"HDL / LDL Cholesterol Ratio","link_rewrite":"hdl-ldl-cholesterol-ratio"}]},{"id":"6","ptype":"profile","name":"Kidney Function Test","link_rewrite":"kidney-function-test","package_id":"223","tests":[{"profile_id":"6","id":"531","ptype":"parameter","name":"BUN Urea Nitrogen, Serum","link_rewrite":"bun-urea-nitrogen-serum"},{"profile_id":"6","id":"548","ptype":"parameter","name":"Calcium Total, Serum","link_rewrite":"calcium-total-serum"},{"profile_id":"6","id":"621","ptype":"parameter","name":"Chlorides, Serum","link_rewrite":"chlorides-serum"},{"profile_id":"6","id":"696","ptype":"parameter","name":"Creatinine, Serum","link_rewrite":"creatinine-serum"},{"profile_id":"6","id":"1919","ptype":"parameter","name":"Potassium, Serum","link_rewrite":"potassium-serum"},{"profile_id":"6","id":"1947","ptype":"parameter","name":"Proteins, Serum","link_rewrite":"proteins-serum"},{"profile_id":"6","id":"2040","ptype":"parameter","name":"Sodium, Serum","link_rewrite":"sodium-serum"},{"profile_id":"6","id":"2206","ptype":"parameter","name":"Urea, Serum","link_rewrite":"urea-serum"},{"profile_id":"6","id":"2208","ptype":"parameter","name":"Uric Acid, Serum","link_rewrite":"uric-acid-serum"},{"profile_id":"6","id":"2298","ptype":"parameter","name":"BUN/Creatinine Ratio ","link_rewrite":"bun-creatinine-ratio"},{"profile_id":"6","id":"2299","ptype":"parameter","name":"Urea/Creatinine Ratio","link_rewrite":"urea-creatinine-ratio"},{"profile_id":"6","id":"2303","ptype":"parameter","name":"EGFR","link_rewrite":"egfr-5"}]},{"id":"7","ptype":"profile","name":"Urine Routine & Microscopy","link_rewrite":"urine-routine-microscopy","package_id":"223","tests":[{"profile_id":"7","id":"1886","ptype":"parameter","name":"pH Urine","link_rewrite":"ph-urine"},{"profile_id":"7","id":"2044","ptype":"parameter","name":"Specific gravity","link_rewrite":"specific-gravity"},{"profile_id":"7","id":"2211","ptype":"parameter","name":"Urobilinogen","link_rewrite":"urobilinogen"},{"profile_id":"7","id":"2276","ptype":"parameter","name":"Colour","link_rewrite":"colour"},{"profile_id":"7","id":"2277","ptype":"parameter","name":"Transparency","link_rewrite":"transparency"},{"profile_id":"7","id":"2279","ptype":"parameter","name":"Albumin","link_rewrite":"albumin"},{"profile_id":"7","id":"2280","ptype":"parameter","name":"Sugar","link_rewrite":"sugar"},{"profile_id":"7","id":"2281","ptype":"parameter","name":"Ketone","link_rewrite":"ketone"},{"profile_id":"7","id":"2283","ptype":"parameter","name":"Bile pigments, urine","link_rewrite":"bile-pigments-urine"},{"profile_id":"7","id":"2285","ptype":"parameter","name":"Red blood cells","link_rewrite":"red-blood-cells"},{"profile_id":"7","id":"2286","ptype":"parameter","name":"Pus cells (Leukocytes)","link_rewrite":"pus-cells-leukocytes"},{"profile_id":"7","id":"2287","ptype":"parameter","name":"Epithelial cells","link_rewrite":"epithelial-cells"},{"profile_id":"7","id":"2288","ptype":"parameter","name":"Crystals","link_rewrite":"crystals"},{"profile_id":"7","id":"2289","ptype":"parameter","name":"Cast","link_rewrite":"cast"},{"profile_id":"7","id":"2290","ptype":"parameter","name":"Bacteria","link_rewrite":"bacteria"},{"profile_id":"7","id":"2291","ptype":"parameter","name":"Yeast cells","link_rewrite":"yeast-cells"},{"profile_id":"7","id":"2304","ptype":"parameter","name":"Nitrate","link_rewrite":"nitrate"}]},{"id":"977","ptype":"parameter","name":"Glucose","link_rewrite":"glucose","package_id":"223"}]}')),e.getuserDetails=function(t,a){doPost(d,g.serverUrl+"commonservice/getprofiledetails",{keyword:a,type:t},"",function(t){t.status&&(e.name=t.data.name,e.phone=parseInt(t.data.contact_number),e.email_address=t.data.email_address,e.address=t.data.address,e.locality=t.data.locality,e.locality_id=t.data.locality_id,e.address_id=t.data.address_id,e.city_name=t.data.city_name,e.state_id=t.data.state_id,e.state_name=t.data.state_name,e.latitude=t.data.latitude,e.longitude=t.data.longitude,e.pin_code=t.data.pin_code,e.gender=t.data.gender,e.age=parseInt(t.data.age),e.user_id=t.data.user_id,e.billing_user_id=e.user_id,localStorage.setItem("token",t.data.token),e.token=t.data.token,doPost(d,g.serverUrl+"commonservice/time_slots_post",{date:e.availableSlotDates[0].date,locality_id:e.locality_id,amount:e.deal_price},t.data.token,function(t){t.data&&(e.firstDateslots=t.data)}),e.user_exists=!0)})},doPost(d,g.serverUrl+"commonservice/getSlotDates",{},"",function(t){"success"==t.status?e.availableSlotDates=t.data:e.availableSlotDates=[]}),e.validateForm=function(t){if(e.empty_package=!1,!parseInt(t.instant_package.$viewValue))return e.invalid_form=!0,e.empty_package=!0,e.fireInvalidFormEvent(t),!1;if(t.email_address.$viewValue){var a=t.email_address.$viewValue,o=a.indexOf("@"),i=a.lastIndexOf(".");if(o<1||i<o+2||i+2>=a.length)return e.invalid_form=!0,t.email_address.$invalid=!0,e.fireInvalidFormEvent(t),!1}if(0==t.$valid)e.fireInvalidFormEvent(t),e.invalid_form=!0;else{if(e.package_id=parseInt(t.instant_package.$viewValue),e.package_info=r("getById")(e.packageList,e.package_id),e.deal_price=e.package_info.healthians_price,e.pin_code=parseInt(t.pin_code.$viewValue),!e.user_id){e.name=t.name.$viewValue,e.phone=parseInt(t.phone.$viewValue),e.email_address=t.email_address.$viewValue,e.gender=t.gender.$viewValue,e.age=parseInt(t.age.$viewValue),e.hno=t.hno.$viewValue,e.landmark=t.landmark.$viewValue,e.sublocality=t.sublocality.$viewValue,e.address=e.hno+","+e.landmark+","+e.sublocality,e.relationship="self";var n={name:e.name,phone:e.phone,email_address:e.email_address,address:e.address,sublocality:e.sublocality,locality_id:e.locality_id,pin_code:e.pin_code,gender:e.gender,age:e.age,package_id:e.package_id,relationship:e.relationship,city:e.city_name,source:e.device,hno:e.hno,landmark:e.landmark,city_id:e.city_id,state_id:e.state_id,lat:s.sub_lat,long:s.sub_long};doPost(d,g.serverUrl+"commonservice/CheckMarketingusers",n,"",function(t){t.status&&(e.user_id=t.data.user_id,_.eventTrack("Success",{category:"Booking Screen 1",label:e.name+","+e.phone+","+e.email_address}),e.billing_user_id=e.user_id,e.address_id=t.data.address_id,localStorage.setItem("token",t.data.token),e.token=t.data.token,e.instant_booking_state="time_slot",doPost(d,g.serverUrl+"commonservice/time_slots_post",{date:e.availableSlotDates[0].date,locality_id:e.locality_id,amount:e.deal_price},t.data.token,function(t){200==t.code&&(e.firstDateslots=t.data,e.instant_booking_state="time_slot",$(".nav-tabs").scrollingTabs())}))})}e.user_id&&(_.eventTrack("Success",{category:"Booking Screen 1",label:e.name+","+e.phone+","+e.email_address}),e.instant_booking_state="time_slot",$(".nav-tabs").scrollingTabs())}},e.fireInvalidFormEvent=function(e){_.eventTrack("Failed",{category:"Booking Screen 1",label:e.name.$viewValue+","+parseInt(e.phone.$viewValue)+","+e.email_address.$viewValue})},doPost(d,g.serverUrl+"commonservice/getPackages",{city:e.city_id},"",function(t){"success"===t.status?e.packageList=t.data:e.errorMessage="No Time slot available for this date."}),e.getLocalityUsingLatLong=function(){var t=g.serverUrl+"commonservice/getnearestlocality",a={lat:s.sub_lat,long:s.sub_long};doPost(d,t,a,"",function(t){if(e.out_of_area=!1,1==t.status)e.locality_id=t.data.locality_id,e.locality=t.data.locality,e.city_name=t.data.city_name,e.city_id=t.data.city_id,e.state_id=t.data.state_id,e.state_name=t.data.state_name,e.latitude=s.sub_lat,e.longitude=s.sub_long,e.pin_code=parseInt(s.postal_code);else{var a=$("#getinstantForm");a.find("[name=locality]").val(""),e.out_of_area=!0}})},e.getDateWiseSlot=function(t,a){doPost(d,g.serverUrl+"commonservice/time_slots_post",{date:t,locality_id:e.locality_id,amount:e.deal_price},e.token,function(t){if(200==t.code){switch(a){case 1:e.firstDateslots=t.data;break;case 2:e.secondDateslots=t.data;break;case 3:e.thirdDateslots=t.data;break;case 4:e.fourthDateslots=t.data;break;case 5:e.fifthDateslots=t.data}e.errorMessage=""}else e.errorMessage="No Time slot available for this date."})},e.setTimeSlot=function(t,a,o){return e.slot_id===t?(e.SlotError="",e.slot_id="",!1):($(".tab-content  a").removeClass("selected"),e.slot_id=t,e.time_slot={slot_id:t,start_time:a,end_time:o},void(e.SlotError=""))},e.freezeTimeSlot=function(){return""==e.slot_id?(e.SlotError="Please select time-slot for sample.",_.eventTrack("Failed",{category:"Date & Slot screen",label:e.user_id}),!1):(null!=y&&"undefined"!=y&&""!=y||(y=localStorage.getItem("token")),void doPost(d,g.serverUrl+"commonservice/freezeSlotBySlotId",{slot_id:e.slot_id},y,function(t){200==t.code?(e.instant_booking_state="payment",e.SlotError="",_.eventTrack("Success",{category:"Date & Slot screen",label:e.user_id})):(e.SlotError="Please choose another slot.",_.eventTrack("Failed",{category:"Date & Slot screen",label:e.user_id}))}))},e.verifyCoupon=function(t){if(e.couponDisabled=!0,!t)return e.couponError="Please Enter a coupon code",e.updatePrice(),!1;if(""==t.trim())return e.SlotError="Please select time-slot for sample.",!1;var a={data:{coupon_code:t,customer_id:e.user_id,city_id:e.city_id,platform:"web",billing_amount:e.package_info.healthians_price,no_of_customer:1,package:e.package_id,profile:"",parameter:"",is_online:"cash"==e.payradio?0:1,payment_gateway:e.payradio,customer_mobile:e.phone,customer_email:e.email_address,apply_discount:0}};d({method:"POST",url:g.couponUrl+"Coupon_engine_api/CouponApply",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}}).success(function(a){a.status&&a.data.hasOwnProperty("discount")?(e.couponDisabled=!0,e.coupon_message="Coupon applied successfully.",e.couponError="",e.discount=a.data.discount,e.couponCode=t,e.updatePrice(),_.eventTrack("Applies coupon",{category:"Make Payment screen",label:e.user_id+"-"+e.couponCode,value:e.discount})):(e.couponDisabled=!1,e.couponError=a.message,e.coupon_message="",e.discount=0,e.updatePrice())}).error(function(){e.couponDisabled=!1})},e.finalPay=function(){e.showBookingLoader=!1,e.address_detail={address_id:e.address_id,address:e.address,
lat:e.latitude,long:e.longitude,state_id:e.state_id,state_name:e.state_name,city:e.city_name,locality_id:e.locality_id,pincode:e.pin_code},e.order_detail=[{user_id:e.user_id,package:[{tcategory_id:e.package_info.tcategory_id,healthians_price:e.package_info.healthians_price,actaul_price:e.package_info.actaul_price}]}];var t={billing_user_id:e.billing_user_id,address:e.address_detail,deal_price:e.package_info.healthians_price,order_detail:e.order_detail,time_slot:e.time_slot,coupon:e.couponCode,discount:e.discount,email:e.email_address,hard_copy:e.is_hard_copy,webbooking_type:"instant_booking",booked_from:e.device};doPost(d,g.serverUrl+"commonservice/bookorder",t,y,function(t){t.status?(e.booking_id=t.data.booking_id,localStorage.setItem("booking_id",e.booking_id),e.userDetail.name=e.name,e.userDetail.mobile=e.phone,e.userDetail.user_id=e.user_id,e.userDetail.age=e.age,localStorage.setItem("userDetail",JSON.stringify(e.userDetail)),e.makePaymentInstant(t.data.booking_id)):e.showBookingLoader=!0})},e.setpayradio=function(t){e.payradio=t,_.eventTrack("Selects "+t,{category:"Make Payment screen",label:e.user_id,value:e.hardcopy_sum_price})},e.hardCopyFunc=function(){if(""==e.hardcopy_price){var t=g.serverUrl+"commonservice/get_hard_copy_price";doGet(d,t,function(t){_.eventTrack("Checked Hard Copy",{category:"Make Payment screen"}),e.hardcopy_price=t.data.price,e.updatePrice(),e.is_hard_copy="yes"})}else e.hardcopy_price="",e.is_hard_copy="no",e.updatePrice()},e.updatePrice=function(){e.hardcopy_price?e.hardcopy_sum_price=parseInt(e.deal_price)+parseInt(e.hardcopy_price):e.hardcopy_sum_price=parseInt(e.deal_price),e.discount?e.hardcopy_sum_price=parseInt(e.hardcopy_sum_price)-parseInt(e.discount):e.hardcopy_sum_price=parseInt(e.hardcopy_sum_price)},e.makePaymentInstant=function(t){if(e.showBookingLoader=!1,localStorage.setItem("type_of_payment","cash"==e.payradio?"Cash on delivery":"Online"),e.loaderVar=!0,e.hardcopy_price?e.txnAmount=parseInt(e.deal_price)+parseInt(e.hardcopy_price):e.txnAmount=parseInt(e.deal_price),e.discount?e.txnAmount=parseInt(e.txnAmount)-parseInt(e.discount):e.txnAmount=parseInt(e.txnAmount),_.eventTrack("Complete Order",{category:"Make Payment screen",label:e.user_id,value:e.txnAmount}),"cash"==e.payradio){var a=g.serverUrl+"commonservice/update_payment_type",o={booking_id:t,payment_type:"cash"==e.payradio?"Cash on delivery":"Online",term_condition:!0,user_id:e.user_id};doPost(d,a,o,y,function(a){e.showBookingLoader=!1,a.status?(m.go("payment-summary",{action:"Get",booking_id:t,mobile:e.phone,user_id:e.user_id}),e.confirm_booking=!0):e.showBookingLoader=!0})}else if("paytm"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#paytmForm");r.find("[name=booking_id]").val(t),r.find("[name=txnAmount]").val(e.txnAmount),r.find("[name=custName]").val(e.name),r.find("[name=custMobile]").val(e.phone),r.find("[name=custEmail]").val(e.email_address),r.find("[name=user_id]").val(e.user_id),r.find("[name=stm_id]").val(e.slot_id),r.submit()}else if("mobikwik"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#mobikwikForm");r.find("[name=booking_id]").val(t),r.find("[name=txnAmount]").val(e.txnAmount),r.find("[name=custName]").val(e.name),r.find("[name=custMobile]").val(e.phone),r.find("[name=custEmail]").val(e.email_address),r.find("[name=stm_id]").val(e.slot_id),r.submit()}else if("payu"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var r=$("#payuForm");r.find("[name=booking_id]").val(t),r.find("[name=txnAmount]").val(e.txnAmount),r.find("[name=custName]").val(e.name),r.find("[name=custMobile]").val(e.phone),r.find("[name=custEmail]").val(e.email_address),r.find("[name=stm_id]").val(e.slot_id),r.submit()}e.hideContinue=!1}}function makeOrderPaymentController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g){e.detail={},e.error=!1,e.wholediv=!0,e.coupondata={},e.coupondata.applied=!1,e.coupondata.hard_copy=!1,e.termsCondition=!0,e.termError=!1,e.payradio="paytm",e.onlineDiscount=0,e.onlineDiscountActive=!1,e.onlineDiscountApplied=!1,n.meta_robots="noindex, nofollow";var _=p.paymentUrl;e.payuAction=g.trustAsResourceUrl(_+"payupayment"),e.mobikwikAction=g.trustAsResourceUrl(_+"mobikwikpayment"),e.payzappAction=g.trustAsResourceUrl(_+"payzapppayment"),e.paytmAction=g.trustAsResourceUrl(_+"paytmpayment"),e.getDonationInfo=function(){var t=p.couponUrl+"webv1/web_api/getDonationInfo";doGet(l,t,function(t){"success"===t.status&&(e.donation_details=t.data,e.online_discount_config=e.donation_details.online_discount,"on"==e.online_discount_config.active&&e.online_discount_config.source.includes("web")?(e.onlineDiscountActive=!0,e.online_discount_amount=parseInt(e.online_discount_config.amount),e.online_discount_mimimum_amount=parseInt(e.online_discount_config.minimum_booking_amount)):e.onlineDiscountActive=!1)})},e.getDonationInfo(),e.sendOtpFunction=function(t){if(void 0==e.odrderPayment||""==e.odrderPayment)e.sendOrderError=!0;else if(void 0==e.odrderMobilePayment||""==e.odrderMobilePayment)e.sendMobileError=!0;else{if(""===t&&doPostWithOutToken(l,p.serverUrl+"commonservice/genrate_payment_link",{order_id:e.odrderPayment,mobile:e.odrderMobilePayment},"",function(t){if(1==t.status){e.detail=t.data,e.bookingdetail=!0,e.booking_id=e.detail.booking_id,e.discountamount=e.detail.payable_amount,e.total_booking_amount=e.detail.order_price,e.payatcollection=e.detail.payatcollection,e.name=e.detail.customer_name,e.mobile=e.detail.contact_number,e.email=e.detail.email_address;var a,o={address:e.detail.address},r={start_time:e.detail.slot_start_time,end_time:e.detail.slot_end_time},i={name:e.detail.customer_name,mobile:e.detail.contact_number,email:e.detail.email_address,address:o},n=[];e.detail.orderDetail.forEach(function(e,t){var o=[],r="";e.Package.forEach(function(e,t){a={fasting:e.fasting,fasting_time:e.fasting_time},e.test_detail.forEach(function(e,t){r+=e.name,r+=","}),o.push({display_name:e.display_name,actual_price:e.actaul_price,healthian_price:e.healthians_price,all_package_StringName:r,all_package_name:e.test_detail})}),n.push({name:e.cust_name,age:e.cust_age,gender:e.cust_gender,pkg:a,newpkg:o})}),"yes"===e.detail.hard_copy&&(e.coupondata.hard_copy=!0),e.detail.coupon_code&&(e.coupondata.applied=!0,e.coupondata.discount=e.detail.discounted_amount),[2,5].includes(parseInt(e.detail.delivery_status))?e.detail.online_discount_applied||e.onlineDiscountActive&&parseInt(e.detail.payatcollection)>=e.online_discount_mimimum_amount&&parseInt(e.detail.payatcollection)-e.online_discount_amount>0&&(console.log("Online Discount Applied"),e.onlineDiscountApplied=!0,e.onlineDiscount=e.online_discount_amount):e.onlineDiscountApplied=!1,localStorage.setItem("booking_id",e.detail.booking_id),localStorage.setItem("coupondata",e.detail.booking_id),localStorage.setItem("userDetail",JSON.stringify(i)),localStorage.setItem("sample_date",e.detail.order_date),"Cash on delivery"!==localStorage.getItem("type_of_payment")&&localStorage.setItem("type_of_payment","Online"),localStorage.setItem("customerDetails",JSON.stringify(n)),localStorage.setItem("time_slot",JSON.stringify(r)),localStorage.setItem("total_amount",e.detail.payable_amount),localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),e.bookingdetail=!1,e.paymentsection=!0,e.subscriptionsection=!1}else e.error=!0,e.errorMsg=t.message,e.bookingdetail=!0,e.paymentsection=!1}),"crm"===t){var a={order_id:e.odrderPayment,mobile:e.odrderMobilePayment,pid:s.search().pid},o=p.serverUrl+"commonservice/generate_crm_payment_link";doPostWithOutToken(l,o,a,"",function(t){1==t.status?(e.details=t.data,e.bookingdetail=!1,e.paymentsection=!0,e.subscriptionsection=!1,e.booking_id=e.details.booking_id,e.discountamount=e.details.requested_amount,e.total_booking_amount=e.details.order_price,e.payatcollection=e.details.payatcollection,e.mobile=e.details.contact_number,e.email=e.details.email_address,e.detail={booking_id:e.booking_id,contact_number:e.details.contact_number,email_address:e.details.email_address,customer_name:e.details.customer_name},[2,5].includes(parseInt(e.details.delivery_status))&&(e.details.online_discount_applied||e.onlineDiscountActive&&parseInt(e.details.payatcollection)>=parseInt(e.online_discount_mimimum_amount)&&parseInt(e.details.payatcollection)-e.online_discount_amount>0&&(console.log("Online Discount Applied"),e.onlineDiscountApplied=!0,e.onlineDiscount=e.online_discount_amount)),localStorage.setItem("booking_id",e.detail.booking_id)):(e.error=!0,e.errorMsg=t.message,e.bookingdetail=!0,e.paymentsection=!1,e.subscriptionsection=!1)})}if("subscription"===t){var a={user_subscription_id:s.search().subscription_id,user_mobile:s.search().mobile};e.mobile=s.search().mobile,localStorage.setItem("subscription_id",s.search().subscription_id),localStorage.setItem("subscription_mobile",s.search().mobile);var o=p.serverUrl+"subscription_management/get_subscription_detail_for_payment";doPostWithOutToken(l,o,a,"",function(t){1==t.status?(e.details=t.data,e.details.payment_details.length>0?(e.total_received_amount=0,e.details.payment_details.forEach(function(t,a){e.total_received_amount+=t.recieved_amount}),e.subscription_amount=parseInt(e.details.price-e.total_received_amount),e.subscription_amount<=0?e.payment_pending=!1:e.payment_pending=!0):(e.subscription_amount=e.details.price,e.payment_pending=!0),e.bookingdetail=!1,e.paymentsection=!0,e.subscriptionsection=!0,e.subscription_id=e.details.user_subscribe_id):(e.error=!0,e.errorMsg=t.message,e.bookingdetail=!0,e.paymentsection=!1,e.subscriptionsection=!1)})}if("service"===t){var a={service_booking_id:s.search().service_booking_id,user_mobile:s.search().mobile};e.mobile=s.search().mobile,localStorage.setItem("service_booking_id",s.search().service_booking_id),localStorage.setItem("service_mobile",s.search().mobile);var o=p.paymentUrl+"service/healthians_service/get_service_detail_for_payment";doPostWithOutToken(l,o,a,"",function(t){1==t.status?(e.details=t.data,e.details.payment_details.length>0?(e.total_received_amount=0,e.details.payment_details.forEach(function(t,a){e.total_received_amount+=t.recieved_amount}),e.service_amount=parseInt(e.details.order_price-e.total_received_amount),e.service_amount<=0?e.payment_pending=!1:e.payment_pending=!0):(e.service_amount=e.details.order_price,e.payment_pending=!0),e.bookingdetail=!1,e.paymentsection=!0,e.subscriptionsection=!1,e.servicesection=!0,e.service_booking_id=e.details.service_booking_id):(e.error=!0,e.errorMsg=t.message,e.bookingdetail=!0,e.paymentsection=!1,e.subscriptionsection=!1)})}}i(function(){e.sendOrderError=!1,e.sendMobileError=!1,e.error=!1},3e3)},s.search().booking_id&&s.search().mobile?(e.odrderPayment=s.search().booking_id,e.odrderMobilePayment=s.search().mobile,"crm"===s.search().source?e.sendOtpFunction("crm"):e.sendOtpFunction("")):s.search().subscription_id&&s.search().mobile?(e.odrderPayment=s.search().subscription_id,e.odrderMobilePayment=s.search().mobile,"subscription"===s.search().payment_type_source&&e.sendOtpFunction("subscription")):s.search().service_booking_id&&s.search().mobile?(e.odrderPayment=s.search().service_booking_id,e.odrderMobilePayment=s.search().mobile,"service"===s.search().payment_type_source&&e.sendOtpFunction("service")):(s.search().booking_id&&(e.odrderPayment=s.search().booking_id),e.bookingdetail=!0,e.paymentsection=!1),e.sendDetailFunction=function(){void 0==e.orderPayment||""==e.orderPayment?e.sendBookingError=!0:void 0==e.orderReferencePayment||""==e.orderReferencePayment?e.sendReferenceError=!0:doPost(l,p.serverUrl+"commonservice/varify_payment_reference_number",{order_id:e.orderPayment,reference_number:e.orderReferencePayment},"",function(t){if(1==t.status){e.detail=t.data,e.bookingdetail=!0,e.booking_id=e.detail.booking_id,e.discountamount=e.detail.payable_amount,e.total_booking_amount=e.detail.order_price,e.payatcollection=e.detail.payatcollection,e.name=e.detail.customer_name,e.mobile=e.detail.contact_number,e.email=e.detail.email_address;var a,o={address:e.detail.address},r={start_time:e.detail.slot_start_time,end_time:e.detail.slot_end_time},i={name:e.detail.customer_name,mobile:e.detail.contact_number,email:e.detail.email_address,address:o},n=[],s=[],l="";e.detail.orderDetail.forEach(function(e,t){e.Package.forEach(function(e,t){a={fasting:e.fasting,fasting_time:e.fasting_time},e.test_detail.forEach(function(e,t){l+=e.name,l+=","}),s.push({display_name:e.display_name,actual_price:e.actaul_price,healthian_price:e.healthians_price,all_package_StringName:l,all_package_name:e.test_detail})}),n.push({name:e.cust_name,age:e.cust_age,gender:e.cust_gender,pkg:a,newpkg:s})}),"yes"===e.detail.hard_copy&&(e.coupondata.hard_copy=!0),e.detail.coupon_code&&(e.coupondata.applied=!0,e.coupondata.discount=e.detail.discounted_amount),e.payatcollection=e.detail.payatcollection,localStorage.setItem("booking_id",e.detail.booking_id),localStorage.setItem("userDetail",JSON.stringify(i)),localStorage.setItem("sample_date",e.date),"Cash on delivery"!==localStorage.getItem("type_of_payment")&&localStorage.setItem("type_of_payment","Online"),localStorage.setItem("customerDetails",JSON.stringify(n)),localStorage.setItem("time_slot",JSON.stringify(r)),localStorage.setItem("total_amount",e.detail.payable_amount),localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),e.bookingdetail=!1,e.paymentsection=!0}else e.error=!0,e.errorMsg=t.message,e.bookingdetail=!0,e.paymentsection=!1}),i(function(){e.sendBookingError=!1,e.sendReferenceError=!1,e.error=!1},3e3)},e.termsConditionCheck=function(){1==e.termsCondition,e.termError=!1},e.payFunction=function(){e.paymentsection=!0,e.bookingdetail=!1},e.makeFinalPayment=function(){if(void 0===e.termsCondition||e.termsCondition===!1)return e.termError=!0,focus("userterms"),!1;if(localStorage.setItem("type_of_payment","cash"==e.payradio?"Cash on delivery":"Online"),"cash"==e.payradio){var t=p.serverUrl+"commonservice/update_payment_type",a={booking_id:e.booking_id,payment_type:"cash"==e.payradio?"Cash on delivery":"Online",term_condition:!0};doPost(l,t,a,"",function(t){e.loaderVar=!1,t.status&&u.go("payment-summary",{action:"Get",booking_id:e.booking_id,mobile:e.mobile})})}if("payu"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var o=$("#paymentForm");o.find("[name=booking_id]").val(e.booking_id),e.onlineDiscountApplied?(o.find("[name=txnAmount]").val(e.discountamount-e.onlineDiscount),o.find("[name=makePaymentOnlineDiscount]").val("yes")):o.find("[name=txnAmount]").val(e.discountamount),o.find("[name=custName]").val(e.name),o.find("[name=custMobile]").val(e.mobile),o.find("[name=custEmail]").val(e.email),o.submit()}if("mobikwik"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var o=$("#paymentForm3");o.find("[name=booking_id]").val(e.booking_id),e.onlineDiscountApplied?(o.find("[name=txnAmount]").val(e.discountamount-e.onlineDiscount),o.find("[name=makePaymentOnlineDiscount]").val("yes")):o.find("[name=txnAmount]").val(e.discountamount),o.find("[name=custName]").val(e.name),o.find("[name=custMobile]").val(e.mobile),o.find("[name=custEmail]").val(e.email),o.submit()}if("paytm"==e.payradio){localStorage.setItem("makepayment_to_summary","true");var o=$("#paymentForm2");o.find("[name=booking_id]").val(e.booking_id),e.onlineDiscountApplied?(o.find("[name=txnAmount]").val(e.discountamount-e.onlineDiscount),o.find("[name=makePaymentOnlineDiscount]").val("yes")):o.find("[name=txnAmount]").val(e.discountamount),o.find("[name=custName]").val(e.name),o.find("[name=custMobile]").val(e.mobile),o.find("[name=custEmail]").val(e.email),o.find("[name=user_id]").val(e.booking_id),o.submit()}},e.makeSubscriptionFinalPayment=function(){if(void 0===e.termsCondition||e.termsCondition===!1)return e.termError=!0,focus("userterms"),!1;if("payu"==e.payradio){var t=$("#paymentForm");t.find("[name=booking_id]").val(e.subscription_id),t.find("[name=txnAmount]").val(e.subscription_amount),t.find("[name=custMobile]").val(e.mobile),t.find("[name=payment_type_source]").val("subscription"),t.submit()}if("mobikwik"==e.payradio){var t=$("#paymentForm3");t.find("[name=booking_id]").val(e.subscription_id),t.find("[name=txnAmount]").val(e.subscription_amount),t.find("[name=payment_type_source]").val("subscription"),t.submit()}if("paytm"==e.payradio){var t=$("#paymentForm2");t.find("[name=booking_id]").val(e.subscription_id),t.find("[name=txnAmount]").val(e.subscription_amount),t.find("[name=payment_type_source]").val("subscription"),t.submit()}},e.makeServiceFinalPayment=function(){if(void 0===e.termsCondition||e.termsCondition===!1)return e.termError=!0,focus("userterms"),!1;if("payu"==e.payradio){var t=$("#paymentForm");t.find("[name=booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.service_amount),t.find("[name=custMobile]").val(e.mobile),t.find("[name=payment_type_source]").val("service"),t.submit()}if("mobikwik"==e.payradio){var t=$("#paymentForm3");t.find("[name=booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.service_amount),t.find("[name=payment_type_source]").val("service"),t.submit()}if("paytm"==e.payradio){var t=$("#paymentForm2");t.find("[name=booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.service_amount),t.find("[name=payment_type_source]").val("service"),t.submit()}},e.clickPaymentMode=function(t){e.payradio=t,"cash"===e.payradio&&(e.onlineDiscountApplied=!1)}}function makeOrderServicePaymentController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g){e.detail={},e.error=!1,e.coupondata={},e.coupondata.applied=!1,e.coupondata.hard_copy=!1,e.termsCondition=!0,e.termError=!1,e.payradio="paytm",n.meta_robots="noindex, nofollow",e.onlineDiscount=0,e.service_amount=0,e.payatcollection=0,e.total_booking_service_amount=0;var _=p.paymentUrl;e.payuAction=g.trustAsResourceUrl(_+"payupayment"),e.mobikwikAction=g.trustAsResourceUrl(_+"mobikwikpayment"),e.payzappAction=g.trustAsResourceUrl(_+"payzapppayment"),e.paytmAction=g.trustAsResourceUrl(_+"paytmpayment"),e.getBookingServiceDetails=function(t,a,o){var r={service_booking_id:o,mobile:a,order_id:t};localStorage.setItem("booking_service_mobile",a);var i=p.paymentUrl+"webv1/commonservice/get_booking_service_detail_for_payment";doPostWithOutToken(l,i,r,"",function(t){if(1==t.status){if(e.detail=t.data,e.payatcollection=e.detail.payatcollection,e.detail.service_details){var a=0;e.detail.service_details.payment_details&&(e.detail.service_details.payment_details.forEach(function(e,t){a+=parseInt(e.recieved_amount)}),e.service_amount=e.detail.service_details.order_price-a)}e.total_booking_service_amount=e.payatcollection+e.service_amount}else u.go("home")})},s.search().booking_id&&s.search().service_booking_id&&s.search().mobile?(e.booking_id=s.search().booking_id,e.mobile=s.search().mobile,e.service_booking_id=s.search().service_booking_id,e.getBookingServiceDetails(e.booking_id,e.mobile,e.service_booking_id)):u.go("home"),e.termsConditionCheck=function(){1==e.termsCondition,e.termError=!1},e.makeBookingServiceFinalPayment=function(){if(void 0===e.termsCondition||e.termsCondition===!1)return e.termError=!0,focus("userterms"),!1;if("payu"==e.payradio){var t=$("#paymentForm");t.find("[name=booking_id]").val(e.booking_id),t.find("[name=service_booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.total_booking_service_amount),t.find("[name=custMobile]").val(e.mobile),t.submit()}if("mobikwik"==e.payradio){var t=$("#paymentForm3");t.find("[name=booking_id]").val(e.booking_id),t.find("[name=service_booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.total_booking_service_amount),t.find("[name=custMobile]").val(e.mobile),t.submit()}if("paytm"==e.payradio){var t=$("#paymentForm2");t.find("[name=booking_id]").val(e.booking_id),t.find("[name=service_booking_id]").val(e.service_booking_id),t.find("[name=txnAmount]").val(e.total_booking_service_amount),t.find("[name=custMobile]").val(e.mobile),t.submit()}}}function orderServicePaymentSummaryController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,m){e.detail={},e.error=!1,e.stateParms=m,n.meta_robots="noindex, nofollow",e.service_amount=0,e.payatcollection=0,e.total_booking_service_amount=0,e.stringToInt=function(e){return parseInt(e)},e.getHardcopyPrice=function(){c.getHardcopyPrice(function(t){1==t.status&&(e.hardcopyPrice=t.data.price)})},e.getHardcopyPrice();e.getBookingServiceDetails=function(t,a,o){var r={service_booking_id:o,mobile:a,order_id:t},i=p.paymentUrl+"webv1/commonservice/get_booking_service_detail_for_payment";doPostWithOutToken(l,i,r,"",function(t){if(1==t.status){e.payment_data=t.data;var a=0,o=0;e.payment_data.service_details&&e.payment_data.service_details.payment_details&&e.payment_data.service_details.payment_details.forEach(function(e,t){a+=parseInt(e.recieved_amount)}),e.payment_data.payment_details&&e.payment_data.payment_details&&e.payment_data.payment_details.forEach(function(e,t){o+=parseInt(e.recieved_amount)}),e.total_booking_service_amount=o+a,e.total_booking_service_order_price=parseInt(e.payment_data.order_price)+parseInt(e.payment_data.service_details.order_price)}else e.error=!0,e.payment_api_error=!0,e.errorMsg=t.message})},s.search().booking_id&&s.search().service_booking_id?(e.booking_id=s.search().booking_id,e.service_booking_id=s.search().service_booking_id,s.search().mobile?(e.mobile=s.search().mobile,localStorage.removeItem("booking_service_mobile")):null!==localStorage.getItem("booking_service_mobile")&&(e.mobile=localStorage.getItem("booking_service_mobile")),e.getBookingServiceDetails(e.booking_id,e.mobile,e.service_booking_id)):u.go("home")}function missedcallController(e,t,a,o,r,i,n,s){if(e.stateParms=i,a.meta_robots="noindex, nofollow",e.stateParms&&"undefined"!==e.stateParms.phone_number){e.phone_number=e.stateParms.phone_number;var l={data:{mobile:e.phone_number,source:"web"}},d=n.couponUrl+"webv1/web_api/saveMissedCallCompaignData";doPostWithOutToken(r,d,l,"",function(e){e.status?"undefined"!==e.mobile&&s.eventTrack("Misscall Captured",{category:"Misscall",label:"phone",value:e.mobile}):alert(e.message)})}}function lifestyleController(e,t,a,o,r,i,n,s){if(e.stateParms=i,e.stateParms&&"undefined"!==e.stateParms.id){e.id=e.stateParms.id,a.og_url="https://goo.gl/deRpjb";var l=n.serverUrl+"commonservice/getLifestylePath",d={id:e.id};doPostWithOutToken(r,l,d,"",function(t){t.status?(e.image_path=t.data,a.og_image=e.image_path):alert(t.message)})}}function technicalVideoController(e,t,a,o,r,i,n,s,l){var d={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return d.Android()||d.BlackBerry()||d.iOS()||d.Opera()||d.Windows()}},c=n.couponUrl+"webv1/web_api/getTechVideo";if(doGet(r,c,function(t){t.status?e.videoURL=l.trustAsResourceUrl(t.data):alert(t.message)}),o.search().booking_id&&o.search().mobile){var u=i.booking_id,m=i.mobile,p=new Date,g=moment().format("YYYY-MM-DD");if(d.any())var _="mobile";else var _="web";var c=n.couponUrl+"Video_tracking/trackVideoDisplay",f={data:{booking_id:u,mobile:m,video_start_time:g+" "+p.toLocaleTimeString(),video_end_time:"null",source:_,video_duration:"",video_seen:"1"}};doPostWithOutToken(r,c,f,"",function(e){})}}function maternalSerumController(e,t,a,o,r,i,n,s,l){e.stateParms=i,e.edd_type="lmp",e.pregnancy_type="single",e.booking_id=e.stateParms.booking_id,e.cust_id=e.stateParms.customer_id,e.preTestDataSuccess=!1,e.loaderVar=!1,e.onLoad=function(t,a,o,r,i,n){var s=!1;e.files.length<=3?angular.forEach(e.files,function(t,a){s||(t.filesize/1e3<5120?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],s=!0,l.alert("Report size should not be exceeded 5 MB")))}):(e.files=e.files.slice(0,3),angular.forEach(e.files,function(t,a){s||(t.filesize/1e3<5120?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],s=!0,l.alert("Report size should not be exceeded 5 MB")))}))};var d={data:{booking_id:e.booking_id,customer_id:e.cust_id,source:"web"}},c=n.couponUrl+"webv1/web_api/getOrderCustomerDetails";doPostWithOutToken(r,c,d,"",function(t){1==t.status&&(e.name=t.data.name,e.age=t.data.age,"m"!=t.data.gender&&"M"!=t.data.gender||(e.gender="Male"),"f"!=t.data.gender&&"F"!=t.data.gender||(e.gender="Female"))}),e.addMaternalSerumData=function(){if(e.maternalFormSubmitted=!1,void 0===e.ultrasound_date||""===e.ultrasound_date||0==e.ultrasound_date.length)return e.maternalserumForm.ultrasound_date.$dirty=!0,e.maternalserumForm.ultrasound_date.$invalid=!0,!1;if(void 0===e.usg_by_week||""===e.usg_by_week)return e.maternalserumForm.usg_by_week.$dirty=!0,e.maternalserumForm.usg_by_week.$invalid=!0,!1;if(void 0===e.usg_by_day||""===e.usg_by_day)return e.maternalserumForm.usg_by_day.$dirty=!0,e.maternalserumForm.usg_by_day.$invalid=!0,!1;if(void 0===e.edd||""===e.edd)return e.maternalserumForm.edd.$dirty=!0,e.maternalserumForm.edd.$invalid=!0,!1;if(void 0===e.lmp||""===e.lmp)return e.maternalserumForm.lmp.$dirty=!0,e.maternalserumForm.lmp.$invalid=!0,!1;if(void 0===e.ivf_pregnancy||""===e.ivf_pregnancy)return e.maternalserumForm.ivf_pregnancy.$dirty=!0,e.maternalserumForm.ivf_pregnancy.$invalid=!0,!1;if(void 0===e.racial_origin||""===e.racial_origin)return e.maternalserumForm.racial_origin.$dirty=!0,e.maternalserumForm.racial_origin.$invalid=!0,!1;if(void 0===e.weight||""===e.weight)return e.maternalserumForm.weight.$dirty=!0,e.maternalserumForm.weight.$invalid=!0,!1;if(void 0===e.dob||""===e.dob)return e.maternalserumForm.dob.$dirty=!0,e.maternalserumForm.dob.$invalid=!0,!1;if(void 0===e.diabetic||""===e.diabetic)return e.maternalserumForm.diabetic.$dirty=!0,e.maternalserumForm.diabetic.$invalid=!0,!1;if(void 0===e.smoking||""===e.smoking)return e.maternalserumForm.smoking.$dirty=!0,e.maternalserumForm.smoking.$invalid=!0,!1;if(void 0===e.ntd||""===e.ntd)return e.maternalserumForm.ntd.$dirty=!0,e.maternalserumForm.ntd.$invalid=!0,!1;if(void 0===e.ds||""===e.ds)return e.maternalserumForm.ds.$dirty=!0,e.maternalserumForm.ds.$invalid=!0,!1;if(void 0===e.files||""===e.files)return e.maternalserumForm.files.$dirty=!0,e.maternalserumForm.files.$invalid=!0,!1;"undefined"==typeof e.files?e.imagePath="":e.imagePath=e.files[0].image;var a={data:{booking_id:e.booking_id,cust_id:e.cust_id,ultrasound_date:e.ultrasound_date,usg_by_week:e.usg_by_week,usg_by_day:e.usg_by_day,edd:e.edd,edd_type:e.edd_type,lmp:e.lmp,ivf_pregnancy:e.ivf_pregnancy,pregnancy_type:e.pregnancy_type,racial_origin:e.racial_origin,weight:e.weight,diabetic:e.diabetic,smoking:e.smoking,ntd:e.ntd,ds:e.ds,source:"web",dob:e.dob,image1:encodeURIComponent(e.imagePath)}};e.loaderVar=!0,e.maternalForm=!0;var o=n.couponUrl+"webv1/web_api/setCustomerPretestInfo";doPostWithOutToken(r,o,a,"",function(a){1==a.status?(e.loaderVar=!1,e.preTestDataSuccess=!0,t(function(){l.location.href="/"},3e3)):(e.loaderVar=!1,e.preTestDataSuccess=!1,e.maternalForm=!1,l.alert(a.message))})}}function paytmPromoteController(e,t,a,o,r,i,n,s,l,d,c){var u={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return u.Android()||u.BlackBerry()||u.iOS()||u.Opera()||u.Windows()}};e.stateParms=i,e.compaignmsg=!1,e.sendDetails=function(){if(e.addLeadFormSubmitted=!1,"paytm"===c.current.name&&(e.ga_category="Paytm Diabetes",e.utm_id="paytm-diabetes",e.remark_message="Customer search for : Diabetes",e.redirect_link="profile/hba1c"),"hdfc"===c.current.name&&(e.ga_category="HDFC HarDostFit",e.utm_id="business-development",e.remark_message="Customer search for : HarDostFit",e.redirect_link="package/healthians-hardostfit-package"),void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,s.eventTrack("Validation Fail",{category:e.ga_category,label:"Mobile No. not enter"}),!1;if(e.addLeadForm.name.$invalid)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,s.eventTrack("Validation Fail",{category:e.ga_category,label:"Name invalid"}),!1;if(e.addLeadForm.customeremail.$invalid)return e.addLeadForm.customeremail.$dirty=!0,e.addLeadForm.customeremail.$invalid=!0,s.eventTrack("Validation Fail",{category:e.ga_category,label:"Email invalid"}),!1;var a={data:{utm_id:e.utm_id,mobile:e.customerNo}};u.any()?a.data.source="mobile":a.data.source="web","undefined"!=typeof e.customerName&&""!==e.customerName&&(a.data.name=e.customerName),"undefined"!=typeof e.customerEmail&&""!==e.customerEmail&&(a.data.email=e.customerEmail),"undefined"!=typeof e.stateParms.utm_source&&(a.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(a.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(a.data.utm_medium=e.stateParms.utm_medium),a.data.message=e.remark_message,localStorage.getItem("guid")&&(a.data.guid=localStorage.getItem("guid"));var o=n.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(r,o,a,"",function(o){if(o.status){e.compaignmsg=!0;var r=e.customerNo;e.customerName="",e.customerEmail="",e.customerNo="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.addLeadForm.customeremail.$dirty=!1;var i=new Date,n=new Date(i.getTime()+864e5);u.any()?(document.cookie="ExitPopupMobileCookie=1; expires="+n.toUTCString(),localStorage.setItem("isLeadCaptured",!0)):(document.cookie="ExpirationCookieTest=1; expires="+n.toUTCString(),localStorage.setItem("isLeadCaptured",!0)),"Lead successfully inserted"===o.message&&(s.eventTrack("Lead Captured",{category:e.ga_category,label:r}),"undefined"!=typeof d.fbq&&d.fbq("track","Lead",a)),t(function(){$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click(),d.location.href=e.redirect_link},4e3)}else alert(o.message)})}}function mostSellingController(e,t,a,o,r,i,n,s){var l=JSON.parse(localStorage.getItem("cityID"));null===l&&localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),e.getPopularPackagesList=function(){r({method:"GET",url:i.couponUrl+"webv1/web_api/getPopularPackages",params:{city:JSON.parse(localStorage.getItem("cityID"))[0].city_name}}).success(function(t){t.data&&(e.packageList=t.data)})},e.getPopularPackagesList(),o.search().vendor_code&&localStorage.setItem("vendor_code",o.search().vendor_code),o.search().admitad_uid&&localStorage.setItem("admitad_uid",o.search().admitad_uid)}function myAddressController(e,t,a,o,r,i,n,s,l,d,c){var u={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return u.Android()||u.BlackBerry()||u.iOS()||u.Opera()||u.Windows()}},m=localStorage.getItem("token");if(e.modifyAddressFlag={},e.editAddressFormModel={},e.editAddressForm={},e.distanceError={},e.sublocalityDropDownSelected={},e.editAddressFormSubmitted=!1,e.addAddressErrorAll={},e.addAddressErrorMsgAll={},e.sublocalityDropDownSelectedSeperate=!1,e.distanceErrorSeperate=!1,e.editCheck=!1,e.addNewAddressFlag=!1,e.showAddNewAddress=function(){e.addNewAddressFlag=!e.addNewAddressFlag},e.backMyAddress=function(){e.addNewAddressFlag=!1,e.editCheck=!1,_.each(e.modifyAddressFlag,function(t,a){e.modifyAddressFlag[a]=!1})},e.modifyAddress=function(t,a,o,r,i){s.scrollTo(0,0),e.editCheck=!0,e.modifyAddressFlag[t]=!e.modifyAddressFlag[t],e.sublocalityDropDownSelected[t]=!0,
e.editAddressFormModel[t]={},e.editAddressFormModel[t].locality=a,e.editAddressFormModel[t].houseno=o,e.editAddressFormModel[t].landmark=r,e.editAddressFormModel[t].postal_code=i},e.cancelEditingAddress=function(t){e.editCheck=!1,e.modifyAddressFlag[t]=!e.modifyAddressFlag[t],e.resetSubLocality(t)},e.setDefaultAddress=function(t){e.useAddressPresent=!1,e.loaderVarAddress=!0;var a=parseInt(t.address_id),o=JSON.parse(localStorage.getItem("user")),r=o.user_id,i=d.serverUrl+"commonservice/markAddressToDefault",n={user_id:r,address_id:a,log_user_id:r};doPost(c,i,n,m,function(a){if(a.status){var o=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message='"'+t.address+'" marked as your default address.'}else{var o=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(o.user_id),e.address_msg_visible=!0,e.address_message=a.message}})},e.address_delete_confirmation=function(t){e.deleteaddress=t,e.address_delete_visible=!0},e.deleteUserAddress=function(t){e.useAddressPresent=!1,e.loaderVarAddress=!0;var a=parseInt(t.address_id),o=JSON.parse(localStorage.getItem("user")),r=o.user_id,i=d.serverUrl+"commonservice/deleteUserAddress",n={user_id:r,address_id:a,log_user_id:r};doPost(c,i,n,m,function(t){if(t.status){var a=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(a.user_id),e.address_msg_visible=!0,e.address_message="Address deleted successfully."}else{var a=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(a.user_id),e.address_msg_visible=!0,e.address_message=t.message}})},e.getAddressesByUserId=function(a){e.editCheck=!1;var o=(JSON.parse(localStorage.getItem("cityID"))[0].city_name,d.serverUrl+"commonservice/getAddressesByUserId"),r={user_id:a,log_user_id:a};doPost(c,o,r,m,function(a){a.data?(e.noOfAdd=a.data.length,e.addressList=[],e.noOfAdd>0?(e.useAddressPresent=!0,e.loaderVarAddress=!1,e.addressList=a.data,e.addressList.forEach(function(t,a){e.modifyAddressFlag[t.address_id]=!1,e.distanceError[t.address_id]=!1,e.sublocalityDropDownSelected[t.address_id]=!1,e.addAddressErrorAll[t.address_id]=!1,1===parseInt(t.default_status)&&(e.existingaddress=parseInt(t.address_id),e.defaultExistingAddressObject=t)}),_.isEmpty(e.defaultExistingAddressObject)&&(e.defaultExistingAddressObject=e.addressList[0],e.addressList[0].default_status=1)):(e.useAddressPresent=!1,e.loaderVarAddress=!1,e.addressList=[])):"error"===a.status&&("TOKEN_EXPIRED"!=a.code&&"INVALID_TOKEN"!=a.code&&"AUTH_FAILED"!=a.code||t.$broadcast("tokenExpired"))})},e.getLocalityUsingLatLong=function(){var a=JSON.parse(localStorage.getItem("user")),o=a.user_id;e.distanceError[e.selected_address_id]=!1;var r=d.serverUrl+"commonservice/getnearestlocality",i={lat:t.sep_sub_lat,long:t.sep_sub_long,log_user_id:o};doPost(c,r,i,m,function(a){1==a.status?(e.editAddressFormModel[e.selected_address_id].new_locality=a.data.locality_id,e.editAddressFormModel[e.selected_address_id].locality_city=a.data.city_name,e.editAddressFormModel[e.selected_address_id].postal_code=e.postal_code,e.sublocalityDropDownSelected[e.selected_address_id]=!0):"error"===a.status?"TOKEN_EXPIRED"!=a.code&&"INVALID_TOKEN"!=a.code&&"AUTH_FAILED"!=a.code||t.$broadcast("tokenExpired"):(e.distanceError[e.selected_address_id]=!0,e.sublocalityDropDownSelected[e.selected_address_id]=!1,e.distanceErrorMsg=a.message,e.editAddressFormModel[e.selected_address_id].locality="",e.locality_id="",t.sep_sub_lat="",t.sep_sub_long="",e.sep_sub_lat="",e.sep_sub_long="",n(function(){e.distanceError[e.selected_address_id]=!1,e.distanceErrorMsg=""},3e3))})},e.getLocalityUsingLatLongSeperate=function(){var a=JSON.parse(localStorage.getItem("user")),o=a.user_id;e.distanceErrorSeperate=!1;var r=d.serverUrl+"commonservice/getnearestlocality",i={lat:e.sub_lat,long:e.sub_long,log_user_id:o};doPost(c,r,i,m,function(a){1==a.status?(e.new_locality=a.data.locality_id,e.locality_city=a.data.city_name,e.postal_code_new=e.postal_code,e.sublocalityDropDownSelectedSeperate=!0):"error"===a.status?"TOKEN_EXPIRED"!=a.code&&"INVALID_TOKEN"!=a.code&&"AUTH_FAILED"!=a.code||t.$broadcast("tokenExpired"):(e.distanceErrorSeperate=!0,e.sublocalityDropDownSelectedSeperate=!1,e.distanceErrorMsg=a.message,e.chosenPlace="",e.new_locality="",e.addAddressForm.pacinput.$dirty=!1,n(function(){e.distanceErrorSeperate=!1,e.distanceErrorMsg=""},3e3))})},e.resetSubLocality=function(a){e.postal_code="",t.postal_code="",t.sep_sub_lat="",t.sep_sub_long="",e.sep_sub_lat="",e.sep_sub_long="",e.sublocalityDropDownSelected[a]=!1,e.editAddressFormModel[a].locality="",e.editAddressForm[a]["pacinput_"+a].$dirty=!1,e.editAddressFormModel[a].postal_code="",e.editAddressForm[a].postal_code.$dirty=!1},e.updateAddressDetails=function(a,o,r){if(e.editAddressFormSubmitted=!1,void 0===e.editAddressFormModel[a].locality||""===e.editAddressFormModel[a].locality)return e.editAddressForm[a]["pacinput_"+a].$dirty=!0,e.editAddressForm[a]["pacinput_"+a].$invalid=!0,e.editAddressForm[a]["pacinput_"+a].$error.required=!0,e.loaderVar=!1,!1;if(void 0===e.editAddressFormModel[a].houseno||""===e.editAddressFormModel[a].houseno)return e.editAddressForm[a].houseno.$dirty=!0,e.editAddressForm[a].houseno.$invalid=!0,e.editAddressForm[a].houseno.$error.required=!0,e.loaderVar=!1,!1;if(void 0===e.editAddressFormModel[a].postal_code||""===e.editAddressFormModel[a].postal_code)return e.editAddressForm[a].postal_code.$dirty=!0,e.editAddressForm[a].postal_code.$invalid=!0,e.editAddressForm[a].postal_code.$error.required=!0,e.loaderVar=!1,!1;u.any()?e.device="mobile":e.device="web";var i=JSON.parse(localStorage.getItem("user")),s="",l="";e.editAddressFormModel[a].new_locality?(s=e.editAddressFormModel[a].new_locality,l=e.editAddressFormModel[a].locality_city):(s=o,l=r);var p=_.where(e.addressList,{address_id:a});if(p.length>0)if(p[0].sub_locality===e.editAddressFormModel[a].locality);else if(!(void 0!==t.sep_sub_lat&&""!==t.sep_sub_lat||void 0!==t.sep_sub_long&&""!==t.sep_sub_long))return e.addAddressErrorAll[a]=!0,e.editAddressFormModel[a].locality="",e.addAddressErrorMsgAll[a]="Please select location from google dropdown",n(function(){e.addAddressErrorAll[a]=!1,e.addAddressErrorMsgAll[a]=""},6e3),!1;var g={user_id:i.user_id,log_user_id:i.user_id,locality_id:s,city:l,address_id:a,house_number:e.editAddressFormModel[a].houseno,landmark:e.editAddressFormModel[a].landmark,pincode:e.editAddressFormModel[a].postal_code,source:"web",device_source:e.device,sub_locality:e.editAddressFormModel[a].locality};void 0!==t.sep_sub_lat&&""!==t.sep_sub_lat&&void 0!==t.sep_sub_long&&""!==t.sep_sub_long&&(g.lat=t.sep_sub_lat,g.lon=t.sep_sub_long);var f={data:g},b=d.couponUrl+"customer/account/update_address";doPost(c,b,f,m,function(o){if(o.status){e.editCheck=!1;var r=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(r.user_id),e.addAddressErrorAll[a]=!1,e.addAddressErrorMsgAll[a]="",e.postal_code="",t.postal_code="",t.sep_sub_lat="",t.sep_sub_long="",e.sep_sub_lat="",e.sep_sub_long=""}else e.addAddressErrorAll[a]=!0,e.addAddressErrorMsgAll[a]=o.message})},e.resetSubLocalitySeperate=function(){e.sublocalityDropDownSelectedSeperate=!1,e.chosenPlace="",e.locality_id="",e.postal_code_new="",e.postal_code="",t.postal_code="",e.new_locality="",e.locality_city="",e.sub_lat="",e.sub_long="",e.addAddressForm.pacinput.$dirty=!1,e.addAddressForm.postal_code.$dirty=!1},e.showLoginLoader=!1,e.sendNewAddressDetails=function(){if(void 0===e.chosenPlace||""===e.chosenPlace)return e.addAddressForm.pacinput.$dirty=!0,e.addAddressForm.pacinput.$invalid=!0,e.addAddressForm.pacinput.$error.required=!0,focus("pacinput"),!1;if(void 0===e.houseno||""===e.houseno)return e.addAddressForm.shouseno.$dirty=!0,e.addAddressForm.shouseno.$invalid=!0,e.addAddressForm.shouseno.$error.required=!0,focus("shouseno"),!1;if(void 0===e.postal_code_new||""===e.postal_code_new)return e.addAddressForm.s_postal_code.$dirty=!0,e.addAddressForm.s_postal_code.$invalid=!0,e.addAddressForm.s_postal_code.$error.required=!0,focus("s_postal_code"),!1;if(u.any()?e.device="mobile":e.device="web",void 0===e.new_locality||void 0===e.locality_city||""===e.new_locality||""===e.locality_city)return e.addAddressError=!0,e.chosenPlace="",focus("pacinput"),e.addAddressErrorMsg="Please select the location from google dropdown.",n(function(){e.addAddressError=!1,e.addAddressErrorMsg=""},4e3),!1;e.showLoginLoader=!0;var t=JSON.parse(localStorage.getItem("user")),a={user_id:t.user_id,log_user_id:t.user_id,locality_id:e.new_locality,city:e.locality_city,sub_locality:e.chosenPlace,house_number:e.houseno,landmark:e.landmark,pincode:e.postal_code_new,lat:e.sub_lat,lon:e.sub_long,source:"web",device_source:e.device},o={data:a},r=d.couponUrl+"customer/account/add_address";doPost(c,r,o,m,function(t){if(t.status){var a=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(a.user_id),e.sublocalityDropDownSelectedSeperate=!1,e.chosenPlace="",e.addAddressForm.pacinput.$dirty=!1,e.postal_code_new="",e.addAddressForm.s_postal_code.$dirty=!1,e.locality_id="",e.houseno="",e.addAddressForm.shouseno.$dirty=!1,e.landmark="",e.addAddressForm.landmark.$dirty=!1,e.addAddressError=!1,e.addAddressErrorMsg="",e.backMyAddress()}else e.addAddressError=!0,e.addAddressErrorMsg=t.message;e.showLoginLoader=!1})},"true"==localStorage.getItem("isLogin")){var p=JSON.parse(localStorage.getItem("user"));e.getAddressesByUserId(p.user_id)}}function myBookingController(e,t,a,o,r,i,n,s,l,d,c){e.mybookingList=[],e.loaderVar=!0,e.nodataBooking=!1,e.showOrderDetail=!0,null!==localStorage.getItem("user")&&(e.userContact=JSON.parse(localStorage.getItem("user")).mobile),e.myBooking=function(){if("true"==localStorage.getItem("isLogin"))var t=JSON.parse(localStorage.getItem("user")).user_id,a={user_id:t,log_user_id:t};else var a={user_id:""};r.myBookings(a,function(t){1==t.status?(e.loaderVar=!1,e.mybookingList=t.data,0==e.mybookingList.length&&(e.loaderVar=!1,e.nodataBooking=!0)):(e.loaderVar=!1,e.nodataBooking=!0)})},e.myBooking(),e.order={},e.hardcopy=!1,e.getBookingOrderDetail=function(t){e.order={};var a=JSON.parse(localStorage.getItem("user")).user_id,o={booking_id:t,user_id:a,log_user_id:a};e.orderDetail=!0,e.loaderVar1=!0,e.showOrderDetail=!1,e.hardcopy=!1,e.mybookingList.forEach(function(a,r){if(t===a.booking_id){e.order=a;var i=d.serverUrl+"commonservice/myBookingSuborder",n=localStorage.getItem("token");doPost(c,i,o,n,function(t){t.status&&(e.order.suborders=t.data,e.showOrderDetail=!0,e.loaderVar1=!1)}),"yes"==a.hard_copy&&(e.hardcopy=!0)}})},e.closeBookingOrderDetail=function(){e.orderDetail=!1,e.showOrderDetail=!1,e.loaderVar1=!1,e.order={}}}function myReportController(e,t,a,o,r,i,n,s,l,d,c){e.myReportData=[],e.myReportCountMember=5,e.myReportCountUser=5,e.shareReport=!1,e.reportName="",e.reportpath="",e.myreport=function(){if("true"==localStorage.getItem("isLogin"))var t=JSON.parse(localStorage.getItem("user")).user_id,a={user_id:t,log_user_id:t,user_limit:e.myReportCountUser,member_limit:e.myReportCountMember};else var a={user_id:""};r.myReports(a,function(t){t.status===!0&&(null!==t.data?(e.loaderVar=!1,e.myReportData=t.data,e.nodata=!0):(e.nodata=!1,e.loaderVar=!1,e.nodataReport=!0))})},e.myreport(),e.reportList=function(t){"user"===t?e.myReportCountUser+=5:"member"===t&&(e.myReportCountMember+=5),e.myreport()},e.reportPdf=function(e,t,a,o){var r=d.couponUrl+"webv1/web_api/getReportContent";c({method:"GET",url:r,params:{booking_id:t,report_id:e,customer_id:a},responseType:"blob"}).success(function(e){if(0!==e.size){var t=o,a=document.createElement("a");document.body.appendChild(a),a.style="display: none";var r=new Blob([e],{type:"application/pdf"}),i=window.URL.createObjectURL(r);a.href=i,a.download=t,a.click()}else s.alert("No report available.")})},e.reportShare=function(t){e.shareReport=!0,e.report_id=t.report_id,e.report_booking_id=t.booking_id,e.report_customer_id=t.customer_id},e.closereportShare=function(){e.shareReport=!1},e.userReportShare=function(t){var a=JSON.parse(localStorage.getItem("user")).user_id,o={email:t,log_user_id:a,booking_id:e.report_booking_id,report_id:e.report_id,customer_id:e.report_customer_id,source:"web"};r.shareCustReport(o,function(t){t.status?(e.reportSharemsg=t.message,e.reportSharemsgflag=!0,n(function(){e.reportSharemsg="",e.shareReport=!1,e.reportSharemsgflag=!1},5e3)):s.alert(t.message)})}}function orderTrackingController(e,t,a,o,r,i,n,s,l,d){e.packageList=[],e.tags=[],e.pkgDetail=[],e.loading=!0,e.stateParms=s;var c={order_id:e.stateParms.booking_id,user_id:JSON.parse(localStorage.getItem("user")).user_id,log_user_id:JSON.parse(localStorage.getItem("user")).user_id};a.meta_robots="noindex, nofollow",e.allowedStatus=["2","5","7","9","12","15","20","102","8","3","13"],d.getOrderTrackingDetails(c,function(t){if(t.status){e.bookingDetail=t.data;var a=0;null!==e.bookingDetail.discounted_amount&&(a=parseInt(e.bookingDetail.discounted_amount)),"yes"===e.bookingDetail.hard_copy?e.total_amount=parseInt(e.bookingDetail.total_amount)-50:e.total_amount=parseInt(e.bookingDetail.total_amount),null!==e.bookingDetail.coupon_code&&(e.total_amount=parseInt(e.total_amount)+parseInt(e.bookingDetail.discounted_amount)),null!==e.bookingDetail.convenience_fee&&"yes"===e.bookingDetail.convenience_fee&&(e.total_amount=parseInt(e.total_amount)-parseInt(e.bookingDetail.convenience_amount)),e.bookingDetail.donation_amount>0&&(e.total_amount=parseInt(e.total_amount)-e.bookingDetail.donation_amount),e.bookingDetail.wallet_amount_used>0&&(e.total_amount=parseInt(e.total_amount)+e.bookingDetail.wallet_amount_used),"undefined"!=typeof e.bookingDetail.online_discount&&e.bookingDetail.online_discount&&(e.total_amount=parseInt(e.total_amount)+e.bookingDetail.online_discount)}else o.path("/dashboard")}),e.getorderValue=function(e){return e.healthians_price},e.convenience_fees_visible=!1,e.showConvenienceFeesDialog=function(){e.convenience_fees_visible=!0},e.getConfigInfo=function(){var t=l.couponUrl+"webv1/web_api/getDonationInfo";doGet(r,t,function(t){"success"===t.status&&(e.config_details=t.data,e.coupon_notice=JSON.parse(e.config_details.coupon_discount_addon_config),"off"!==e.coupon_notice.status&&(e.coupon_notice_msg=e.coupon_notice.msg,e.coupon_notice_div=!0))})},e.getConfigInfo()}function packageController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,c,f,b,h,y){var k={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return k.Android()||k.BlackBerry()||k.iOS()||k.Opera()||k.Windows()}};y.scrollTo(0,0),s.search().vendor_code&&localStorage.setItem("vendor_code",s.search().vendor_code),e.packageList=[],e.tags=[],e.pkgDetail=[],e.loading=!0,e.also_consider_loading=!0,e.stateParms=m,e.addToCartModal=!1,e.disableName=!1,e.disableRelation=!1,e.disablePhone=!1,e.disableGender=!1,e.viewPkgbox=!1,e.customerDetails=[],e.searchedCartPackage="",e.customerIndex=void 0,e.addfield=!0,e.rel=!1,e.RelationShip=[],e.RelationShipwithoutSelf=[],e.samepkg=!1,e.addhide=!1,e.addNewPatient=!1,e.addNewPatientSocial=!1,e.tempUser=[],e.temp="",e.errorPkg=!1,e.errorPkgMsg="",e.packageDetailsPage=!0;if(e.getCityList=function(){h.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data)})},e.getCityList(),e.callVendorPixel=function(t){if(s.search().vendor_code){var a=p.serverUrl+"commonservice/getVendorPixel",o={vendor_code:s.search().vendor_code,page_source:"landing",lead_id:t};doPostWithOutToken(l,a,o,"",function(a){a.status&&(angular.element("footer").append(a.data),"undefined"!=typeof e.stateParms.publisher_id?f.eventTrack("Vendor Publisher Pixel",{category:s.search().vendor_code,label:e.stateParms.publisher_id}):f.eventTrack("Vendor Pixel",{category:s.search().vendor_code,label:t}))})}},e.sendLeadDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerNo||""===e.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,f.eventTrack("Validation Fail",{category:"SEO Page - Lead Form",label:"Mobile no. not enter"}),!1;if(void 0===e.customerName||""===e.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,f.eventTrack("Validation Fail",{category:"SEO Page - Lead Form",label:"Name not enter"}),!1;var t={data:{utm_id:"seoPageLead",name:e.customerName,mobile:e.customerNo,source:"web"}};s.search().vendor_code&&(t.data.utm_id=s.search().vendor_code),"undefined"!=typeof e.stateParms.utm_source&&(t.data.utm_source=e.stateParms.utm_source),"undefined"!=typeof e.stateParms.utm_campaign&&(t.data.utm_campaign=e.stateParms.utm_campaign),"undefined"!=typeof e.stateParms.utm_medium&&(t.data.utm_medium=e.stateParms.utm_medium),localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=p.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(l,a,t,"",function(a){if(a.status){var o=e.customerNo;e.customerName="",e.customerNo="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.compaignmsg=!0,"Lead successfully inserted"===a.message?(f.eventTrack("Lead Captured",{category:"SEO Page - Lead Form",label:o}),"undefined"!=typeof y.fbq&&y.fbq("track","Lead",t),e.callVendorPixel(a.lead_id),i(function(){e.compaignmsg=!1,$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click()},1e4)):i(function(){e.compaignmsg=!1,$(".modal-backdrop").remove(),$(".modal.in").find("button.close").click()},1e4)}else y.alert(a.message)})},e.getDetails=function(){if(e.stateParms){e.deal_type=u.current.name,e.link_rewrite=e.stateParms.link_rewrite;var t=JSON.parse(localStorage.getItem("cityID"));null===t?(e.city_id=23,localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}]))):e.city_id=t[0].city_id,f.eventTrack("SEO Page",{category:e.deal_type.toUpperCase(),label:e.link_rewrite});var a={deal_type:e.deal_type,link_rewrite:e.link_rewrite,city:e.city_id,source:"web"},o=p.couponUrl+"webv1/web_api/get_deal_details_for_seo";l({method:"GET",url:o,params:a}).success(function(t){1==t.status?(e.loading=!1,e.errorPkg=!1,e.pkgDetail=[],e.pkgDetail=t.data,e.pkgDetail.package_name=e.pkgDetail.name,e.pkgDetail.package_id=e.pkgDetail.deal_type+"_"+e.pkgDetail.id,e.pkgDetail.healthian_price=e.pkgDetail.healthians_price,e.pkgDetail.actual_price=e.pkgDetail.mrp,e.pkgDetail.test_count=e.pkgDetail.tests.length,e.pkgDetail.testId=e.pkgDetail.deal_type+"_"+e.pkgDetail.id,e.pkgDetail.display_name=e.pkgDetail.name,e.pkgDetail.test_packages=[{testId:e.pkgDetail.deal_type+"_"+e.pkgDetail.id,display_name:e.pkgDetail.name,healthians_price:e.pkgDetail.healthians_price,healthian_price:e.pkgDetail.healthians_price,actual_price:e.pkgDetail.mrp,tcategory_id:e.pkgDetail.deal_type+"_"+e.pkgDetail.id}],e.pkgDetail.test_details=e.pkgDetail.tests,e.pkgDetail.include_tests=[],e.pkgDetail.also_include_tests=[],e.pkgDetail.tests.forEach(function(t,a){t.tcategory_name=t.name,t.ptype=t.deal_type,e.pkgDetail.include_tests.push(t)}),n.title=e.pkgDetail.page_title,n.description=e.pkgDetail.meta_description,n.keyword=e.pkgDetail.meta_keyword,n.meta_footer=e.pkgDetail.meta_footer,""!==e.pkgDetail.canonical_url?n.meta_canonical=e.pkgDetail.canonical_url:n.meta_canonical="https://www.healthians.com"+s.$$url,"undefined"!=typeof e.pkgDetail.robots&&(n.meta_robots=e.pkgDetail.robots),i(function(){if(console.log("data - track - out",typeof y.fbq),"undefined"!=typeof y.fbq){var t=[];t.content_ids=[e.pkgDetail.package_id],t.contents=[{id:e.pkgDetail.package_id,quantity:1,item_price:e.pkgDetail.healthian_price}],t.content_type="product",t.content_category="SEO Pages",t.value=e.pkgDetail.healthian_price,t.currency="INR",t.content_name=e.pkgDetail.package_name,i(function(){y.fbq("track","ViewContent",t)},500)}else i(function(){if("undefined"!=typeof y.fbq){console.log("data - track - enter",typeof y.fbq);var t=[];t.content_ids=[e.pkgDetail.package_id],t.contents=[{id:e.pkgDetail.package_id,quantity:1,item_price:e.pkgDetail.healthian_price}],t.content_type="product",t.content_category="SEO Pages",t.value=e.pkgDetail.healthian_price,t.currency="INR",t.content_name=e.pkgDetail.package_name,y.fbq("track","ViewContent",t)}else i(function(){if("undefined"!=typeof y.fbq){console.log("data - track - enter",typeof y.fbq);var t=[];t.content_ids=[e.pkgDetail.package_id],t.contents=[{id:e.pkgDetail.package_id,quantity:1,item_price:e.pkgDetail.healthian_price}],t.content_type="product",t.content_category="SEO Pages",t.value=e.pkgDetail.healthian_price,t.currency="INR",t.content_name=e.pkgDetail.package_name,y.fbq("track","ViewContent",t)}},2e3)},2e3)},2e3)):(e.pkgDetail={},e.loading=!1,e.errorPkg=!0,e.errorPkgMsg="Something went wrong.",window.location.href="web-campaign/1")}).error(function(){e.pkgDetail={},e.loading=!1,e.errorPkg=!0,e.errorPkgMsg="Something went wrong.",window.location.href="web-campaign/1"})}},e.getDetails(),e.getPopularPackages=function(t){if("package"==e.deal_type)var a={city:JSON.parse(localStorage.getItem("cityID"))[0].city_name,ptype:e.deal_type,link_rewrite:e.link_rewrite};else var a={city:JSON.parse(localStorage.getItem("cityID"))[0].city_name,ptype:e.deal_type,link_rewrite:e.link_rewrite};l({method:"GET",url:p.couponUrl+"webv1/web_api/getPopularPackages",params:a}).success(function(a){if(a.data){e.packageList=[];var o=a.data;e.also_consider_loading=!1,o.forEach(function(a,o){"undefined"!=typeof t?a.package_id!==t&&e.packageList.push(a):e.packageList.push(a)}),e.packageList=_.shuffle(e.packageList)}})},e.getPopularPackages(e.pkgDetail.package_id),e.$on("changeCityDropown",function(t,a){e.getDetails()}),e.pkgSearch=function(t){e.cartclicked=!0,e.searchedCartPackage=e.pkgDetail;var a=angular.copy(e.searchedCartPackage);b.setTempPackage(a),"true"==localStorage.getItem("isLogin")?(e.member=JSON.parse(localStorage.getItem("user")).relatives,0===e.member.length||0!==n.count&&"undefined"!=typeof n.count?e.tempUser=JSON.parse(localStorage.getItem("tempUser")):(e.tempUser=e.member,localStorage.setItem("tempUser",JSON.stringify(e.tempUser))),e.addToCartModal=!0,u.go("user_selection_cart")):(e.$$childHead.loginModal=!e.$$childHead.loginModal,e.$$childHead.signupModal=!1,e.$$childHead.loginTab=!1,e.$$childHead.signupText="Continue to Cart",e.$$childHead.showSignupForm()),e.temp=e.searchedCartPackage},e.$on("showPatientDialog",function(t,a){if(e.cartclicked?e.addToCartModal=!0:e.addToCartModal=!1,"true"==localStorage.getItem("isLogin")){n.loggedin=!0;var o=JSON.parse(localStorage.getItem("user")).name,r=o.split(" ");n.user=r[0].charAt(0).toUpperCase().concat(r[0].substr(1)),e.userLoginDetails=JSON.parse(localStorage.getItem("user")),"true"==localStorage.getItem("isSocialLogin")&&(""===e.userLoginDetails.mobile?e.mobileModal=!0:e.mobileModal=!1);var i=b.getTempPackage();e.pkgSearch(i),e.member=JSON.parse(localStorage.getItem("user")).relatives}}),e.subscriber=function(t){return void 0===e.addAddressForm.customerEmail||""===e.addAddressForm.customerEmail?(e.addAddressForm.customeremail.$dirty=!0,e.addAddressForm.customeremail.$invalid=!0,e.addAddressForm.customeremail.$error.required=!0,!1):void doPost(l,p.serverUrl+"commonservice/subscribeNewsLetter/",{email:t,source:"web"},"",function(e){1==e.status?alert(e.message):alert(e.data.email)})},e.totalAmount=function(){e.amount=0,e.customerDetails.forEach(function(t,a){t.newpkg.forEach(function(t,a){e.amount+=parseInt(t.healthians_price)})}),0==e.amount&&(e.orderList=!1,e.addToCartModal=!1),localStorage.setItem("amountfinal",e.amount)},e.getSubTotal=function(t,a){return e.subtotal=0,t.forEach(function(t,a){e.subtotal+=parseInt(t.healthians_price)}),e.subtotal},e.getPkgCount=function(t,a){return e.testCount=0,t.newpkg.forEach(function(t,a){e.testCount++}),e.testCount},e.confirmBook=function(){n.total=e.amount,a.sendData1(e.customerDetails),localStorage.setItem("Detailscustomer",JSON.stringify(e.customerDetails))},e.coupondata={},localStorage.setItem("coupondata",JSON.stringify(e.coupondata)),s.search().vendor_code&&localStorage.setItem("vendor_code",s.search().vendor_code),s.search().admitad_uid&&localStorage.setItem("admitad_uid",s.search().admitad_uid),e.isLeadCaptured=localStorage.getItem("isLeadCaptured"),null===e.isLeadCaptured);else if("true"==e.isLeadCaptured){var v=new Date,S=new Date(v.getTime()+864e5);k.any()?document.cookie="ExitPopupMobileCookie=1; expires="+S.toUTCString():document.cookie="ExpirationCookieTest=1; expires="+S.toUTCString()}e.closeMobileCallToBookPopup=function(){f.eventTrack("Mobile - Call To Book Pop up - Close",{category:u.current.name+" - Mobile Call To Book Pop up"}),e.mobileCallToBookPopupDiv=!1},angular.element("#mobileCallToBook_bg").click(function(){e.closeMobileCallToBookPopup()}),e.closeCallToBookPopup=function(){angular.element("#callToBook_bg").fadeOut(0),angular.element("#callToBookPopup").slideUp(0),f.eventTrack("Call To Book Pop up - Close",{category:u.current.name+" - Call To Book Pop up"})},angular.element("#callToBook_bg").click(function(){e.closeCallToBookPopup()}),angular.element("#closeCallToBookmodal").click(function(){e.closeCallToBookPopup()}),e.exitCallToBookError=!1,e.mobileCallToBookPopupDiv=!1,e.callToBookMobileError=!1,e.callToBook=function(t){if(e.clickedPackage=t,"true"==localStorage.getItem("isLogin")){var a=JSON.parse(localStorage.getItem("user")).user_id,o={data:{utm_id:"seo-web-get-a-call-back",user_id:a,originator:u.current.name,source:"web"}};s.search().vendor_code&&(o.data.utm_id=s.search().vendor_code),o.data.message=u.current.name+" Page :: Customer search for : "+e.clickedPackage,k.any()?(o.data.utm_id="seo-mob-get-a-call-back",o.data.source="mobile",e.sendDirectDetailsMobile(o)):e.sendDirectDetailsDesktop(o)}else k.any()?e.mobileCallToBookPopupDiv=!0:(angular.element("#callToBookPopup").css("left",y.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",y.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus())},e.changeCallToBookDetailsPopupButtonColor=function(){e.customerctbNo&&(10!==e.customerctbNo.length||isNaN(e.customerctbNo)||void 0===e.customerctbNo||""===e.customerctbNo?(angular.element("#callToBooksubmitbtn").css("background","#b7b7b7"),angular.element("#callToBooksubmitbtn").css("border","1px solid #cecece"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#callToBooksubmitbtn").css("background","#e1530d"),angular.element("#callToBooksubmitbtn").css("border","1px solid #eaeaea"),angular.element("#callToBooksubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendCallToBookDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.customerctbNo||""===e.customerctbNo)return e.addCallToBookLeadForm.customerno123.$dirty=!0,e.addCallToBookLeadForm.customerno123.$invalid=!0,f.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.customerctbNo))return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Enter valid Mobile number",f.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Not a number"}),i(function(){e.mobile_valid_error=!1},2e3),!1;if(10!==e.customerctbNo.length)return e.ctb_mobile_valid_error=!0,e.ctb_mobile_valid_msg="Mobile number should be of 10 digits",f.eventTrack("Validation Fail",{category:u.current.name+" - Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),i(function(){e.mobile_valid_error=!1},2e3),!1;var t={data:{utm_id:"seo-web-get-a-call-back",name:e.customerctbName,mobile:e.customerctbNo,originator:u.current.name,source:"web"}};s.search().vendor_code&&(t.data.utm_id=s.search().vendor_code),t.data.message=u.current.name+" Page :: Customer search for : "+e.clickedPackage,localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=p.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(l,a,t,"",function(a){a.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",f.eventTrack("Lead Captured",{category:u.current.name+" - Call To Book Pop up",label:e.customerctbNo}),"undefined"!=typeof y.fbq&&y.fbq("track","Lead",t),e.callVendorPixel(a.lead_id)),e.customerctbName="",e.customerctbNo="",e.Message="",e.addCallToBookLeadForm.name123.$dirty=!1,e.addCallToBookLeadForm.customerno123.$dirty=!1,e.ctb_mob_valid_error=!1,i(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(a.message)})},e.sendDirectDetailsDesktop=function(t){var a=p.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(l,a,t,"",function(a){a.status?(e.exitCallToBookError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",f.eventTrack("Lead Captured",{category:u.current.name+" - Call To Book Pop up",label:e.customerctbNo}),e.callVendorPixel(a.lead_id),"undefined"!=typeof y.fbq&&y.fbq("track","Lead",t)),e.Message="",angular.element("#callToBookPopup").css("left",y.innerWidth/2-$("#callToBookPopup").width()/2),angular.element("#callToBookPopup").css("top",y.innerHeight/3-$("#callToBookPopup").height()/2),angular.element("#callToBook_bg").fadeIn(100),angular.element("#callToBookPopup").fadeIn(100),angular.element("#customerno123").focus(),i(function(){e.exitCallToBookError=!1,e.closeCallToBookPopup()},4e3)):alert(a.message)})},e.changeMobileCallToBookPopupButtonColor=function(){e.ctbcustomerNo&&(10!==e.ctbcustomerNo.length||isNaN(e.ctbcustomerNo)||void 0===e.ctbcustomerNo||""===e.ctbcustomerNo?(angular.element("#ctbmobilepopupsubmitbtn").css("background","#b7b7b7"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #cecece"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #b7b7b7 0%, #cecece 100%)")):(angular.element("#ctbmobilepopupsubmitbtn").css("background","#e1530d"),angular.element("#ctbmobilepopupsubmitbtn").css("border","1px solid #eaeaea"),angular.element("#ctbmobilepopupsubmitbtn").css("background-image","linear-gradient(to bottom, #ff7632 0%, #e1530d 100%)")))},e.sendDirectDetailsMobile=function(t){var a=p.couponUrl+"webv1/web_api/sendLoggedInLeadInfo";doPostWithOutToken(l,a,t,"",function(a){a.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",f.eventTrack("Lead Captured",{category:u.current.name+" - Mobile Call To Book Pop up",label:e.customerctbNo}),e.callVendorPixel(a.lead_id),"undefined"!=typeof y.fbq&&y.fbq("track","Lead",t)),e.Message="",e.mobileCallToBookPopupDiv=!0,i(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(a.message)})},e.sendMobileCTBPopupDetails=function(){if(e.addLeadFormSubmitted=!1,void 0===e.ctbcustomerNo||""===e.ctbcustomerNo)return e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!0,e.addMobileCTBPopupLeadForm.ctbcustomerno.$invalid=!0,f.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Mobile no. not enter"}),!1;if(isNaN(e.ctbcustomerNo))return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Enter valid Mobile number",f.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Not a number"}),i(function(){e.ctb_mob_valid_error=!1},2e3),!1;if(10!==e.ctbcustomerNo.length)return e.ctb_mob_valid_error=!0,e.ctb_mob_valid_msg="Mobile number should be of 10 digits",f.eventTrack("Validation Fail",{category:u.current.name+" - Mobile Call To Book Pop up",label:"Validation Fail : Not 10 digits"}),i(function(){e.ctb_mob_valid_error=!1},2e3),!1;var t={data:{utm_id:"seo-mob-get-a-call-back",name:e.ctbcustomerName,
mobile:e.ctbcustomerNo,originator:u.current.name,source:"mobile"}};s.search().vendor_code&&(t.data.utm_id=s.search().vendor_code),t.data.message=u.current.name+" Page :: Customer search for : "+e.clickedPackage,localStorage.getItem("guid")&&(t.data.guid=localStorage.getItem("guid"));var a=p.couponUrl+"webv1/web_api/saveEmailCompaignData";doPostWithOutToken(l,a,t,"",function(a){a.status?(e.callToBookMobileError=!0,"Lead successfully inserted"===a.message&&(e.clickedPackage="",f.eventTrack("Lead Captured",{category:u.current.name+" - Mobile Call To Book Pop up",label:e.ctbcustomerNo}),e.callVendorPixel(a.lead_id),"undefined"!=typeof y.fbq&&y.fbq("track","Lead",t)),e.ctbcustomerName="",e.ctbcustomerNo="",e.addMobileCTBPopupLeadForm.ctbname.$dirty=!1,e.addMobileCTBPopupLeadForm.ctbcustomerno.$dirty=!1,i(function(){e.callToBookMobileError=!1,e.closeMobileCallToBookPopup()},4e3)):alert(a.message)})}}function paymentSummaryController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b){if(e.booking_id=localStorage.getItem("booking_id"),e.stateParms=m,e.onlineDiscount=50,n.meta_robots="noindex, nofollow",e.getCartTotalTest=function(){"true"==localStorage.getItem("isLogin")&&(e.cartData=p.getCartDetails(),n.totalCartTest=0,e.cartData.forEach(function(e,t){e.hasOwnProperty("newpkg")&&(n.totalCartTest+=e.newpkg.length)}))},e.stringToInt=function(e){return parseInt(e)},e.getHardcopyPrice=function(){c.getHardcopyPrice(function(t){1==t.status&&(e.hardcopyPrice=t.data.price)})},e.getHardcopyPrice(),e.getPaymentSummaryDetails=function(t,a,o){var r={order_id:t};a&&(r.user_id=a),o&&(r.mobile=o),c.getPaymentSummaryDetails(r,function(a){if(1==a.status){if(e.payment_data=a.data,"undefined"==typeof e.stateParms.source){var o=localStorage.getItem("vendor_code");if(o){var r=b.serverUrl+"commonservice/getVendorPixel",i={vendor_code:o,page_source:"booking",booking_id:t,transaction_amount:e.payment_data.order_price};"admitad"===o&&(i.admitad_uid=localStorage.getItem("admitad_uid")),f.eventTrack("Vendor Order",{category:"Affiliate",label:o,value:e.payment_data.order_price}),doPostWithOutToken(l,r,i,"",function(e){e.status&&(angular.element("footer").append(e.data),localStorage.removeItem("vendor_code"),"admitad"===o&&localStorage.removeItem("admitad_uid"))})}if(f.eventTrack("Order completion success",{category:"Payment summary",label:"booking_id",value:t}),"undefined"!=typeof g.ga&&("web"!==e.payment_data.booked_from.toLowerCase()&&"mobile"!==e.payment_data.booked_from.toLowerCase()||(g.ga("ecommerce:addTransaction",{id:t,revenue:e.payment_data.order_price}),e.payment_data.orderDetail.forEach(function(a,o){a.hasOwnProperty("package")&&a.package.forEach(function(a,o){if(a.hasOwnProperty("package_id")){var r=a.package_id.split("_");g.ga("ecommerce:addItem",{id:t,revenue:e.payment_data.order_price,name:a.display_name,sku:a.package_id,category:r[0],price:a.healthians_price,quantity:1})}})}),g.ga("ecommerce:send"))),"undefined"!=typeof g.fbq){var n=[],s=[];e.payment_data.orderDetail.forEach(function(e,t){e.hasOwnProperty("package")&&e.package.forEach(function(e,t){if(e.hasOwnProperty("package_id")){_.contains(n,e.package_id)||n.push(e.package_id);var a={id:e.package_id,quantity:1,item_price:e.healthians_price};if(s.length>0){var o=!1;s.forEach(function(t,a){t.id==e.package_id&&(o=!0,s[a].quantity=s[a].quantity+1)}),o||s.push(a)}else s.push(a)}})}),n&&g.fbq("track","Purchase",{value:e.payment_data.order_price,currency:"INR",booking_id:t,content_type:"product",content_ids:n,contents:s})}}localStorage.removeItem("booking_id"),p.setSelectedPatient("",""),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer"),e.getCartTotalTest()}else e.payment_api_error=a.message})},e.getConfigInfo=function(){var t=b.couponUrl+"webv1/web_api/getDonationInfo";doGet(l,t,function(t){"success"===t.status&&(e.config_details=t.data,e.coupon_notice=JSON.parse(e.config_details.coupon_discount_addon_config),"off"!==e.coupon_notice.status&&(e.coupon_notice_msg=e.coupon_notice.msg,e.coupon_notice_div=!0))})},e.getConfigInfo(),s.search().booking_id){var h=e.stateParms.booking_id,y="",k="";e.stateParms.mobile?k=e.stateParms.mobile:null!==localStorage.getItem("userDetail")&&(k=JSON.parse(localStorage.getItem("userDetail")).mobile),""===k&&(e.stateParms.user_id?y=e.stateParms.user_id:null!==localStorage.getItem("user")&&(y=JSON.parse(localStorage.getItem("user")).user_id)),e.getPaymentSummaryDetails(h,y,k)}e.convenience_fees_visible=!1,e.showConvenienceFeesDialog=function(){e.convenience_fees_visible=!0}}function referralController(e,t,a,o,r,i,n,s){e.stateParms=i;var l=localStorage.getItem("token");if(a.meta_robots="noindex, nofollow",e.stateParms){e.user_id=e.stateParms.user_id;var d=n.couponUrl+"customer/account/getReferList_v2",c={data:{user_id:e.user_id,platform:"web",source:"web"}};if(r({method:"POST",url:d,data:c,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-API-TOKEN":l}}).success(function(t){t.status&&(e.total_refer_amount=1299,e.referral_code=t.data.referCode,e.earn_amount=t.data.earnAmount,e.appTerm=t.data.appTerm,e.sharingtext="A preventive test in 90 day keeps a doctor away! Happy to share "+t.data.refererPercentAmount+" coupon "+e.referral_code+" for booking your health checkup with Healthians.com Call "+a.companyphone.display_no)}),e.user_id){n.serverUrl+"commonservice/send_referral_sms?user_id="+e.user_id;setTimeout(function(){doPostWithOutToken(r,n.serverUrl+"commonservice/send_referral_sms",{user_id:e.user_id},"",function(e){})},300)}}}function bookingVerificationController(e,t,a,o,r,i,n,s,l){if(e.stateParms=i,a.meta_robots="noindex, nofollow",e.stateParms)if(e.booking_id=e.stateParms.booking_id,e.mobile=e.stateParms.mobile,e.booking_id&&e.mobile){var d=n.couponUrl+"webv1/web_api/booking_verification",c={data:{booking_id:e.booking_id,mobile:e.mobile,source:"web"}};doPostWithOutToken(r,d,c,"",function(t){l.scrollTo(0,0),t.status?e.message=t.message:e.message=t.message})}else l.location.href="/"}function phleboRouteController(e,t,a,o,r,i,n,s,l){e.stateParms=i,a.meta_robots="noindex, nofollow",e.callToPhlebo=function(){if(e.stateParms)if(e.booking_id=e.stateParms.booking_id,e.user_id=e.stateParms.user_id,e.booking_id&&e.user_id){var a=n.couponUrl+"webv1/web_api/callToPhlebo",o={data:{booking_id:e.booking_id,user_id:e.user_id,source:"web"}};localStorage.getItem("guid")&&(o.data.guid=localStorage.getItem("guid")),doPostWithOutToken(r,a,o,"",function(a){a&&a.status?(e.compaignmsg=!0,e.message="<h6>You are getting connected to your assigned phlebo.</h6> <p> You will receive a callback in a few minutes.</p>"):(e.compaignmsg=!0,e.message="<h6>There must be issue with the operator.</h6> <p> Our phlebo will connect you shortly.</p>"),t(function(){e.compaignmsg=!1},15e3)})}else l.location.href="/"}}function resetPasswordController(e,t,a,o,r,i,n,s,l,d,c,u,m,p){e.passwordnotmatched=!1,e.resetSucess=!1,e.userHash=m,e.linkexpired=!1,e.reset=function(){return e.resetPwdFormSubmitted=!1,void 0===e.resetPwdForm.userPwd||""===e.resetPwdForm.userPwd?(e.resetPwdForm.userpwd.$dirty=!0,e.resetPwdForm.userpwd.$invalid=!0,e.resetPwdForm.userpwd.$error.required=!0,a("userpwd"),!1):void 0===e.resetPwdForm.userConfmPwd||""===e.resetPwdForm.userConfmPwd?(e.resetPwdForm.userconfmpwd.$dirty=!0,e.resetPwdForm.userconfmpwd.$invalid=!0,e.resetPwdForm.userconfmpwd.$error.required=!0,a("userconfmpwd"),!1):void(e.resetPwdForm.userPwd!==e.resetPwdForm.userConfmPwd?e.passwordnotmatched=!0:e.resetPwdForm.userPwd===e.resetPwdForm.userConfmPwd&&(e.passwordnotmatched=!1,doPostJson(r,p.serverUrl+"commonservice/resetPassword",{hash:e.userHash.id,password:e.resetPwdForm.userPwd},"",function(t){1==t.status?e.resetSucess=!0:(e.linkexpired=!0,e.errorMsg=t.message)})))},e.showLoginForm=function(){localStorage.setItem("showLoginDialog","true"),i.path("/")}}function paymentFailController(e,t,a,o,r){var i=localStorage.getItem("booking_id"),n="";if(null!==localStorage.getItem("userDetail")&&(n=JSON.parse(localStorage.getItem("userDetail")).mobile,localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer")),"true"==localStorage.getItem("isLogin")){var s=JSON.parse(localStorage.getItem("user"));n=s.mobile,localStorage.removeItem("address"),localStorage.removeItem("amountfinal"),localStorage.removeItem("coupondata"),localStorage.removeItem("customerDetails"),localStorage.removeItem("houseno"),localStorage.removeItem("landmark"),localStorage.removeItem("postal_code"),localStorage.removeItem("sample_date"),localStorage.removeItem("time_slot"),localStorage.removeItem("total_amount"),localStorage.removeItem("type_of_payment"),localStorage.removeItem("Detailscustomer")}r.setSelectedPatient("",""),localStorage.removeItem("tempCart"),localStorage.removeItem("tempPkg"),e.tryAgain=function(){o.go("makepayment",{action:"Get",booking_id:i,mobile:n})}}function subscriptionPaymentFailController(e,t,a,o,r){e.tryAgain=function(){if(null!==localStorage.getItem("subscription_id")&&null!==localStorage.getItem("subscription_mobile")){var e=localStorage.getItem("subscription_id"),t=localStorage.getItem("subscription_mobile");o.go("makepayment",{action:"Get",subscription_id:e,mobile:t,source:"crm",payment_type_source:"subscription"})}}}function servicePaymentFailController(e,t,a,o,r){e.tryAgain=function(){if(null!==localStorage.getItem("service_booking_id")&&null!==localStorage.getItem("service_mobile")){var e=localStorage.getItem("service_booking_id"),t=localStorage.getItem("service_mobile");o.go("makepayment",{action:"Get",mobile:t,service_booking_id:e,payment_type_source:"service"})}}}function bookingServicePaymentFailController(e,t,a,o,r){e.tryAgain=function(){if(null!==localStorage.getItem("booking_id")&&null!==localStorage.getItem("service_booking_id")&&null!==localStorage.getItem("service_mobile")){var e=localStorage.getItem("service_booking_id"),t=localStorage.getItem("service_mobile"),a=localStorage.getItem("booking_id");o.go("makebookingservicepayment",{action:"Get",booking_id:a,mobile:t,service_booking_id:e})}}}function servicePaymentSummaryController(e,t,a,o,r,i,n,s,l,d,c,u){e.stateParms=l,r.meta_robots="noindex, nofollow",e.getPaymentSummaryDetails=function(){var t={service_booking_id:i.search().service_booking_id,user_mobile:i.search().mobile},a=u.paymentUrl+"service/healthians_service/get_service_detail_for_payment";doPostWithOutToken(n,a,t,"",function(t){1==t.status?(e.payment_data=t.data,e.total_received_amount=0,e.payment_data.payment_details.length>0&&e.payment_data.payment_details.forEach(function(t,a){e.total_received_amount+=parseInt(t.recieved_amount)}),localStorage.removeItem("service_booking_id"),localStorage.removeItem("service_mobile")):e.payment_api_error=!0})},i.search().service_booking_id&&i.search().mobile&&e.getPaymentSummaryDetails()}function subscriptionPaymentSummaryController(e,t,a,o,r,i,n,s,l,d,c,u){e.stateParms=l,e.getPaymentSummaryDetails=function(){var t={user_subscription_id:i.search().subscription_id,user_mobile:i.search().mobile},a=u.serverUrl+"subscription_management/get_subscription_detail_for_payment";doPostWithOutToken(n,a,t,"",function(t){1==t.status?(e.payment_data=t.data,e.total_received_amount=0,e.payment_data.payment_details.length>0&&e.payment_data.payment_details.forEach(function(t,a){e.total_received_amount+=parseInt(t.recieved_amount)}),localStorage.removeItem("subscription_id"),localStorage.removeItem("subscription_mobile")):e.payment_api_error=t.message})},i.search().subscription_id&&i.search().mobile&&e.getPaymentSummaryDetails()}function trfController(e,t,a,o,r,i,n,s,l,d,c){if(e.stateParms=c,e.loaderVar=!0,e.getPaymentSummaryDetails=function(t,a){var o={order_id:t,mobile:a},l=n.serverUrl+"commonservice/makeTrfPdf";s({method:"POST",url:l,data:o,responseType:"blob"}).success(function(t){if(0!==t.size&&"application/pdf"===t.type){var a="trf",o=document.createElement("a");document.body.appendChild(o),o.style="display: none";var n=new Blob([t],{type:"application/pdf"}),s=window.URL.createObjectURL(n);o.href=s,o.download=a,o.click(),e.loaderVar=!1,r(function(){i.location.href="/"},3e3)}else i.alert("Something wrong. Please contact to customer care"),r(function(){i.location.href="/"},2e3)})},a.search().booking_id&&a.search().mobile){var u=e.stateParms.booking_id,m=e.stateParms.mobile;e.getPaymentSummaryDetails(u,m)}}function unsubscribeController(e,t,a,o,r,i,n,s,l,d,c,u,m,c){var p={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()}};if(r.meta_robots="noindex, nofollow",p.any()?e.mobileview=!0:e.mobileview=!1,e.stateParms=c,e.stateParms)if(e.stateParms.email){e.email=e.stateParms.email;var g={data_value:e.email};"undefined"!=typeof e.stateParms.type?g.type=e.stateParms.type:g.type="email",e.mobileview?g.source="mobile":g.source="web";var _=u.serverUrl+"commonservice/unSubscribe";doPostWithOutToken(n,_,g,"",function(t){t.status?e.api_message=t.message:e.api_message=t.message})}else d.go("home")}function promoteHealthKarmaController(e,t,a,o,r,i,n,s,l,d,c,u,m,c){var p={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()}};p.any()?e.mobileview=!0:e.mobileview=!1;var g=JSON.parse(localStorage.getItem("cityID"));null===g&&localStorage.setItem("cityID",JSON.stringify([{city_id:"23",city_name:"Gurgaon"}])),e.getCityList=function(){l.getCityDetail(function(t){"success"==t.status&&(e.cityList=t.data,localStorage.setItem("cityList",JSON.stringify(e.cityList)))})},e.getCityList()}function uploadPrescriptionController(e,t,a,o,r,i,n,s,l,d,c,u,m){var p={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()}};if(e.uploadSuccess=!1,e.files=[],e.cust_id="",e.checkLogin=function(){if("true"==localStorage.getItem("isLogin")){var t=JSON.parse(localStorage.getItem("user")),a=t.mobile;"feedback"===u.current.name?(e.customerName=t.name,e.customerNo=a,e.customerEmail=t.email,e.cust_id=t.user_id):(e.customerName=t.name,e.customerNo=a,e.cust_id=t.user_id)}},e.onLoad=function(t,a,o,r,i,n){var l=!1;e.files.length<=3?angular.forEach(e.files,function(t,a){l||(t.filesize/1e3<2048?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],l=!0,s.alert("Image size should not be exceeded 2 MB")))}):(e.files=e.files.slice(0,3),angular.forEach(e.files,function(t,a){l||(t.filesize/1e3<2048?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],l=!0,s.alert("Image size should not be exceeded 2 MB")))}))},e.removeImage=function(t){t>-1&&(e.files.splice(t,1),0==e.files.length&&(e.perscriptionForm.files.$dirty=!0,e.perscriptionForm.files.$invalid=!0))},e.showOTP=!1,e.submitPrescription=function(){if(e.perscriptionFormSubmitted=!1,void 0===e.files||""===e.files||0==e.files.length)return e.perscriptionForm.files.$dirty=!0,e.perscriptionForm.files.$invalid=!0,!1;if(void 0===e.customerName||""===e.customerName)return e.perscriptionForm.name.$dirty=!0,e.perscriptionForm.name.$invalid=!0,!1;if(void 0===e.customerNo||""===e.customerNo)return e.perscriptionForm.customerno.$dirty=!0,e.perscriptionForm.customerno.$invalid=!0,e.showOTP=!1,!1;if(e.showOTP=!0,"undefined"==typeof e.userOTP&&e.showOTP){var t={mobile_number:e.customerNo,template:"prescription"};m.eventTrack("Request OTP",{category:"Upload Prescription",label:e.customerNo,value:e.customerName});var a=d.serverUrl+"commonservice/generate_otp_for_callback";doPostWithOutToken(c,a,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_error=!1,e.callbackopt_success_message="OTP has been sent to your above mobile number."):(e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message),n(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},3e3)})}else{if(void 0===e.userOTP||""===e.userOTP)return e.perscriptionForm.userotp.$dirty=!0,e.perscriptionForm.userotp.$invalid=!0,!1;var t={mobile_number:e.customerNo,otp:e.userOTP},o=d.serverUrl+"commonservice/validate_otp_for_callback";doPostWithOutToken(c,o,t,"",function(t){if(1==t.status){var a={name:e.customerName,mobile:e.customerNo,source:"web"};angular.forEach(e.files,function(e,t){a["image"+(t+1)]=encodeURIComponent(e.image)});var o=d.paymentUrl+"service/LeadActionController/uploadDoctorPrescription";doPostWithOutToken(c,o,a,"",function(t){t.status?(m.eventTrack("Upload Prescription Successfully",{category:"Upload Prescription",label:e.customerNo,value:e.customerName}),s.scrollTo(0,0),e.files=[],e.customerName="",e.customerNo="",e.userOTP=void 0,e.perscriptionForm.name.$dirty=!1,e.perscriptionForm.customerno.$dirty=!1,e.perscriptionForm.files.$dirty=!1,e.perscriptionForm.userotp.$dirty=!1,e.showOTP=!1,e.uploadSuccess=!0,n(function(){e.uploadSuccess=!1},9e3)):s.alert("Something Wrong. Try Again.")})}else e.userOTP="",e.callbackopt_error=!0,e.callbackopt_success=!1,e.callbackopt_message=t.message,n(function(){e.callbackopt_error=!1,e.callbackopt_success=!1,e.callbackopt_message="",e.callbackopt_success_message=""},3e3)})}},e.hideOTP=function(){e.showOTP=!1},e.resend_callback_opt=function(){if(void 0===e.customerNo||""===e.customerNo)return e.perscriptionForm.customerno.$dirty=!0,e.perscriptionForm.customerno.$invalid=!0,e.showOTP=!1,!1;if(e.customerNo){var t={mobile_number:e.customerNo,template:"prescription"};m.eventTrack("Resend OTP",{category:"Upload Prescription",label:e.customerNo});var a=d.serverUrl+"commonservice/resend_otp_for_callback";doPostWithOutToken(c,a,t,"",function(t){1==t.status?(e.callbackopt_success=!0,e.callbackopt_success_message=t.message,e.userOTP=void 0,e.perscriptionForm.userotp.$dirty=!1,n(function(){e.callbackopt_error=!1,e.callbackopt_message="",e.callbackopt_success=!1,e.callbackopt_success_message=""},3e3)):(e.callbackopt_error=!0,e.callbackopt_message=t.message,n(function(){e.callbackopt_error=!1,e.callbackopt_message=""},3e3))})}},e.addAnotherPrescription=function(){e.uploadSuccess=!1},e.checkLogin(),e.labVisitError=!1,e.labVisitSuccess=!1,e.sendDetails=function(){var t=grecaptcha.getResponse(widgetIdLAB);if(e.addLeadFormSubmitted=!1,void 0===e.addLeadForm.customerName||""===e.addLeadForm.customerName)return e.addLeadForm.name.$dirty=!0,e.addLeadForm.name.$invalid=!0,!1;if(void 0===e.addLeadForm.customerEmail||""===e.addLeadForm.customerEmail)return e.addLeadForm.customeremail.$dirty=!0,e.addLeadForm.customeremail.$invalid=!0,!1;if(void 0===e.addLeadForm.customerNo||""===e.addLeadForm.customerNo)return e.addLeadForm.customerno.$dirty=!0,e.addLeadForm.customerno.$invalid=!0,!1;if(0==t.length)return s.alert("Please check Captcha Checkbox"),!1;e.labVisitError=!1,e.labVisitSuccess=!1;var a={data:{name:e.addLeadForm.customerName,email:e.addLeadForm.customerEmail,contact_number:e.addLeadForm.customerNo,message:e.addLeadForm.Message,source:"web",g_recaptcha_response:t}};p.any()&&(a.data.source="mobile"),m.eventTrack("Lab visit Request",{category:"Lab visit",label:e.addLeadForm.customerEmail,value:e.addLeadForm.customerNo});var o=d.couponUrl+"webv1/web_api/saveLabVisitRequestData";doPostWithOutToken(c,o,a,"",function(t){t.status?(p.any()&&s.scrollTo(0,0),e.addLeadForm.customerName="",e.addLeadForm.customerEmail="",e.addLeadForm.customerNo="",e.addLeadForm.Message="",e.addLeadForm.name.$dirty=!1,e.addLeadForm.customerno.$dirty=!1,e.addLeadForm.customeremail.$dirty=!1,e.labVisitError=!1,e.labVisitSuccess=!0):(e.labVisitError=!0,e.labVisitSuccess=!1),grecaptcha.reset(widgetIdLAB),n(function(){e.labVisitError=!1,e.labVisitSuccess=!1},6e3)})},e.feedbackError=!1,e.feedbackSuccess=!1,e.sendFeedbackDetails=function(){var t=grecaptcha.getResponse(widgetIdFeedback);if(e.addFeedbackFormSubmitted=!1,void 0===e.customerName||""===e.customerName)return e.addFeedbackForm.name.$dirty=!0,e.addFeedbackForm.name.$invalid=!0,!1;if(void 0===e.customerNo||""===e.customerNo)return e.addFeedbackForm.customerno.$dirty=!0,e.addFeedbackForm.customerno.$invalid=!0,!1;if(void 0===e.customerEmail||""===e.customerEmail)return e.addFeedbackForm.customeremail.$dirty=!0,e.addFeedbackForm.customeremail.$invalid=!0,!1;if(void 0===e.issuetype||""===e.issuetype)return e.addFeedbackForm.issue_type.$dirty=!0,e.addFeedbackForm.issue_type.$invalid=!0,!1;if(void 0===e.Message||""===e.Message)return e.addFeedbackForm.message.$dirty=!0,e.addFeedbackForm.message.$invalid=!0,!1;if(e.show_booking&&(void 0===e.booking_id||""===e.booking_id))return e.addFeedbackForm.bookingid.$dirty=!0,e.addFeedbackForm.bookingid.$invalid=!0,!1;if(0==t.length)return s.alert("Please check Captcha Checkbox"),!1;e.feedbackError=!1,e.feedbackSuccess=!1;var a=e.issuetype.split("_"),o={internal:0,booking_id:"",cust_id:e.cust_id,customer_name:e.customerName,email_id:e.customerEmail,phone_number:e.customerNo,create_ticket_type:1,issue_type:a[0],department:a[1],ticket_priority_name:"medium",ticket_priority_id:2,status:"1",ticket_category:"1",subject:"Ticket from Web",format:"string",message:e.Message,source:"web",g_recaptcha_response:t};e.show_booking?(o.booking_id=e.booking_id,o.booking_required=1):o.booking_required=0,12==a[0]&&(o.create_ticket_type=4),m.eventTrack("Send Feedback",{category:"Feedback",label:e.customerNo,value:e.customerEmail});var r=d.paymentUrl+"service/ticket_management/createTicket";doPostWithOutToken(c,r,o,"",function(t){t.status?(s.scrollTo(0,0),e.customerName="",e.customerEmail="",e.customerNo="",e.Message="",e.issuetype="",e.addFeedbackForm.name.$dirty=!1,e.addFeedbackForm.customerno.$dirty=!1,e.addFeedbackForm.customeremail.$dirty=!1,e.addFeedbackForm.issue_type.$dirty=!1,e.addFeedbackForm.message.$dirty=!1,e.show_booking&&(e.booking_id="",e.addFeedbackForm.bookingid.$dirty=!1,e.show_booking=!1),e.feedbackError=!1,e.feedbackSuccess=!0):(e.feedbackErrorMsg=t.message,e.feedbackError=!0,e.feedbackSuccess=!1),grecaptcha.reset(widgetIdFeedback),n(function(){e.feedbackError=!1,e.feedbackSuccess=!1},6e3)})},e.issuetype_list=[],"feedback"===u.current.name){var g=d.paymentUrl+"service/ticket_management/getIssueTypes";doGet(c,g,function(t){t.status&&(e.issuetype_list=t.data)})}e.show_booking=!1,e.change_query=function(){if(void 0!==e.issuetype||""!==e.issuetype){var t=e.issuetype.split("_");_.contains([10,19,20,21,24],parseInt(t[0]))?e.show_booking=!1:e.show_booking=!0}else e.show_booking=!1},e.$on("showUserInfoFeedback",function(t,a){e.checkLogin()})}function uploadPrescriptionVendorController(e,t,a,o,r,i,n,s,l,d,c){e.stateParms=c,e.uploadSuccess=!1,e.files=[],e.loaderVar=!1,a.search().utmid?e.utmid=e.stateParms.utmid:i.location.href="/",e.cust_id="",e.onLoad=function(t,a,o,r,n,s){var l=!1;e.files.length<=3?angular.forEach(e.files,function(t,a){l||(t.filesize/1e3<5120?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],l=!0,i.alert("Image size should not be exceeded 5 MB")))}):(e.files=e.files.slice(0,3),angular.forEach(e.files,function(t,a){l||(t.filesize/1e3<5120?e.files[a].image="data:"+t.filetype+";base64,"+t.base64:(e.files=[],l=!0,i.alert("Image size should not be exceeded 5 MB")))}))},e.removeImage=function(t){t>-1&&(e.files.splice(t,1),0==e.files.length&&(e.perscriptionForm.files.$dirty=!0,e.perscriptionForm.files.$invalid=!0))},e.submitPrescription=function(){if(i.scrollTo(0,0),e.perscriptionFormSubmitted=!1,void 0===e.files||""===e.files||0==e.files.length)return e.perscriptionForm.files.$dirty=!0,e.perscriptionForm.files.$invalid=!0,!1;if(void 0===e.customerName||""===e.customerName)return e.perscriptionForm.name.$dirty=!0,e.perscriptionForm.name.$invalid=!0,!1;if(void 0===e.customerNo||""===e.customerNo)return e.perscriptionForm.customerno.$dirty=!0,e.perscriptionForm.customerno.$invalid=!0,!1;var t={name:e.customerName,mobile:e.customerNo,source:"web",utmid:e.utmid};angular.forEach(e.files,function(e,a){t["image"+(a+1)]=encodeURIComponent(e.image)}),e.loaderVar=!0;var a=n.paymentUrl+"service/LeadActionController/uploadDoctorPrescription";doPostWithOutToken(s,a,t,"",function(t){t.status?(e.loaderVar=!1,d.eventTrack("Upload Prescription Successfully for "+e.utmid,{category:"Upload Prescription",label:e.customerNo,value:e.customerName}),i.scrollTo(0,0),e.files=[],e.customerName="",e.customerNo="",e.perscriptionForm.name.$dirty=!1,e.perscriptionForm.customerno.$dirty=!1,e.perscriptionForm.files.$dirty=!1,e.uploadSuccess=!0,r(function(){e.uploadSuccess=!1},9e3)):(e.loaderVar=!1,i.alert("Something Wrong. Try Again."))})},e.addAnotherPrescription=function(){e.uploadSuccess=!1}}function userSelectionToCartController(e,t,a,o,r,i,n,s,l,d,c,u,m,p,g,f,b,h){var y={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return y.Android()||y.BlackBerry()||y.iOS()||y.Opera()||y.Windows()}};y.any()?e.device="mobile":e.device="web";var k=localStorage.getItem("token");if(e.userCheckBox={},e.userEdit={},e.familyCountError=!1,e.familyCountErrorMsg="Selection of maximum numbers (10) of family members per booking achieved. Please do another booking",e.editCustomerForm={},e.editCustomerFormModel={},e.load_wait=!1,"true"==localStorage.getItem("isLogin")){e.userId=JSON.parse(localStorage.getItem("user")).user_id,e.member=JSON.parse(localStorage.getItem("user")).relatives,0===e.member.length||0!==n.count&&"undefined"!=typeof n.count?e.tempUser=JSON.parse(localStorage.getItem("tempUser")):(e.tempUser=e.member,localStorage.setItem("tempUser",JSON.stringify(e.tempUser)),e.tempUser=JSON.parse(localStorage.getItem("tempUser"))),e.tmpPackage=p.getTempPackage();var v=b.serverUrl+"commonservice/checkInactiveProduct",S={source:"web",data_value:[e.tmpPackage.testId],log_user_id:e.userId};doPost(l,v,S,k,function(e){e.status?"error"===e.status&&("TOKEN_EXPIRED"!=e.code&&"INVALID_TOKEN"!=e.code&&"AUTH_FAILED"!=e.code||n.$broadcast("tokenExpired")):(alert(e.message),u.go("orderbook"))})}else u.go("orderbook");e.selectUserCheckBox=function(t,a,o){e.tmpPkg=angular.copy(e.tmpPackage)},e.confirmAddToCart=function(){e.load_wait=!0,e.selected_user_ids=[];for(var t in e.userCheckBox)e.userCheckBox.hasOwnProperty(t)&&e.userCheckBox[t]&&e.selected_user_ids.push(t);if(e.selected_user_ids.length>0){var a=b.serverUrl+"commonservice/checkInactiveProduct",o={source:"web",data_value:[e.tmpPackage.testId],log_user_id:e.userId};doPost(l,a,o,k,function(t){if(t.status)if("error"===t.status)"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired");else{if("undefined"!=typeof f.fbq){var a=e.tmpPackage.testId.split(","),o={content_type:"product",content_ids:_.uniq(a),value:e.tmpPackage.healthian_price,currency:"INR",content_category:"user_selection_cart"};f.fbq("track","AddToCart",o)}g.eventTrack("Add to cart",{category:"My Cart",label:e.tmpPackage.display_name,value:e.tmpPackage.healthian_price});var r=b.couponUrl+"customer/account/add_item_in_cart",i={data:{user_id:e.userId,customer_id:e.selected_user_ids.join(","),group_id:e.tmpPackage.testId,source:e.device}};"Your Customized Package"===e.tmpPackage.display_name&&(i.data.isCustomized=1),doPost(l,r,i,k,function(t){t.status?u.go("cart"):alert(t.message),e.load_wait=!1})}else e.load_wait=!1,alert(t.message),u.go("orderbook")})}else f.alert("Please select atleast one user"),e.load_wait=!1},e.addMemberDiv=!1,e.showAddMemberForm=function(){e.getcustomerFormModel={},e.addMemberDiv=!0,e.getcustomerForm.selectrelation.$dirty=!1,e.getcustomerForm.customername.$dirty=!1,e.getcustomerForm.customerphone.$dirty=!1,e.getcustomerForm.customerage.$dirty=!1,e.getcustomerForm.customergender.$dirty=!1,e.getcustomerForm.userdob.$dirty=!1},e.hideAddMemberForm=function(){e.getcustomerFormModel={},e.addMemberDiv=!1,e.getcustomerForm.selectrelation.$dirty=!1,e.getcustomerForm.customername.$dirty=!1,e.getcustomerForm.customerphone.$dirty=!1,e.getcustomerForm.customerage.$dirty=!1,e.getcustomerForm.customergender.$dirty=!1,e.getcustomerForm.userdob.$dirty=!1},e.addFamilyMember=function(){if(e.loaderVar=!0,e.getcustomerFormSubmitted=!1,void 0===e.getcustomerFormModel.name||""===e.getcustomerFormModel.name)return e.getcustomerForm.customername.$dirty=!0,e.getcustomerForm.customername.$invalid=!0,e.getcustomerForm.customername.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Name"}),focus("customername"),!1;if(void 0===e.getcustomerFormModel.relation||""===e.getcustomerFormModel.relation)return e.getcustomerForm.selectrelation.$dirty=!0,e.getcustomerForm.selectrelation.$invalid=!0,e.getcustomerForm.selectrelation.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Relation"}),focus("selectrelation"),!1;if(void 0===e.getcustomerFormModel.age||""===e.getcustomerFormModel.age)return e.getcustomerForm.customerage.$dirty=!0,e.getcustomerForm.customerage.$invalid=!0,e.getcustomerForm.customerage.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Age"}),focus("customerage"),!1;if(void 0===e.getcustomerFormModel.gender||""===e.getcustomerFormModel.gender)return e.getcustomerForm.customergender.$dirty=!0,e.getcustomerForm.customergender.$invalid=!0,e.getcustomerForm.customergender.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Gender"}),focus("customergender"),!1;if(e.getcustomerFormModel.age<5||e.getcustomerFormModel.age>120||e.getcustomerFormModel.age<=0)return e.getcustomerForm.customerage.$dirty=!0,e.getcustomerForm.customerage.$invalid=!0,e.getcustomerForm.customerage.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Age"}),focus("customerage"),!1;if(void 0!==e.getcustomerFormModel.phone&&""!==e.getcustomerFormModel.phone){if(isNaN(e.getcustomerFormModel.phone))return e.getcustomerForm.customerphone.$dirty=!0,e.getcustomerForm.customerphone.$invalid=!0,
e.getcustomerForm.customerphone.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Contact No."}),focus("customerphone"),!1;if(10!==e.getcustomerFormModel.phone.length)return e.getcustomerForm.customerphone.$dirty=!0,e.getcustomerForm.customerphone.$invalid=!0,e.getcustomerForm.customerphone.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Contact No."}),focus("customerphone"),!1}var t={log_user_id:e.userId,family_head:e.userId,cust_name:e.getcustomerFormModel.name,age:e.getcustomerFormModel.age,birth_date:e.getcustomerFormModel.userDOB,phone:e.getcustomerFormModel.phone,gender:e.getcustomerFormModel.gender,relationship:e.getcustomerFormModel.relation,dob_type:e.type,source:"web"};y.any()?t.device_source="mobile":t.device_source="web",c.insertNewUserInFamily(t,function(t){if("error"===t.status)"TOKEN_EXPIRED"!=t.code&&"INVALID_TOKEN"!=t.code&&"AUTH_FAILED"!=t.code||n.$broadcast("tokenExpired");else if(t.status){e.addMemberDiv=!1,e.loaderVar=!1;var a=t.data[0],o={user_id:a.user_id,name:e.getcustomerFormModel.name,email_address:"",age:e.getcustomerFormModel.age,dob:e.getcustomerFormModel.userDOB,contact_number:e.getcustomerFormModel.phone,gender:e.getcustomerFormModel.gender,relationship:e.getcustomerFormModel.relation,dob_type:e.type},r=JSON.parse(localStorage.getItem("user"));r.relatives.push(o),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("tempUser",JSON.stringify(r.relatives)),e.tempUser=JSON.parse(localStorage.getItem("tempUser")),e.getcustomerFormSubmitted=!1,e.hideAddMemberForm()}else e.loaderVar=!1,window.alert(t.message)})},e.getRealtionwithoutself=function(){c.getRealtionwithoutself(function(t){t.status===!0&&(e.RelationShip=t.data)})},e.getRealtionwithoutself(),e.calculateAge=function(t){var a=moment(t,"DD/MM/YYYY").format("M"),o=(moment(t,"DD/MM/YYYY").format("D"),moment(t,"DD/MM/YYYY").format("Y")),r=moment().month()+1,i=new Date,n=new Date(t),s=i.getFullYear()-o;i.getMonth()-n.getMonth();r>=a?e.getcustomerFormModel.age=s:e.getcustomerFormModel.age=s-1,angular.element("#customerage").val(e.getcustomerFormModel.age)},angular.element("#usepdob").datepicker({endDate:"-182d",onSelect:function(t,a){e.calculateAge(e.getcustomerFormModel.userDOB)}}),e.getDOB=function(t,a){void 0===t&&(t=0);var o=moment().subtract(t,"years").format("DD/MM/YYYY");e.getcustomerFormModel.userDOB=o,angular.element("#usepdob").datepicker({endDate:"-182d"}).datepicker("update",e.getcustomerFormModel.userDOB).on("changeDate",function(){e.calculateAge(e.getcustomerFormModel.userDOB)}),e.type="estimated"},e.calculateAgeEditUser=function(t,a){var o=moment(t,"DD/MM/YYYY").format("M"),r=(moment(t,"DD/MM/YYYY").format("D"),moment(t,"DD/MM/YYYY").format("Y")),i=moment().month()+1,n=new Date,s=new Date(t),l=n.getFullYear()-r;n.getMonth()-s.getMonth();i>=o?e.editCustomerFormModel[a].age=l:e.editCustomerFormModel[a].age=l-1,angular.element("#customerage_"+a).val(e.editCustomerFormModel[a].age)},e.getDOBEditUser=function(t,a){var o=moment().subtract(t,"years").format("DD/MM/YYYY");e.editCustomerFormModel[a].userDOB=o,angular.element("#userdob_"+a).datepicker({endDate:"-182d"}).datepicker("update",e.editCustomerFormModel[a].userDOB).on("changeDate",function(){e.calculateAge(e.editCustomerFormModel[a].userDOB,a)}),e.type="estimated"},e.editUser=function(t,a,o,r,i,n,s){e.userEdit[t]=!e.userEdit[t],e.editCustomerFormModel[t]={},e.editCustomerFormModel[t].name=a,e.editCustomerFormModel[t].age=o,e.editCustomerFormModel[t].relation=i,e.editCustomerFormModel[t].gender=r,e.editCustomerFormModel[t].phone=n,e.editCustomerFormModel[t].userDOB=s,angular.element("#userdob_"+t).datepicker({endDate:"-182d"}).datepicker("update",s).on("changeDate",function(){e.calculateAge(s)})},e.cancelEditUser=function(t){e.userEdit[t]=!e.userEdit[t]},e.updateUserDetails=function(t){if(e.loaderVar=!0,e.editCustomerFormSubmitted=!1,void 0===e.editCustomerFormModel[t].name||""===e.editCustomerFormModel[t].name)return e.editCustomerForm[t].customername.$dirty=!0,e.editCustomerForm[t].customername.$invalid=!0,e.editCustomerForm[t].customername.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Name"}),focus("customername"),!1;if(void 0===e.editCustomerFormModel[t].relation||""===e.editCustomerFormModel[t].relation)return e.editCustomerForm[t].selectrelation.$dirty=!0,e.editCustomerForm[t].selectrelation.$invalid=!0,e.editCustomerForm[t].selectrelation.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Relation"}),focus("selectrelation"),!1;if(void 0===e.editCustomerFormModel[t].age||""===e.editCustomerFormModel[t].age)return e.editCustomerForm[t].customerage.$dirty=!0,e.editCustomerForm[t].customerage.$invalid=!0,e.editCustomerForm[t].customerage.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Age"}),focus("customerage"),!1;if(void 0===e.editCustomerFormModel[t].gender||""===e.editCustomerFormModel[t].gender)return e.editCustomerForm[t].customergender.$dirty=!0,e.editCustomerForm[t].customergender.$invalid=!0,e.editCustomerForm[t].customergender.$error.required=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Gender"}),focus("customergender"),!1;if(e.editCustomerFormModel[t].age<5||e.editCustomerFormModel[t].age>120||e.editCustomerFormModel[t].age<=0)return e.editCustomerForm[t].customerage.$dirty=!0,e.editCustomerForm[t].customerage.$invalid=!0,e.editCustomerForm[t].customerage.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Age"}),focus("customerage"),!1;if(void 0!==e.editCustomerFormModel[t].phone&&null!==e.editCustomerFormModel[t].phone&&""!==e.editCustomerFormModel[t].phone){if(isNaN(e.editCustomerFormModel[t].phone))return e.editCustomerForm[t].customerphone.$dirty=!0,e.editCustomerForm[t].customerphone.$invalid=!0,e.editCustomerForm[t].customerphone.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Contact No."}),focus("customerphone"),!1;if(10!==e.editCustomerFormModel[t].phone.length)return e.editCustomerForm[t].customerphone.$dirty=!0,e.editCustomerForm[t].customerphone.$invalid=!0,e.editCustomerForm[t].customerphone.$error.pattern=!0,e.loaderVar=!1,g.eventTrack("Validation Faliure on Add Patient detail pop-up",{category:"Add Patient Popup",label:"Contact No."}),focus("customerphone"),!1}var a={log_user_id:e.userId,user_id:t,cust_name:e.editCustomerFormModel[t].name,age:e.editCustomerFormModel[t].age,birth_date:e.editCustomerFormModel[t].userDOB,phone:e.editCustomerFormModel[t].phone,gender:e.editCustomerFormModel[t].gender,relationship:e.editCustomerFormModel[t].relation,dob_type:e.type,source:"web"};c.updateUserDetail(a,function(o){if("error"===o.status)"TOKEN_EXPIRED"!=o.code&&"INVALID_TOKEN"!=o.code&&"AUTH_FAILED"!=o.code||n.$broadcast("tokenExpired");else if(o.status){e.userEdit[t]=!e.userEdit[t];var r=JSON.parse(localStorage.getItem("user"));r.relatives.forEach(function(e,o){e.user_id===t&&(r.relatives[o].name=a.cust_name,r.relatives[o].contact_number=a.phone,r.relatives[o].gender=a.gender,r.relatives[o].age=a.age,r.relatives[o].relationship=a.relationship,r.relatives[o].dob=a.birth_date,r.relatives[o].dob_type=a.type)}),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("tempUser",JSON.stringify(r.relatives)),e.tempUser=JSON.parse(localStorage.getItem("tempUser"))}else window.alert(o.message);e.loaderVar=!1})},i(function(){e.familyCountError=!1},6e3),angular.element(".modal-backdrop").remove(),angular.element("body").css("padding-right","0px")}App.controller("accountActivationController",accountActivationController),accountActivationController.$inject=["$scope","$rootScope","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$stateParams","ConstConfig"],App.controller("bookOrderController",bookOrderController),bookOrderController.$inject=["$scope","$rootScope","BookOrderService","$http","searchDetail","$element","dataShare","dataShare1","$location","$localStorage","$sessionStorage","$q","HomeService","$window","$filter","$timeout","ConstConfig","$analytics","$state","cartService"],App.controller("careerController",careerController),careerController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$anchorScroll","$window"],App.controller("cartController",cartController),cartController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","cartService","$analytics","$window","ConstConfig","$interval"],App.controller("compaignController",compaignController),compaignController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","HomeService","$window","$analytics","$interval","$state"],App.controller("contactUsController",contactUsController),contactUsController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig"],App.controller("dashboardController",dashboardController),dashboardController.$inject=["$scope","$rootScope","$location","$anchorScroll","DashboardService","BookOrderService","$timeout","$window","cartService","ConstConfig","$http"],App.controller("downloadFileController",downloadFileController),downloadFileController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig"],App.controller("phelboFeedbackController",phelboFeedbackController),phelboFeedbackController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("generalFeedbackController",generalFeedbackController),generalFeedbackController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("csatFeedbackController",csatFeedbackController),csatFeedbackController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("finalCheckoutController",finalCheckoutController),finalCheckoutController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","ConstConfig","$analytics","$sce","$state","HomeService","$window","$interval"],App.controller("footerController",footerController),footerController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$analytics"],App.controller("habitRiskDetailsController",habitRiskDetailsController),habitRiskDetailsController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","HomeService","$window","$analytics","$interval","$state","cartService","BookOrderService"],App.controller("headerController",headerController),headerController.$inject=["$http","$window","$scope","HomeService","$localStorage","$sessionStorage","$location","$timeout","$state","$rootScope","$remember","$q","ConstConfig","Facebook","cartService","$analytics"],App.controller("healthKarmaController",healthKarmaController),healthKarmaController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window","searchDetail","$state","Facebook"],App.controller("healthcheckupController",healthcheckupController),healthcheckupController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","HomeService","$window","$analytics","$interval","$state","$sce"],App.controller("healthtestController",healthtestController),healthtestController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","HomeService","$window","$analytics","$interval","$state"],App.controller("homeController",homeController),homeController.$inject=["$scope","$rootScope","$anchorScroll","$state","$window","HomeService","$anchorScroll","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$remember","ConstConfig","$analytics","Facebook","cartService","$document","focus","BookOrderService"],App.controller("homeControllerLogin",homeControllerLogin),homeControllerLogin.$inject=["$scope","$rootScope","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$window","$remember","ConstConfig","$state","Facebook","GooglePlus","$analytics","fbService"],App.controller("homeControllerForgotpwd",homeControllerForgotpwd),homeControllerForgotpwd.$inject=["$scope","$rootScope","$window","ConstConfig","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$uibModal"],App.controller("homeControllerChangepwd",homeControllerChangepwd),homeControllerChangepwd.$inject=["$scope","$rootScope","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$uibModal","DashboardService","$analytics","ConstConfig","$state"],App.controller("homeControllerUpdateUserDetails",homeControllerUpdateUserDetails),homeControllerUpdateUserDetails.$inject=["$scope","$rootScope","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$uibModal","DashboardService","$analytics","ConstConfig","$state","fbService","$window","Facebook"],App.controller("instantbookingController",instantbookingController),instantbookingController.$inject=["$scope","dataShare","dataShare1","$localStorage","$filter","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$analytics","$sce"],App.controller("makeOrderPaymentController",makeOrderPaymentController),makeOrderPaymentController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$sce"],App.controller("makeOrderServicePaymentController",makeOrderServicePaymentController),makeOrderServicePaymentController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$sce"],App.controller("orderServicePaymentSummaryController",orderServicePaymentSummaryController),orderServicePaymentSummaryController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","$sce","$stateParams"],App.controller("missedcallController",missedcallController),missedcallController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics"],App.controller("lifestyleController",lifestyleController),lifestyleController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics"],App.controller("technicalVideoController",technicalVideoController),technicalVideoController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$sce"],App.controller("maternalSerumController",maternalSerumController),maternalSerumController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("paytmPromoteController",paytmPromoteController),paytmPromoteController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$sce","$window","$state"],App.controller("mostSellingController",mostSellingController),mostSellingController.$inject=["$scope","$timeout","$rootScope","$location","$http","ConstConfig","$analytics","$localStorage"],App.controller("myAddressController",myAddressController),myAddressController.$inject=["$scope","$rootScope","$location","$anchorScroll","DashboardService","BookOrderService","$timeout","$window","cartService","ConstConfig","$http"],App.controller("myBookingController",myBookingController),myBookingController.$inject=["$scope","$rootScope","$location","$anchorScroll","DashboardService","BookOrderService","$timeout","$window","cartService","ConstConfig","$http"],App.controller("myReportController",myReportController),myReportController.$inject=["$scope","$rootScope","$location","$anchorScroll","DashboardService","BookOrderService","$timeout","$window","cartService","ConstConfig","$http"],App.controller("orderTrackingController",orderTrackingController),orderTrackingController.$inject=["$scope","$timeout","$rootScope","$location","$http","$q","$state","$stateParams","ConstConfig","BookOrderService"],App.controller("packageController",packageController),packageController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","searchDetail","BookOrderService","$analytics","cartService","HomeService","$window"],App.controller("paymentSummaryController",paymentSummaryController),paymentSummaryController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","cartService","$window","$analytics","ConstConfig"],App.controller("referralController",referralController),referralController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics"],App.controller("bookingVerificationController",bookingVerificationController),bookingVerificationController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("phleboRouteController",phleboRouteController),phleboRouteController.$inject=["$scope","$timeout","$rootScope","$location","$http","$stateParams","ConstConfig","$analytics","$window"],App.controller("resetPasswordController",resetPasswordController),resetPasswordController.$inject=["$scope","$rootScope","focus","HomeService","$http","$location","searchDetail","$timeout","dataShare","$localStorage","$sessionStorage","$q","$stateParams","ConstConfig"],App.controller("paymentFailController",paymentFailController),paymentFailController.$inject=["$scope","$rootScope","$location","$state","cartService"],App.controller("subscriptionPaymentFailController",subscriptionPaymentFailController),subscriptionPaymentFailController.$inject=["$scope","$rootScope","$location","$state","cartService"],App.controller("servicePaymentFailController",servicePaymentFailController),servicePaymentFailController.$inject=["$scope","$rootScope","$location","$state","cartService"],App.controller("bookingServicePaymentFailController",bookingServicePaymentFailController),bookingServicePaymentFailController.$inject=["$scope","$rootScope","$location","$state","cartService"],App.controller("servicePaymentSummaryController",servicePaymentSummaryController),servicePaymentSummaryController.$inject=["$scope","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$state","$stateParams","$window","$analytics","ConstConfig"],App.controller("subscriptionPaymentSummaryController",subscriptionPaymentSummaryController),subscriptionPaymentSummaryController.$inject=["$scope","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$state","$stateParams","$window","$analytics","ConstConfig"],App.controller("trfController",trfController),trfController.$inject=["$scope","$rootScope","$location","BookOrderService","$timeout","$window","ConstConfig","$http","$state","$analytics","$stateParams"],App.controller("unsubscribeController",unsubscribeController),unsubscribeController.$inject=["$scope","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","ConstConfig","searchDetail","$stateParams"],App.controller("promoteHealthKarmaController",promoteHealthKarmaController),promoteHealthKarmaController.$inject=["$scope","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","HomeService","$state","$stateParams","ConstConfig","searchDetail","$stateParams"],App.controller("uploadPrescriptionController",uploadPrescriptionController),uploadPrescriptionController.$inject=["$scope","$rootScope","$location","$anchorScroll","DashboardService","BookOrderService","$timeout","$window","cartService","ConstConfig","$http","$state","$analytics"],App.controller("uploadPrescriptionVendorController",uploadPrescriptionVendorController),uploadPrescriptionVendorController.$inject=["$scope","$rootScope","$location","$anchorScroll","$timeout","$window","ConstConfig","$http","$state","$analytics","$stateParams"],App.controller("userSelectionToCartController",userSelectionToCartController),userSelectionToCartController.$inject=["$scope","dataShare","dataShare1","$localStorage","$sessionStorage","$timeout","$rootScope","$location","$http","$q","BookOrderService","$state","$stateParams","cartService","$analytics","$window","ConstConfig","$interval"];